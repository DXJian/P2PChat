/*! For license information please see live.js.LICENSE.txt?id=bad0a58a61f0d766ea00 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{"/LFT":function(e,t,i){"use strict";(function(i,n){var o;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!e)throw"First parameter is required.";t=new s(e,t=t||{type:"video"});var i=this;function n(i){i&&(t.initCallback=function(){i(),i=t.initCallback=null});var n=new c(e,t);(m=new n(e,t)).record(),u("recording"),t.disableLogs||console.log("Initialized recorderType:",m.constructor.name,"for output-type:",t.type)}function o(e){if(e=e||function(){},m){if("paused"===i.state)return i.resumeRecording(),void setTimeout((function(){o(e)}),1);"recording"===i.state||t.disableLogs||console.warn('Recording state should be: "recording", however current state is: ',i.state),t.disableLogs||console.log("Stopped recording "+t.type+" stream."),"gif"!==t.type?m.stop(n):(m.stop(),n()),u("stopped")}else p();function n(n){if(m){Object.keys(m).forEach((function(e){"function"!=typeof m[e]&&(i[e]=m[e])}));var o=m.blob;if(!o){if(!n)throw"Recording failed.";m.blob=o=n}if(o&&!t.disableLogs&&console.log(o.type,"->",S(o.size)),e){var a;try{a=h.createObjectURL(o)}catch(e){}"function"==typeof e.call?e.call(i,a):e(a)}t.autoWriteToDisk&&d((function(e){var i={};i[t.type+"Blob"]=e,I.Store(i)}))}else"function"==typeof e.call?e.call(i,""):e("")}}function a(e){postMessage((new FileReaderSync).readAsDataURL(e))}function d(e,i){if(!e)throw"Pass a callback function over getDataURL.";var n=i?i.blob:(m||{}).blob;if(!n)return t.disableLogs||console.warn("Blob encoder did not finish its job yet."),void setTimeout((function(){d(e,i)}),1e3);if("undefined"==typeof Worker||navigator.mozGetUserMedia){var o=new FileReader;o.readAsDataURL(n),o.onload=function(t){e(t.target.result)}}else{var r=function(e){try{var t=h.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),i=new Worker(t);return h.revokeObjectURL(t),i}catch(e){}}(a);r.onmessage=function(t){e(t.data)},r.postMessage(n)}}function l(e){e=e||0,"paused"!==i.state?"stopped"!==i.state&&(e>=i.recordingDuration?o(i.onRecordingStopped):(e+=1e3,setTimeout((function(){l(e)}),1e3))):setTimeout((function(){l(e)}),1e3)}function u(e){i&&(i.state=e,"function"==typeof i.onStateChanged.call?i.onStateChanged.call(i,e):i.onStateChanged(e))}var m,f='It seems that recorder is destroyed or "startRecording" is not invoked for '+t.type+" recorder.";function p(){!0!==t.disableLogs&&console.warn(f)}var g={startRecording:function(o){return t.disableLogs||console.log("RecordRTC version: ",i.version),o&&(t=new s(e,o)),t.disableLogs||console.log("started recording "+t.type+" stream."),m?(m.clearRecordedData(),m.record(),u("recording"),i.recordingDuration&&l(),i):(n((function(){i.recordingDuration&&l()})),i)},stopRecording:o,pauseRecording:function(){m?"recording"===i.state?(u("paused"),m.pause(),t.disableLogs||console.log("Paused recording.")):t.disableLogs||console.warn("Unable to pause the recording. Recording state: ",i.state):p()},resumeRecording:function(){m?"paused"===i.state?(u("recording"),m.resume(),t.disableLogs||console.log("Resumed recording.")):t.disableLogs||console.warn("Unable to resume the recording. Recording state: ",i.state):p()},initRecorder:n,setRecordingDuration:function(e,t){if(void 0===e)throw"recordingDuration is required.";if("number"!=typeof e)throw"recordingDuration must be a number.";return i.recordingDuration=e,i.onRecordingStopped=t||function(){},{onRecordingStopped:function(e){i.onRecordingStopped=e}}},clearRecordedData:function(){m?(m.clearRecordedData(),t.disableLogs||console.log("Cleared old recorded data.")):p()},getBlob:function(){if(m)return m.blob;p()},getDataURL:d,toURL:function(){if(m)return h.createObjectURL(m.blob);p()},getInternalRecorder:function(){return m},save:function(e){m?_(m.blob,e):p()},getFromDisk:function(e){m?r.getFromDisk(t.type,e):p()},setAdvertisementArray:function(e){t.advertisement=[];for(var i=e.length,n=0;n<i;n++)t.advertisement.push({duration:n,image:e[n]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){"recording"!==i.state||t.disableLogs||console.warn("Stop an active recorder."),m&&"function"==typeof m.clearRecordedData&&m.clearRecordedData(),m=null,u("inactive"),i.blob=null},onStateChanged:function(e){t.disableLogs||console.log("Recorder state changed:",e)},state:"inactive",getState:function(){return i.state},destroy:function(){var e=t.disableLogs;t={disableLogs:!0},i.reset(),u("destroyed"),g=i=null,x.AudioContextConstructor&&(x.AudioContextConstructor.close(),x.AudioContextConstructor=null),t.disableLogs=e,t.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.2"};if(!this)return i=g,g;for(var v in g)this[v]=g[v];return i=this,g}function s(e,t){return t.recorderType||t.type||(t.audio&&t.video?t.type="video":t.audio&&!t.video&&(t.type="audio")),t.recorderType&&!t.type&&(t.recorderType===D||t.recorderType===M||void 0!==$&&t.recorderType===$?t.type="video":t.recorderType===A?t.type="gif":t.recorderType===O?t.type="audio":t.recorderType===P&&(T(e,"audio").length&&T(e,"video").length||!T(e,"audio").length&&T(e,"video").length?t.type="video":T(e,"audio").length&&!T(e,"video").length&&(t.type="audio"))),void 0!==P&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(t.mimeType||(t.mimeType="video/webm"),t.type||(t.type=t.mimeType.split("/")[0]),t.bitsPerSecond),t.type||(t.mimeType&&(t.type=t.mimeType.split("/")[0]),t.type||(t.type="audio")),t}function c(e,t){var i;return(C||g||v)&&(i=O),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!C&&(i=P),"video"===t.type&&(C||v)&&(i=D,void 0!==$&&"undefined"!=typeof ReadableStream&&(i=$)),"gif"===t.type&&(i=A),"canvas"===t.type&&(i=M),E()&&i!==M&&i!==A&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(T(e,"video").length||T(e,"audio").length)&&("audio"===t.type?"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm")&&(i=P):"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("video/webm")&&(i=P)),e instanceof Array&&e.length&&(i=j),t.recorderType&&(i=t.recorderType),!t.disableLogs&&i&&i.name&&console.log("Using recorderType:",i.name||i.constructor.name),!i&&y&&(i=P),i}function d(e){this.addStream=function(t){t&&(e=t)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var t,i=this.mediaType,n=this.mimeType||{audio:null,video:null,gif:null};if("function"!=typeof i.audio&&E()&&!T(e,"audio").length&&(i.audio=!1),"function"!=typeof i.video&&E()&&!T(e,"video").length&&(i.video=!1),"function"!=typeof i.gif&&E()&&!T(e,"video").length&&(i.gif=!1),!i.audio&&!i.video&&!i.gif)throw"MediaStream must have either audio or video tracks.";if(i.audio&&(t=null,"function"==typeof i.audio&&(t=i.audio),this.audioRecorder=new r(e,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:t,mimeType:n.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),i.video||this.audioRecorder.startRecording()),i.video){t=null,"function"==typeof i.video&&(t=i.video);var o=e;if(E()&&i.audio&&"function"==typeof i.audio){var a=T(e,"video")[0];b?((o=new w).addTrack(a),t&&t===D&&(t=P)):(o=new w).addTrack(a)}this.videoRecorder=new r(o,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:t,mimeType:n.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),i.audio||this.videoRecorder.startRecording()}if(i.audio&&i.video){var s=this,c=!0===E();(i.audio instanceof O&&i.video||!0!==i.audio&&!0!==i.video&&i.audio!==i.video)&&(c=!1),!0===c?(s.audioRecorder=null,s.videoRecorder.startRecording()):s.videoRecorder.initRecorder((function(){s.audioRecorder.initRecorder((function(){s.videoRecorder.startRecording(),s.audioRecorder.startRecording()}))}))}i.gif&&(t=null,"function"==typeof i.gif&&(t=i.gif),this.gifRecorder=new r(e,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:t,mimeType:n.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(e){e=e||function(){},this.audioRecorder&&this.audioRecorder.stopRecording((function(t){e(t,"audio")})),this.videoRecorder&&this.videoRecorder.stopRecording((function(t){e(t,"video")})),this.gifRecorder&&this.gifRecorder.stopRecording((function(t){e(t,"gif")}))},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(e){var t={};return this.audioRecorder&&(t.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(t.video=this.videoRecorder.getBlob()),this.gifRecorder&&(t.gif=this.gifRecorder.getBlob()),e&&e(t),t},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(e){function t(e,t){if("undefined"!=typeof Worker){var i=function(e){var t,i=h.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),n=new Worker(i);if(void 0!==h)t=h;else{if("undefined"==typeof webkitURL)throw"Neither URL nor webkitURL detected.";t=webkitURL}return t.revokeObjectURL(i),n}((function(e){postMessage((new FileReaderSync).readAsDataURL(e))}));i.onmessage=function(e){t(e.data)},i.postMessage(e)}else{var n=new FileReader;n.readAsDataURL(e),n.onload=function(e){t(e.target.result)}}}this.getBlob((function(i){i.audio&&i.video?t(i.audio,(function(n){t(i.video,(function(t){e({audio:n,video:t})}))})):i.audio?t(i.audio,(function(t){e({audio:t})})):i.video&&t(i.video,(function(t){e({video:t})}))}))},this.writeToDisk=function(){r.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(e){(e=e||{audio:!0,video:!0,gif:!0}).audio&&this.audioRecorder&&this.audioRecorder.save("string"==typeof e.audio?e.audio:""),e.video&&this.videoRecorder&&this.videoRecorder.save("string"==typeof e.video?e.video:""),e.gif&&this.gifRecorder&&this.gifRecorder.save("string"==typeof e.gif?e.gif:"")}}r.version="5.6.2",e.exports=r,void 0===(o=function(){return r}.apply(t,[]))||(e.exports=o),r.getFromDisk=function(e,t){if(!t)throw"callback is mandatory.";console.log("Getting recorded "+("all"===e?"blobs":e+" blob ")+" from disk!"),I.Fetch((function(i,n){"all"!==e&&n===e+"Blob"&&t&&t(i),"all"===e&&t&&t(i,n.replace("Blob",""))}))},r.writeToDisk=function(e){console.log("Writing recorded blob(s) to disk!"),(e=e||{}).audio&&e.video&&e.gif?e.audio.getDataURL((function(t){e.video.getDataURL((function(i){e.gif.getDataURL((function(e){I.Store({audioBlob:t,videoBlob:i,gifBlob:e})}))}))})):e.audio&&e.video?e.audio.getDataURL((function(t){e.video.getDataURL((function(e){I.Store({audioBlob:t,videoBlob:e})}))})):e.audio&&e.gif?e.audio.getDataURL((function(t){e.gif.getDataURL((function(e){I.Store({audioBlob:t,gifBlob:e})}))})):e.video&&e.gif?e.video.getDataURL((function(t){e.gif.getDataURL((function(e){I.Store({videoBlob:t,gifBlob:e})}))})):e.audio?e.audio.getDataURL((function(e){I.Store({audioBlob:e})})):e.video?e.video.getDataURL((function(e){I.Store({videoBlob:e})})):e.gif&&e.gif.getDataURL((function(e){I.Store({gifBlob:e})}))},d.getFromDisk=r.getFromDisk,d.writeToDisk=r.writeToDisk,void 0!==r&&(r.MRecordRTC=d);var l;(l=void 0!==i?i:null)&&"undefined"==typeof window&&void 0!==i&&(i.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},i.console||(i.console={}),void 0!==i.console.log&&void 0!==i.console.error||(i.console.error=i.console.log=i.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(l.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return e},l.HTMLVideoElement=function(){}),"undefined"==typeof location&&(l.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(l.screen={width:0,height:0}),void 0===h&&(l.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),l.window=i);var u=window.requestAnimationFrame;if(void 0===u)if("undefined"!=typeof webkitRequestAnimationFrame)u=webkitRequestAnimationFrame;else if("undefined"!=typeof mozRequestAnimationFrame)u=mozRequestAnimationFrame;else if("undefined"!=typeof msRequestAnimationFrame)u=msRequestAnimationFrame;else if(void 0===u){var m=0;u=function(e,t){var i=(new Date).getTime(),n=Math.max(0,16-(i-m)),o=setTimeout((function(){e(i+n)}),n);return m=i+n,o}}var f=window.cancelAnimationFrame;void 0===f&&("undefined"!=typeof webkitCancelAnimationFrame?f=webkitCancelAnimationFrame:"undefined"!=typeof mozCancelAnimationFrame?f=mozCancelAnimationFrame:"undefined"!=typeof msCancelAnimationFrame?f=msCancelAnimationFrame:void 0===f&&(f=function(e){clearTimeout(e)}));var p=window.AudioContext;void 0===p&&("undefined"!=typeof webkitAudioContext&&(p=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(p=mozAudioContext));var h=window.URL;void 0===h&&"undefined"!=typeof webkitURL&&(h=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var g=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveBlob&&!navigator.msSaveOrOpenBlob),v=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),b=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),C=!v&&!g&&!!navigator.webkitGetUserMedia||R()||-1!==navigator.userAgent.toLowerCase().indexOf("chrome/"),y=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);y&&!C&&-1!==navigator.userAgent.indexOf("CriOS")&&(y=!1,C=!0);var w=window.MediaStream;function S(e){if(0===e)return"0 Bytes";var t=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return(e/Math.pow(1e3,t)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][t]}function _(e,t){if(!e)throw"Blob object is required.";if(!e.type)try{e.type="video/webm"}catch(e){}var i=(e.type||"video/webm").split("/")[1];if(-1!==i.indexOf(";")&&(i=i.split(";")[0]),t&&-1!==t.indexOf(".")){var n=t.split(".");t=n[0],i=n[1]}var o=(t||Math.round(9999999999*Math.random())+888888888)+"."+i;if(void 0!==navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(e,o);if(void 0!==navigator.msSaveBlob)return navigator.msSaveBlob(e,o);var a=document.createElement("a");a.href=h.createObjectURL(e),a.download=o,a.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(a),"function"==typeof a.click?a.click():(a.target="_blank",a.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),h.revokeObjectURL(a.href)}function R(){return"undefined"!=typeof window&&"object"===a(window.process)&&"renderer"===window.process.type||(!(void 0===n||"object"!==a(n.versions)||!n.versions.electron)||"object"===("undefined"==typeof navigator?"undefined":a(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}function T(e,t){return e&&e.getTracks?e.getTracks().filter((function(e){return e.kind===(t||"audio")})):[]}function k(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}void 0===w&&"undefined"!=typeof webkitMediaStream&&(w=webkitMediaStream),void 0!==w&&(void 0===w.prototype.stop&&(w.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))}),"getVideoTracks"in w.prototype||(w.prototype.getVideoTracks=function(){if(!this.getTracks)return[];var e=[];return this.getTracks.forEach((function(t){-1!==t.kind.toString().indexOf("video")&&e.push(t)})),e},w.prototype.getAudioTracks=function(){if(!this.getTracks)return[];var e=[];return this.getTracks.forEach((function(t){-1!==t.kind.toString().indexOf("audio")&&e.push(t)})),e}),"stop"in w.prototype||(w.prototype.stop=function(){this.getAudioTracks().forEach((function(e){e.stop&&e.stop()})),this.getVideoTracks().forEach((function(e){e.stop&&e.stop()}))})),void 0!==r&&(r.invokeSaveAsDialog=_,r.getTracks=T,r.getSeekableBlob=function(e,t){if("undefined"==typeof EBML)throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var i=new EBML.Reader,n=new EBML.Decoder,o=EBML.tools,a=new FileReader;a.onload=function(e){n.decode(this.result).forEach((function(e){i.read(e)})),i.stop();var a=o.makeMetadataSeekable(i.metadatas,i.duration,i.cues),r=this.result.slice(i.metadataSize),s=new Blob([a,r],{type:"video/webm"});t(s)},a.readAsArrayBuffer(e)},r.bytesToSize=S,r.isElectron=R);var x={};function E(){if(b||y||g)return!0;navigator.appVersion;var e,t,i=navigator.userAgent,n=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10);return(C||v)&&(e=i.indexOf("Chrome"),n=i.substring(e+7)),-1!==(t=n.indexOf(";"))&&(n=n.substring(0,t)),-1!==(t=n.indexOf(" "))&&(n=n.substring(0,t)),o=parseInt(""+n,10),isNaN(o)&&(n=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10)),o>=49}function P(e,t){var i=this;if(void 0===e)throw'First argument "MediaStream" is required.';if("undefined"==typeof MediaRecorder)throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if("audio"===(t=t||{mimeType:"video/webm"}).type){var n;if(T(e,"video").length&&T(e,"audio").length)navigator.mozGetUserMedia?(n=new w).addTrack(T(e,"audio")[0]):n=new w(T(e,"audio")),e=n;t.mimeType&&-1!==t.mimeType.toString().toLowerCase().indexOf("audio")||(t.mimeType=C?"audio/webm":"audio/ogg"),t.mimeType&&"audio/ogg"!==t.mimeType.toString().toLowerCase()&&navigator.mozGetUserMedia&&(t.mimeType="audio/ogg")}var o,a=[];function r(){i.timestamps.push((new Date).getTime()),"function"==typeof t.onTimeStamp&&t.onTimeStamp(i.timestamps[i.timestamps.length-1],i.timestamps)}function s(e){return o&&o.mimeType?o.mimeType:e.mimeType||"video/webm"}function c(){a=[],o=null,i.timestamps=[]}this.getArrayOfBlobs=function(){return a},this.record=function(){i.blob=null,i.clearRecordedData(),i.timestamps=[],d=[],a=[];var n=t;t.disableLogs||console.log("Passing following config over MediaRecorder API.",n),o&&(o=null),C&&!E()&&(n="video/vp8"),"function"==typeof MediaRecorder.isTypeSupported&&n.mimeType&&(MediaRecorder.isTypeSupported(n.mimeType)||(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",n.mimeType),n.mimeType="audio"===t.type?"audio/webm":"video/webm"));try{o=new MediaRecorder(e,n),t.mimeType=n.mimeType}catch(t){o=new MediaRecorder(e)}n.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in o&&!1===o.canRecordMimeType(n.mimeType)&&(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",n.mimeType)),o.ondataavailable=function(e){if(e.data&&d.push("ondataavailable: "+S(e.data.size)),"number"!=typeof t.timeSlice)!e.data||!e.data.size||e.data.size<100||i.blob?i.recordingCallback&&(i.recordingCallback(new Blob([],{type:s(n)})),i.recordingCallback=null):(i.blob=t.getNativeBlob?e.data:new Blob([e.data],{type:s(n)}),i.recordingCallback&&(i.recordingCallback(i.blob),i.recordingCallback=null));else if(e.data&&e.data.size&&(a.push(e.data),r(),"function"==typeof t.ondataavailable)){var o=t.getNativeBlob?e.data:new Blob([e.data],{type:s(n)});t.ondataavailable(o)}},o.onstart=function(){d.push("started")},o.onpause=function(){d.push("paused")},o.onresume=function(){d.push("resumed")},o.onstop=function(){d.push("stopped")},o.onerror=function(e){e&&(e.name||(e.name="UnknownError"),d.push("error: "+e),t.disableLogs||(-1!==e.name.toString().toLowerCase().indexOf("invalidstate")?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",e):-1!==e.name.toString().toLowerCase().indexOf("notsupported")?console.error("MIME type (",n.mimeType,") is not supported.",e):-1!==e.name.toString().toLowerCase().indexOf("security")?console.error("MediaRecorder security error",e):"OutOfMemory"===e.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"IllegalStreamModification"===e.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"OtherRecordingError"===e.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"GenericError"===e.name?console.error("The UA cannot provide the codec or recording option that has been requested.",e):console.error("MediaRecorder Error",e)),function(e){if(!i.manuallyStopped&&o&&"inactive"===o.state)return delete t.timeslice,void o.start(6e5);setTimeout(void 0,1e3)}(),"inactive"!==o.state&&"stopped"!==o.state&&o.stop())},"number"==typeof t.timeSlice?(r(),o.start(t.timeSlice)):o.start(36e5),t.initCallback&&t.initCallback()},this.timestamps=[],this.stop=function(e){e=e||function(){},i.manuallyStopped=!0,o&&(this.recordingCallback=e,"recording"===o.state&&o.stop(),"number"==typeof t.timeSlice&&setTimeout((function(){i.blob=new Blob(a,{type:s(t)}),i.recordingCallback(i.blob)}),100))},this.pause=function(){o&&"recording"===o.state&&o.pause()},this.resume=function(){o&&"paused"===o.state&&o.resume()},this.clearRecordedData=function(){o&&"recording"===o.state&&i.stop(c),c()},this.getInternalRecorder=function(){return o},this.blob=null,this.getState=function(){return o&&o.state||"inactive"};var d=[];this.getAllStates=function(){return d},void 0===t.checkForInactiveTracks&&(t.checkForInactiveTracks=!1);i=this;!function n(){if(o&&!1!==t.checkForInactiveTracks)return!1===function(){if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}()?(t.disableLogs||console.log("MediaStream seems stopped."),void i.stop()):void setTimeout(n,1e3)}(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}function O(e,t){if(!T(e,"audio").length)throw"Your stream has no audio tracks.";var i,n=this,o=[],a=[],s=!1,c=0,d=2,l=(t=t||{}).desiredSampRate;function u(){if(!1===t.checkForInactiveTracks)return!0;if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}function m(e,t){function i(e,t){var i,n=e.numberOfAudioChannels,o=e.leftBuffers.slice(0),a=e.rightBuffers.slice(0),r=e.sampleRate,s=e.internalInterleavedLength,c=e.desiredSampRate;function d(e,t,i){var n=Math.round(e.length*(t/i)),o=[],a=Number((e.length-1)/(n-1));o[0]=e[0];for(var r=1;r<n-1;r++){var s=r*a,c=Number(Math.floor(s)).toFixed(),d=Number(Math.ceil(s)).toFixed(),u=s-c;o[r]=l(e[c],e[d],u)}return o[n-1]=e[e.length-1],o}function l(e,t,i){return e+(t-e)*i}function u(e,t){for(var i=new Float64Array(t),n=0,o=e.length,a=0;a<o;a++){var r=e[a];i.set(r,n),n+=r.length}return i}function m(e,t,i){for(var n=i.length,o=0;o<n;o++)e.setUint8(t+o,i.charCodeAt(o))}2===n&&(o=u(o,s),a=u(a,s),c&&(o=d(o,c,r),a=d(a,c,r))),1===n&&(o=u(o,s),c&&(o=d(o,c,r))),c&&(r=c),2===n&&(i=function(e,t){for(var i=e.length+t.length,n=new Float64Array(i),o=0,a=0;a<i;)n[a++]=e[o],n[a++]=t[o],o++;return n}(o,a)),1===n&&(i=o);var f=i.length,p=new ArrayBuffer(44+2*f),h=new DataView(p);m(h,0,"RIFF"),h.setUint32(4,36+2*f,!0),m(h,8,"WAVE"),m(h,12,"fmt "),h.setUint32(16,16,!0),h.setUint16(20,1,!0),h.setUint16(22,n,!0),h.setUint32(24,r,!0),h.setUint32(28,r*n*2,!0),h.setUint16(32,2*n,!0),h.setUint16(34,16,!0),m(h,36,"data"),h.setUint32(40,2*f,!0);for(var g=f,v=44,b=0;b<g;b++)h.setInt16(v,32767*i[b],!0),v+=2;if(t)return t({buffer:p,view:h});postMessage({buffer:p,view:h})}if(e.noWorker)i(e,(function(e){t(e.buffer,e.view)}));else{var n,o,a,r=(n=i,o=h.createObjectURL(new Blob([n.toString(),";this.onmessage =  function (eee) {"+n.name+"(eee.data);}"],{type:"application/javascript"})),(a=new Worker(o)).workerURL=o,a);r.onmessage=function(e){t(e.data.buffer,e.data.view),h.revokeObjectURL(r.workerURL),r.terminate()},r.postMessage(e)}}!0===t.leftChannel&&(d=1),1===t.numberOfAudioChannels&&(d=1),(!d||d<1)&&(d=2),t.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+d),void 0===t.checkForInactiveTracks&&(t.checkForInactiveTracks=!0),this.record=function(){if(!1===u())throw"Please make sure MediaStream is active.";y(),S=C=!1,s=!0,void 0!==t.timeSlice&&R()},this.stop=function(e){e=e||function(){},s=!1,m({desiredSampRate:l,sampleRate:b,numberOfAudioChannels:d,internalInterleavedLength:c,leftBuffers:o,rightBuffers:1===d?[]:a,noWorker:t.noWorker},(function(t,i){n.blob=new Blob([i],{type:"audio/wav"}),n.buffer=new ArrayBuffer(i.buffer.byteLength),n.view=i,n.sampleRate=l||b,n.bufferSize=v,n.length=c,S=!1,e&&e(n.blob)}))},void 0===r.Storage&&(r.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),r.Storage.AudioContextConstructor&&"closed"!==r.Storage.AudioContextConstructor.state||(r.Storage.AudioContextConstructor=new r.Storage.AudioContext);var f=r.Storage.AudioContextConstructor,p=f.createMediaStreamSource(e),g=[0,256,512,1024,2048,4096,8192,16384],v=void 0===t.bufferSize?4096:t.bufferSize;if(-1===g.indexOf(v)&&(t.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(g,null,"\t"))),f.createJavaScriptNode)i=f.createJavaScriptNode(v,d,d);else{if(!f.createScriptProcessor)throw"WebAudio API has no support on this browser.";i=f.createScriptProcessor(v,d,d)}p.connect(i),t.bufferSize||(v=i.bufferSize);var b=void 0!==t.sampleRate?t.sampleRate:f.sampleRate||44100;(b<22050||b>96e3)&&(t.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),t.disableLogs||t.desiredSampRate&&console.log("Desired sample-rate: "+t.desiredSampRate);var C=!1;function y(){o=[],a=[],c=0,S=!1,s=!1,C=!1,f=null,n.leftchannel=o,n.rightchannel=a,n.numberOfAudioChannels=d,n.desiredSampRate=l,n.sampleRate=b,n.recordingLength=c,_={left:[],right:[],recordingLength:0}}function w(){i&&(i.onaudioprocess=null,i.disconnect(),i=null),p&&(p.disconnect(),p=null),y()}this.pause=function(){C=!0},this.resume=function(){if(!1===u())throw"Please make sure MediaStream is active.";if(!s)return t.disableLogs||console.log("Seems recording has been restarted."),void this.record();C=!1},this.clearRecordedData=function(){t.checkForInactiveTracks=!1,s&&this.stop(w),w()},this.name="StereoAudioRecorder",this.toString=function(){return this.name};var S=!1;i.onaudioprocess=function(e){if(!C)if(!1===u()&&(t.disableLogs||console.log("MediaStream seems stopped."),i.disconnect(),s=!1),s){S||(S=!0,t.onAudioProcessStarted&&t.onAudioProcessStarted(),t.initCallback&&t.initCallback());var r=e.inputBuffer.getChannelData(0),l=new Float32Array(r);if(o.push(l),2===d){var m=e.inputBuffer.getChannelData(1),f=new Float32Array(m);a.push(f)}c+=v,n.recordingLength=c,void 0!==t.timeSlice&&(_.recordingLength+=v,_.left.push(l),2===d&&_.right.push(f))}else p&&(p.disconnect(),p=null)},f.createMediaStreamDestination?i.connect(f.createMediaStreamDestination()):i.connect(f.destination),this.leftchannel=o,this.rightchannel=a,this.numberOfAudioChannels=d,this.desiredSampRate=l,this.sampleRate=b,n.recordingLength=c;var _={left:[],right:[],recordingLength:0};function R(){s&&"function"==typeof t.ondataavailable&&void 0!==t.timeSlice&&(_.left.length?(m({desiredSampRate:l,sampleRate:b,numberOfAudioChannels:d,internalInterleavedLength:_.recordingLength,leftBuffers:_.left,rightBuffers:1===d?[]:_.right},(function(e,i){var n=new Blob([i],{type:"audio/wav"});t.ondataavailable(n),setTimeout(R,t.timeSlice)})),_={left:[],right:[],recordingLength:0}):setTimeout(R,t.timeSlice))}}function M(e,t){if("undefined"==typeof html2canvas)throw"Please link: https://www.webrtc-experiment.com/screenshot.js";(t=t||{}).frameInterval||(t.frameInterval=10);var i=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach((function(e){e in document.createElement("canvas")&&(i=!0)}));var n,o,a,r=!(!window.webkitRTCPeerConnection&&!window.webkitGetUserMedia||!window.chrome),s=50,c=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(r&&c&&c[2]&&(s=parseInt(c[2],10)),r&&s<52&&(i=!1),t.useWhammyRecorder&&(i=!1),i)if(t.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),e instanceof HTMLCanvasElement)n=e;else{if(!(e instanceof CanvasRenderingContext2D))throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";n=e.canvas}else navigator.mozGetUserMedia&&(t.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));this.record=function(){if(a=!0,i&&!t.useWhammyRecorder){var e;"captureStream"in n?e=n.captureStream(25):"mozCaptureStream"in n?e=n.mozCaptureStream(25):"webkitCaptureStream"in n&&(e=n.webkitCaptureStream(25));try{var r=new w;r.addTrack(T(e,"video")[0]),e=r}catch(e){}if(!e)throw"captureStream API are NOT available.";(o=new P(e,{mimeType:t.mimeType||"video/webm"})).record()}else f.frames=[],m=(new Date).getTime(),u();t.initCallback&&t.initCallback()},this.getWebPImages=function(i){if("canvas"===e.nodeName.toLowerCase()){var n=f.frames.length;f.frames.forEach((function(e,i){var o=n-i;t.disableLogs||console.log(o+"/"+n+" frames remaining"),t.onEncodingCallback&&t.onEncodingCallback(o,n);var a=e.image.toDataURL("image/webp",1);f.frames[i].image=a})),t.disableLogs||console.log("Generating WebM"),i()}else i()},this.stop=function(e){a=!1;var n=this;i&&o?o.stop(e):this.getWebPImages((function(){f.compile((function(i){t.disableLogs||console.log("Recording finished!"),n.blob=i,n.blob.forEach&&(n.blob=new Blob([],{type:"video/webm"})),e&&e(n.blob),f.frames=[]}))}))};var d=!1;function l(){f.frames=[],a=!1,d=!1}function u(){if(d)return m=(new Date).getTime(),setTimeout(u,500);if("canvas"===e.nodeName.toLowerCase()){var i=(new Date).getTime()-m;return m=(new Date).getTime(),f.frames.push({image:(n=document.createElement("canvas"),o=n.getContext("2d"),n.width=e.width,n.height=e.height,o.drawImage(e,0,0),n),duration:i}),void(a&&setTimeout(u,t.frameInterval))}var n,o;html2canvas(e,{grabMouse:void 0===t.showMousePointer||t.showMousePointer,onrendered:function(e){var i=(new Date).getTime()-m;if(!i)return setTimeout(u,t.frameInterval);m=(new Date).getTime(),f.frames.push({image:e.toDataURL("image/webp",1),duration:i}),a&&setTimeout(u,t.frameInterval)}})}this.pause=function(){d=!0,o instanceof P&&o.pause()},this.resume=function(){d=!1,o instanceof P?o.resume():a||this.record()},this.clearRecordedData=function(){a&&this.stop(l),l()},this.name="CanvasRecorder",this.toString=function(){return this.name};var m=(new Date).getTime(),f=new L.Video(100)}function D(e,t){function i(e){e=void 0!==e?e:10;var t=(new Date).getTime()-c;return t?a?(c=(new Date).getTime(),setTimeout(i,100)):(c=(new Date).getTime(),s.paused&&s.play(),u.drawImage(s,0,0,l.width,l.height),d.frames.push({duration:t,image:l.toDataURL("image/webp")}),void(o||setTimeout(i,e,e))):setTimeout(i,e,e)}function n(e,t,i,n,o){var a=document.createElement("canvas");a.width=l.width,a.height=l.height;var r,s,c,d=a.getContext("2d"),u=[],m=-1===t,f=t&&t>0&&t<=e.length?t:e.length,p=0,h=0,g=0,v=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),b=i&&i>=0&&i<=1?i:0,C=n&&n>=0&&n<=1?n:0,y=!1;s=-1,c=(r={length:f,functionToLoop:function(t,i){var n,o,a,r=function(){!y&&a-n<=a*C||(m&&(y=!0),u.push(e[i])),t()};if(y)r();else{var s=new Image;s.onload=function(){d.drawImage(s,0,0,l.width,l.height);var e=d.getImageData(0,0,l.width,l.height);n=0,o=e.data.length,a=e.data.length/4;for(var t=0;t<o;t+=4){var i={r:e.data[t],g:e.data[t+1],b:e.data[t+2]};Math.sqrt(Math.pow(i.r-p,2)+Math.pow(i.g-h,2)+Math.pow(i.b-g,2))<=v*b&&n++}r()},s.src=e[i].image}},callback:function(){(u=u.concat(e.slice(f))).length<=0&&u.push(e[e.length-1]),o(u)}}).length,function e(){++s!==c?setTimeout((function(){r.functionToLoop(e,s)}),1):r.callback()}()}(t=t||{}).frameInterval||(t.frameInterval=10),t.disableLogs||console.log("Using frames-interval:",t.frameInterval),this.record=function(){t.width||(t.width=320),t.height||(t.height=240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),l.width=t.canvas.width||320,l.height=t.canvas.height||240,u=l.getContext("2d"),t.video&&t.video instanceof HTMLVideoElement?(s=t.video.cloneNode(),t.initCallback&&t.initCallback()):(s=document.createElement("video"),k(e,s),s.onloadedmetadata=function(){t.initCallback&&t.initCallback()},s.width=t.video.width,s.height=t.video.height),s.muted=!0,s.play(),c=(new Date).getTime(),d=new L.Video,t.disableLogs||(console.log("canvas resolutions",l.width,"*",l.height),console.log("video width/height",s.width||l.width,"*",s.height||l.height)),i(t.frameInterval)};var o=!1;this.stop=function(e){e=e||function(){},o=!0;var i=this;setTimeout((function(){n(d.frames,-1,null,null,(function(n){d.frames=n,t.advertisement&&t.advertisement.length&&(d.frames=t.advertisement.concat(d.frames)),d.compile((function(t){i.blob=t,i.blob.forEach&&(i.blob=new Blob([],{type:"video/webm"})),e&&e(i.blob)}))}))}),10)};var a=!1;function r(){d.frames=[],o=!0,a=!1}this.pause=function(){a=!0},this.resume=function(){a=!1,o&&this.record()},this.clearRecordedData=function(){o||this.stop(r),r()},this.name="WhammyRecorder",this.toString=function(){return this.name};var s,c,d,l=document.createElement("canvas"),u=l.getContext("2d")}void 0!==p?x.AudioContext=p:"undefined"!=typeof webkitAudioContext&&(x.AudioContext=webkitAudioContext),void 0!==r&&(r.Storage=x),void 0!==r&&(r.MediaStreamRecorder=P),void 0!==r&&(r.StereoAudioRecorder=O),void 0!==r&&(r.CanvasRecorder=M),void 0!==r&&(r.WhammyRecorder=D);var L=function(){function e(e){this.frames=[],this.duration=e||1,this.quality=.8}function t(e){function t(e,t,i){return[{data:e,id:231}].concat(i.map((function(e){var i=function(e){var t=0;e.keyframe&&(t|=128);e.invisible&&(t|=8);e.lacing&&(t|=e.lacing<<1);e.discardable&&(t|=1);if(e.trackNum>127)throw"TrackNumber > 127 not supported";return[128|e.trackNum,e.timecode>>8,255&e.timecode,t].map((function(e){return String.fromCharCode(e)})).join("")+e.frame}({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(t)});return t+=e.duration,{data:i,id:163}})))}function i(e){for(var t=[];e>0;)t.push(255&e),e>>=8;return new Uint8Array(t.reverse())}function n(e){var t=[];e=(e.length%8?new Array(9-e.length%8).join("0"):"")+e;for(var i=0;i<e.length;i+=8)t.push(parseInt(e.substr(i,8),2));return new Uint8Array(t)}function o(e,t){return parseInt(e.substr(t+4,4).split("").map((function(e){var t=e.charCodeAt(0).toString(2);return new Array(8-t.length+1).join("0")+t})).join(""),2)}var r=new function(e){var o=function(e){if(!e[0])return void postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});for(var t=e[0].width,i=e[0].height,n=e[0].duration,o=1;o<e.length;o++)n+=e[o].duration;return{duration:n,width:t,height:i}}(e);if(!o)return[];for(var r,s=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:(r=o.duration,[].slice.call(new Uint8Array(new Float64Array([r]).buffer),0).map((function(e){return String.fromCharCode(e)})).reverse().join("")),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:o.width,id:176},{data:o.height,id:186}]}]}]}]}],c=0,d=0;c<e.length;){var l=[],u=0;do{l.push(e[c]),u+=e[c].duration,c++}while(c<e.length&&u<3e4);var m={id:524531317,data:t(d,0,l)};s[1].data.push(m),d+=u}return function e(t){for(var o=[],r=0;r<t.length;r++){var s=t[r].data;"object"===a(s)&&(s=e(s)),"number"==typeof s&&(s=n(s.toString(2))),"string"==typeof s&&(s=new Uint8Array(s.split("").map((function(e){return e.charCodeAt(0)}))));var c=s.size||s.byteLength||s.length,d=Math.ceil(Math.ceil(Math.log(c)/Math.log(2))/8),l=c.toString(2),u=new Array(7*d+7+1-l.length).join("0")+l,m=new Array(d).join("0")+"1"+u;o.push(i(t[r].id)),o.push(n(m)),o.push(s)}return new Blob(o,{type:"video/webm"})}(s)}(e.map((function(e){var t=function(e){for(var t=e.RIFF[0].WEBP[0],i=t.indexOf("Â*"),n=0,o=[];n<4;n++)o[n]=t.charCodeAt(i+3+n);return{width:16383&(o[1]<<8|o[0]),height:16383&(o[3]<<8|o[2]),data:t,riff:e}}(function e(t){for(var i=0,n={};i<t.length;){var a=t.substr(i,4),r=o(t,i),s=t.substr(i+4+4,r);i+=8+r,n[a]=n[a]||[],"RIFF"===a||"LIST"===a?n[a].push(e(s)):n[a].push(s)}return n}(atob(e.image.slice(23))));return t.duration=e.duration,t})));postMessage(r)}return e.prototype.add=function(e,t){if("canvas"in e&&(e=e.canvas),"toDataURL"in e&&(e=e.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:t||this.duration})},e.prototype.compile=function(e){var i,n,o,a=(i=t,n=h.createObjectURL(new Blob([i.toString(),"this.onmessage =  function (eee) {"+i.name+"(eee.data);}"],{type:"application/javascript"})),o=new Worker(n),h.revokeObjectURL(n),o);a.onmessage=function(t){t.data.error?console.error(t.data.error):e(t.data)},a.postMessage(this.frames)},{Video:e}}();void 0!==r&&(r.Whammy=L);var I={init:function(){var e=this;if("undefined"!=typeof indexedDB&&void 0!==indexedDB.open){var t,i=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),n=indexedDB.open(i,1);n.onerror=e.onError,n.onsuccess=function(){((t=n.result).onerror=e.onError,t.setVersion)?1!==t.version?t.setVersion(1).onsuccess=function(){o(t),a()}:a():a()},n.onupgradeneeded=function(e){o(e.target.result)}}else console.error("IndexedDB API are not available in this browser.");function o(t){t.createObjectStore(e.dataStoreName)}function a(){var i=t.transaction([e.dataStoreName],"readwrite");function n(t){i.objectStore(e.dataStoreName).get(t).onsuccess=function(i){e.callback&&e.callback(i.target.result,t)}}e.videoBlob&&i.objectStore(e.dataStoreName).put(e.videoBlob,"videoBlob"),e.gifBlob&&i.objectStore(e.dataStoreName).put(e.gifBlob,"gifBlob"),e.audioBlob&&i.objectStore(e.dataStoreName).put(e.audioBlob,"audioBlob"),n("audioBlob"),n("videoBlob"),n("gifBlob")}},Fetch:function(e){return this.callback=e,this.init(),this},Store:function(e){return this.audioBlob=e.audioBlob,this.videoBlob=e.videoBlob,this.gifBlob=e.gifBlob,this.init(),this},onError:function(e){console.error(JSON.stringify(e,null,"\t"))},dataStoreName:"recordRTC",dbName:null};function A(e,t){if("undefined"==typeof GIFEncoder){var i=document.createElement("script");i.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(i)}t=t||{};var n=e instanceof CanvasRenderingContext2D||e instanceof HTMLCanvasElement;this.record=function(){"undefined"!=typeof GIFEncoder&&c?(n||(t.width||(t.width=d.offsetWidth||320),t.height||(t.height=d.offsetHeight||240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),r.width=t.canvas.width||320,r.height=t.canvas.height||240,d.width=t.video.width||320,d.height=t.video.height||240),(m=new GIFEncoder).setRepeat(0),m.setDelay(t.frameRate||200),m.setQuality(t.quality||10),m.start(),"function"==typeof t.onGifRecordingStarted&&t.onGifRecordingStarted(),Date.now(),p=u((function e(i){if(!0!==h.clearedRecordedData){if(o)return setTimeout((function(){e(i)}),100);p=u(e),void 0===a(l)&&(l=i),i-l<90||(!n&&d.paused&&d.play(),n||s.drawImage(d,0,0,r.width,r.height),t.onGifPreview&&t.onGifPreview(r.toDataURL("image/png")),m.addFrame(s),l=i)}})),t.initCallback&&t.initCallback()):setTimeout(h.record,1e3)},this.stop=function(e){e=e||function(){},p&&f(p),Date.now(),this.blob=new Blob([new Uint8Array(m.stream().bin)],{type:"image/gif"}),e(this.blob),m.stream().bin=[]};var o=!1;this.pause=function(){o=!0},this.resume=function(){o=!1},this.clearRecordedData=function(){h.clearedRecordedData=!0,m&&(m.stream().bin=[])},this.name="GifRecorder",this.toString=function(){return this.name};var r=document.createElement("canvas"),s=r.getContext("2d");n&&(e instanceof CanvasRenderingContext2D?r=(s=e).canvas:e instanceof HTMLCanvasElement&&(s=e.getContext("2d"),r=e));var c=!0;if(!n){var d=document.createElement("video");d.muted=!0,d.autoplay=!0,d.playsInline=!0,c=!1,d.onloadedmetadata=function(){c=!0},k(e,d),d.play()}var l,m,p=null,h=this}function U(e,t){!function(e){void 0===r&&e&&"undefined"==typeof window&&void 0!==i&&(i.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},i.console||(i.console={}),void 0!==i.console.log&&void 0!==i.console.error||(i.console.error=i.console.log=i.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(e.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return e},e.HTMLVideoElement=function(){}),"undefined"==typeof location&&(e.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(e.screen={width:0,height:0}),void 0===l&&(e.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),e.window=i)}(void 0!==i?i:null),t=t||"multi-streams-mixer";var n=[],o=!1,a=document.createElement("canvas"),s=a.getContext("2d");a.style.opacity=0,a.style.position="absolute",a.style.zIndex=-1,a.style.top="-1000em",a.style.left="-1000em",a.className=t,(document.body||document.documentElement).appendChild(a),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var c=this,d=window.AudioContext;void 0===d&&("undefined"!=typeof webkitAudioContext&&(d=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(d=mozAudioContext));var l=window.URL;void 0===l&&"undefined"!=typeof webkitURL&&(l=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var u=window.MediaStream;void 0===u&&"undefined"!=typeof webkitMediaStream&&(u=webkitMediaStream),void 0!==u&&void 0===u.prototype.stop&&(u.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))});var m={};function f(){if(!o){var e=n.length,t=!1,i=[];if(n.forEach((function(e){e.stream||(e.stream={}),e.stream.fullcanvas?t=e:i.push(e)})),t)a.width=t.stream.width,a.height=t.stream.height;else if(i.length){a.width=e>1?2*i[0].width:i[0].width;var r=1;3!==e&&4!==e||(r=2),5!==e&&6!==e||(r=3),7!==e&&8!==e||(r=4),9!==e&&10!==e||(r=5),a.height=i[0].height*r}else a.width=c.width||360,a.height=c.height||240;t&&t instanceof HTMLVideoElement&&p(t),i.forEach((function(e,t){p(e,t)})),setTimeout(f,c.frameInterval)}}function p(e,t){if(!o){var i=0,n=0,a=e.width,r=e.height;1===t&&(i=e.width),2===t&&(n=e.height),3===t&&(i=e.width,n=e.height),4===t&&(n=2*e.height),5===t&&(i=e.width,n=2*e.height),6===t&&(n=3*e.height),7===t&&(i=e.width,n=3*e.height),void 0!==e.stream.left&&(i=e.stream.left),void 0!==e.stream.top&&(n=e.stream.top),void 0!==e.stream.width&&(a=e.stream.width),void 0!==e.stream.height&&(r=e.stream.height),s.drawImage(e,i,n,a,r),"function"==typeof e.stream.onRender&&e.stream.onRender(s,i,n,a,r,t)}}function h(e){var i=document.createElement("video");return function(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}(e,i),i.className=t,i.muted=!0,i.volume=0,i.width=e.width||c.width||360,i.height=e.height||c.height||240,i.play(),i}function g(t){n=[],(t=t||e).forEach((function(e){if(e.getTracks().filter((function(e){return"video"===e.kind})).length){var t=h(e);t.stream=e,n.push(t)}}))}void 0!==d?m.AudioContext=d:"undefined"!=typeof webkitAudioContext&&(m.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){f()},this.appendStreams=function(t){if(!t)throw"First parameter is required.";t instanceof Array||(t=[t]),e.concat(t),t.forEach((function(e){if(e.getVideoTracks().length){var t=h(e);t.stream=e,n.push(t)}if(e.getAudioTracks().length&&c.audioContext){var i=c.audioContext.createMediaStreamSource(e);i.connect(c.audioDestination),c.audioSources.push(i)}}))},this.releaseStreams=function(){n=[],o=!0,c.gainNode&&(c.gainNode.disconnect(),c.gainNode=null),c.audioSources.length&&(c.audioSources.forEach((function(e){e.disconnect()})),c.audioSources=[]),c.audioDestination&&(c.audioDestination.disconnect(),c.audioDestination=null),c.audioContext&&c.audioContext.close(),c.audioContext=null,s.clearRect(0,0,a.width,a.height),a.stream&&(a.stream.stop(),a.stream=null)},this.resetVideoStreams=function(e){!e||e instanceof Array||(e=[e]),g(e)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function(){o=!1;var t=function(){var e;g(),"captureStream"in a?e=a.captureStream():"mozCaptureStream"in a?e=a.mozCaptureStream():c.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var t=new u;return e.getTracks().filter((function(e){return"video"===e.kind})).forEach((function(e){t.addTrack(e)})),a.stream=t,t}(),i=function(){m.AudioContextConstructor||(m.AudioContextConstructor=new m.AudioContext);c.audioContext=m.AudioContextConstructor,c.audioSources=[],!0===c.useGainNode&&(c.gainNode=c.audioContext.createGain(),c.gainNode.connect(c.audioContext.destination),c.gainNode.gain.value=0);var t=0;if(e.forEach((function(e){if(e.getTracks().filter((function(e){return"audio"===e.kind})).length){t++;var i=c.audioContext.createMediaStreamSource(e);!0===c.useGainNode&&i.connect(c.gainNode),c.audioSources.push(i)}})),!t)return;return c.audioDestination=c.audioContext.createMediaStreamDestination(),c.audioSources.forEach((function(e){e.connect(c.audioDestination)})),c.audioDestination.stream}();return i&&i.getTracks().filter((function(e){return"audio"===e.kind})).forEach((function(e){t.addTrack(e)})),e.forEach((function(e){e.fullcanvas&&!0})),t}}function j(e,t){e=e||[];var i,n,o=this;(t=t||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}}).frameInterval||(t.frameInterval=10),t.video||(t.video={}),t.video.width||(t.video.width=360),t.video.height||(t.video.height=240),this.record=function(){var o;i=new U(e,t.elementClass||"multi-streams-mixer"),(o=[],e.forEach((function(e){T(e,"video").forEach((function(e){o.push(e)}))})),o).length&&(i.frameInterval=t.frameInterval||10,i.width=t.video.width||360,i.height=t.video.height||240,i.startDrawingFrames()),t.previewStream&&"function"==typeof t.previewStream&&t.previewStream(i.getMixedStream()),(n=new P(i.getMixedStream(),t)).record()},this.stop=function(e){n&&n.stop((function(t){o.blob=t,e(t),o.clearRecordedData()}))},this.pause=function(){n&&n.pause()},this.resume=function(){n&&n.resume()},this.clearRecordedData=function(){n&&(n.clearRecordedData(),n=null),i&&(i.releaseStreams(),i=null)},this.addStreams=function(o){if(!o)throw"First parameter is required.";o instanceof Array||(o=[o]),e.concat(o),n&&i&&(i.appendStreams(o),t.previewStream&&"function"==typeof t.previewStream&&t.previewStream(i.getMixedStream()))},this.resetVideoStreams=function(e){i&&(!e||e instanceof Array||(e=[e]),i.resetVideoStreams(e))},this.getMixer=function(){return i},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}function $(e,t){var i,n,o;function a(){return new ReadableStream({start:function(n){var o=document.createElement("canvas"),a=document.createElement("video"),r=!0;a.srcObject=e,a.muted=!0,a.height=t.height,a.width=t.width,a.volume=0,a.onplaying=function(){o.width=t.width,o.height=t.height;var e=o.getContext("2d"),s=1e3/t.frameRate,c=setInterval((function(){if(i&&(clearInterval(c),n.close()),r&&(r=!1,t.onVideoProcessStarted&&t.onVideoProcessStarted()),e.drawImage(a,0,0),"closed"!==n._controlledReadableStream.state)try{n.enqueue(e.getImageData(0,0,t.width,t.height))}catch(e){}}),s)},a.play()}})}"undefined"!=typeof ReadableStream&&"undefined"!=typeof WritableStream||console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),(t=t||{}).width=t.width||640,t.height=t.height||480,t.frameRate=t.frameRate||30,t.bitrate=t.bitrate||1200,t.realtime=t.realtime||!0,this.record=function(){r=[],o=!1,this.blob=null,function e(s,c){if(!t.workerPath&&!c)return i=!1,void fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then((function(t){t.arrayBuffer().then((function(t){e(s,t)}))}));if(!t.workerPath&&c instanceof ArrayBuffer){var d=new Blob([c],{type:"text/javascript"});t.workerPath=h.createObjectURL(d)}t.workerPath||console.error("workerPath parameter is missing."),(n=new Worker(t.workerPath)).postMessage(t.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),n.addEventListener("message",(function(e){"READY"===e.data?(n.postMessage({width:t.width,height:t.height,bitrate:t.bitrate||1200,timebaseDen:t.frameRate||30,realtime:t.realtime}),a().pipeTo(new WritableStream({write:function(e){i?console.error("Got image, but recorder is finished!"):n.postMessage(e.data.buffer,[e.data.buffer])}}))):e.data&&(o||r.push(e.data))}))}(e),"function"==typeof t.initCallback&&t.initCallback()},this.pause=function(){o=!0},this.resume=function(){o=!1};var r=[];this.stop=function(e){i=!0;var t=this;!function(e){n?(n.addEventListener("message",(function(t){null===t.data&&(n.terminate(),n=null,e&&e())})),n.postMessage(null)):e&&e()}((function(){t.blob=new Blob(r,{type:"video/webm"}),e(t.blob)}))},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){r=[],o=!1,this.blob=null},this.blob=null}void 0!==r&&(r.DiskStorage=I),void 0!==r&&(r.GifRecorder=A),void 0===r&&(e.exports=U,void 0===(o=function(){return U}.apply(t,[]))||(e.exports=o)),void 0!==r&&(r.MultiStreamRecorder=j),void 0!==r&&(r.RecordRTCPromisesHandler=function(e,t){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(void 0===e)throw'First argument "MediaStream" is required.';var i=this;i.recordRTC=new r(e,t),this.startRecording=function(){return new Promise((function(e,t){try{i.recordRTC.startRecording(),e()}catch(e){t(e)}}))},this.stopRecording=function(){return new Promise((function(e,t){try{i.recordRTC.stopRecording((function(n){i.blob=i.recordRTC.getBlob(),i.blob&&i.blob.size?e(n):t("Empty blob.",i.blob)}))}catch(e){t(e)}}))},this.pauseRecording=function(){return new Promise((function(e,t){try{i.recordRTC.pauseRecording(),e()}catch(e){t(e)}}))},this.resumeRecording=function(){return new Promise((function(e,t){try{i.recordRTC.resumeRecording(),e()}catch(e){t(e)}}))},this.getDataURL=function(e){return new Promise((function(e,t){try{i.recordRTC.getDataURL((function(t){e(t)}))}catch(e){t(e)}}))},this.getBlob=function(){return new Promise((function(e,t){try{e(i.recordRTC.getBlob())}catch(e){t(e)}}))},this.getInternalRecorder=function(){return new Promise((function(e,t){try{e(i.recordRTC.getInternalRecorder())}catch(e){t(e)}}))},this.reset=function(){return new Promise((function(e,t){try{e(i.recordRTC.reset())}catch(e){t(e)}}))},this.destroy=function(){return new Promise((function(e,t){try{e(i.recordRTC.destroy())}catch(e){t(e)}}))},this.getState=function(){return new Promise((function(e,t){try{e(i.recordRTC.getState())}catch(e){t(e)}}))},this.blob=null,this.version="5.6.2"}),void 0!==r&&(r.WebAssemblyRecorder=$)}).call(this,i("yLpj"),i("8oxB"))},"/MoV":function(e,t,i){"use strict";i.d(t,"i",(function(){return s})),i.d(t,"c",(function(){return c})),i.d(t,"g",(function(){return d})),i.d(t,"d",(function(){return l})),i.d(t,"a",(function(){return u})),i.d(t,"f",(function(){return m})),i.d(t,"h",(function(){return f})),i.d(t,"e",(function(){return p})),i.d(t,"b",(function(){return h}));var n=i("g6NE"),o=n.a.getters["config/configs"],a=n.a.getters["config/vars"],r=function(){return{timezone:o.authenticated?o.system.timezone:moment.tz.guess(),defaultDateFormat:a.defaultDateFormat,defaultDateTimeFormat:a.defaultDateTimeFormat,serverDateFormat:a.serverDateFormat,serverDateTimeFormat:a.serverDateTimeFormat,calendarLocale:{lastDay:a.defaultDateFormat,sameDay:a.defaultTimeFormat,lastWeek:a.defaultDateFormat,sameElse:a.defaultDateFormat}}},s=function(e,t){var i=r(),n=moment.utc().tz(t||i.timezone);return e&&e.hasOwnProperty("moment")&&e.moment?n:n.format(e||i.defaultDateTimeFormat)},c=function(e,t){var i=r(),n=moment(e,i.serverDateFormat);return e?(Array.isArray(e)&&(n=moment(e[0],e[1])),t&&t.hasOwnProperty("moment")&&t.moment?n:n.format(t||i.defaultDateFormat)):"INVALID DATE STRING"},d=function(e,t){var i=r(),n=moment(e,i.serverTimeFormat);return e?(Array.isArray(e)&&(n=moment(e[0],e[1])),t&&t.hasOwnProperty("moment")&&t.moment?n:n.format(t||i.defaultTimeFormat)):"INVALID TIME STRING"},l=function(e,t){var i=r(),n=moment(e,i.serverDateTimeFormat);return e?(Array.isArray(e)&&(n=moment(e[0],e[1])),t&&t.hasOwnProperty("moment")&&t.moment?n:n.format(t||i.defaultDateTimeFormat)):"INVALID DATE TIME STRING"},u=function(e,t){var i=r(),n=moment(e,i.serverDateTimeFormat);return e?(Array.isArray(e)&&(n=moment(e[0],e[1])),t&&t.hasOwnProperty("moment")&&t.moment?n:n.calendar(t||i.calendarLocale)):"INVALID DATE TIME STRING"},m=function(e,t,i){var n=r();if(!e)return"INVALID DATE STRING";var o=moment.utc(e,n.serverDateFormat);return"NOW"===e&&(o=moment.utc()),Array.isArray(e)&&(o=moment.utc(e[0],e[1])),t&&t.hasOwnProperty("moment")&&t.moment?o.tz(i||n.timezone):o.tz(i||n.timezone).format(t||n.defaultDateFormat)},f=function(e,t,i){var n=r(),o=moment.utc("".concat(moment().format(n.serverDateFormat)," ").concat(e),n.serverTimeFormat);return e?(Array.isArray(e)&&(o=moment.utc(e[0],e[1])),t&&t.hasOwnProperty("moment")&&t.moment?o.tz(i||n.timezone):o.tz(i||n.timezone).format(t||n.defaultTimeFormat)):"INVALID TIME STRING"},p=function(e,t,i){var n,o=r();return e?(n="NOW"===e?moment.utc():Array.isArray(e)?moment.utc(e[0],e[1]):moment.utc(e,o.serverDateTimeFormat),t&&t.hasOwnProperty("moment")&&t.moment?n.tz(i||o.timezone):n.tz(i||o.timezone).format(t||o.defaultDateTimeFormat)):"INVALID DATE TIME STRING"},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=r(),o=moment.utc(e,n.serverDateTimeFormat);if(!e)return"INVALID DATE TIME STRING";Array.isArray(e)&&(o=moment.utc(e[0],e[1]));var a=o.tz(i||n.timezone);return t&&t.hasOwnProperty("moment")&&t.moment?a:a=a.calendar(t||n.calendarLocale)}},0:function(e,t){},"0D4p":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("Vjiq"),o=i("vDqi"),a=i.n(o),r=i("eC5B"),s=i.n(r),c=i("g6NE"),d=function(){var e=c.a.getters["config/configs"],t=e.hasOwnProperty("pusher")?e.pusher:null;!window.Echo&&t&&t.pusherAppKey&&(t.debugMode?s.a.logToConsole=!0:s.a.logToConsole=!1,window.Echo=new n.a({broadcaster:"pusher",cluster:t.pusherAppCluster,encrypted:!0,key:t.pusherAppKey,authorizer:function(e,t){return{authorize:function(t,i){a.a.post("/api/broadcasting/auth",{socket_id:t,channel_name:e.name}).then((function(e){e&&e.data?i(!1,e.data):console.error("Invalid Data!")})).catch((function(e){i(!0,e)}))}}}}),window.EchoOpts={subscriptions:{}})}},"0xtn":function(e,t,i){"use strict";var n=i("L2JU"),o=i("SokU"),a=i.n(o);function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){c(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t.a={components:{Avatar:a.a},computed:s(s({},Object(n.c)("config",["configs","uiConfigs","vars","allowExtraInput"])),Object(n.c)("user",{getUserDetails:"get",hasRole:"hasRole",hasPermission:"hasPermission",loggedInUser:"loggedInUser",userUuid:"uuid",profile:"profile",username:"username",locked:"locked"})),methods:s(s({},Object(n.b)("user",["Logout","Lock"])),{},{lock:function(){this.$gaEvent("engagement","lockScreen","Navbar"),this.Lock()},logout:function(){var e=this;this.$gaEvent("engagement","logout","Navbar"),this.Logout().then((function(t){e.$gaEvent("activity","loggedout"),e.$router.push({name:"login",query:{logout:"true"}})}))}})}},"1TzJ":function(e,t,i){"use strict";var n=i("p46w"),o=i.n(n),a=i("7Cbv");!function(){var e=1,t=2;function i(i){var n="";switch(i){case e:n=window.name;break;case t:null!=(n=decodeURIComponent(o.a.get("my-application-browser-tab")))&&"undefined"!=n||(n="")}return n}function n(i,n){switch(i){case e:window.name=n;break;case t:o.a.set("my-application-browser-tab",n||"")}}function r(){var o=i(e)||Object(a.a)();n(e,o);var r=i(t),s=(""==r?null:JSON.parse(r))||null;if(null===s||s.timestamp<(new Date).getTime()-5e3||s.guid===o){var c=function(){var e={guid:o,timestamp:(new Date).getTime()};n(t,JSON.stringify(e))};return c(),setInterval(c,500),!1}return!0}window.isDuplicate=function(){return r()},window.addEventListener("beforeunload",(function(){0==r()&&n(t,"")}))}()},"3ugI":function(e,t,i){var n=i("susR");"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(n,o);n.locals&&(e.exports=n.locals)},"8uEn":function(e,t,i){"use strict";function n(e,t){t||(t={});var i=t.max||100,n=t.boxCount||50,o=t.boxCountRed||5,a=t.boxCountYellow||5,r=t.boxGapFraction||0,s=t.jitter||.02,c=t.width||"auto",d=e.width,l=e.height,u=0,m=e.parentElement,f=e.nextElementSibling||e.previousElementSibling;"auto"!==c&&"parent"!==c||!m.clientWidth?"sibling"===c&&f.clientWidth&&(d=f.clientWidth,e.width=d):(d=m.clientWidth,e.width=d);var p=d/(n+(n+1)*r),h=p*r,g=l-2*h,v=(l-g)/2,b=e.getContext("2d");function C(e,t){return e>n-o?y(e,t)?"rgba(255,47,30,0.9)":"rgba(64,12,8,0.9)":e>n-o-a?y(e,t)?"rgba(255,215,5,0.9)":"rgba(64,53,0,0.9)":y(e,t)?"rgba(53,255,30,0.9)":"rgba(13,64,8,0.9)"}function y(e,t){return e<=Math.ceil(t/i*n)}!function t(){var o=parseInt(e.dataset.val,10);if(u<=o?u+=(o-u)/5:u-=(u-o)/5,s>0&&u>0){var a=Math.random()*s*i;Math.random()>.5&&(a=-a),u+=a}u<0&&(u=0),b.save(),b.beginPath(),b.rect(0,0,d,l),b.fillStyle="rgb(32,32,32)",b.fill(),b.restore(),function(e,t){e.save(),e.translate(v,h);for(var i=0;i<n;i++){var o=(a=i,Math.abs(a)+1);e.beginPath(),e.rect(0,0,p,g),e.fillStyle=C(o,t),e.fill(),e.translate(p+h,0)}var a;e.restore()}(b,u),requestAnimationFrame(t)}()}i.d(t,"a",(function(){return n}))},ICll:function(e,t,i){"use strict";i.d(t,"d",(function(){return o})),i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return s}));var n=i("5TL6");function o(e,t){return Object(n.b)({url:e.url,method:"post",data:e.data,upload:!0,config:{headers:{"Content-Type":"multipart/form-data"}},headers:{"Content-Type":"multipart/form-data; charset=utf-8; boundary="+Math.random().toString().substr(2)},onUploadProgress:t})}function a(e){return Object(n.b)({url:e.url,method:"delete",data:e.data})}function r(e,t,i){var o={url:e.url,method:"post",data:e.data,upload:!0,config:{headers:{"Content-Type":"multipart/form-data"}},headers:{"Content-Type":"multipart/form-data; charset=utf-8; boundary="+Math.random().toString().substr(2)},onUploadProgress:t,cancelToken:i};return e.silent?Object(n.c)(o):Object(n.b)(o)}function s(e){return Object(n.b)({url:e.url,method:"delete",data:e.data})}},OjY7:function(e,t,i){"use strict";var n=i("vDqi"),o=i.n(n),a=i("ICll"),r=i("L2JU"),s=i("7Cbv"),c=i("BcCH"),d=i("nFxi");function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){m(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var f={name:"file-uploader",components:{},props:{data:{type:Array,default:function(){return[]}},additionalFormData:{type:Object,default:function(){return{}}},requestIdentifier:{type:String,default:Object(s.a)()},url:{type:String,default:"/uploads"},heading:{type:String,default:null},actionLabel:{type:String,default:"global.choose"},nameLabel:{type:String,default:"upload.file"},namesLabel:{type:String,default:"upload.files"},buttonWrapperClasses:{type:String,default:"justify-content-start"},headingClasses:{type:String,default:"mb-0"},buttonClasses:{type:String,default:""},buttonIcon:{type:String,default:"fas fa-upload"},buttonDesign:{type:String,default:"primary"},options:{type:Object,required:!0},autoUpload:{type:Boolean,default:!0},multiple:{type:Boolean,default:!0},hideButtonLabel:{type:Boolean,default:!1},hideFileList:{type:Boolean,default:!1},hideResetButton:{type:Boolean,default:!1},hideAfterUpload:{type:Boolean,default:!0},showSelectedFilesCount:{type:Boolean,default:!1}},data:function(){return{isLoading:!1,fileRemoved:!1,actionLabelUpdated:"",files:[],uploadedFiles:[],existingFiles:[],icons:d.b,mimeTypes:d.c}},computed:u(u({},Object(r.c)("config",["configs","vars"])),{},{computedActionLabel:function(){return this.existingFile?"global.change":this.actionLabel}}),watch:{data:function(e){this.existingFiles=e.map((function(e){return u(u({},e),{},{status:null})}))},"options.uuid":{deep:!0,handler:function(e,t){e&&e!==t&&this.reset()}}},methods:{getFileIcon:function(e){return this.icons[e]||"fa-file-alt"},getFileNameIcon:function(e){return this.icons[e]||"fa-file-alt"},generateFilesList:function(e){this.isLoading=!0;var t=null,i=this.$refs.filesInput.files;if(this.options.allowedExtensions&&(_.isArray(this.options.allowedExtensions)||(this.options.allowedExtensions=this.options.allowedExtensions.split(",")),t=new RegExp("(."+this.options.allowedExtensions.join("|.")+")$")),this.options.maxNoOfFiles&&i.length+this.existingFiles.length>this.options.maxNoOfFiles)this.$toasted.error(this.$t("upload.max_file_limit_crossed",{number:this.options.maxNoOfFiles}),this.$toastConfig.error);else{for(var n=0;n<i.length;n++)t&&!t.test(i[n].name)?(this.isLoading=!1,this.$toasted.error(this.$t("global.file_not_supported",{attribute:i[n].name.split(".").pop()}),this.$toastConfig.error)):i[n].size>this.configs.system.postMaxSize?(this.isLoading=!1,this.$toasted.error(this.$t("global.file_too_large",{attribute:i[n].name}),this.$toastConfig.error)):this.files.push({uuid:Object(s.a)(),file:i[n],status:"waiting",progress:0});this.isLoading=!1,this.$emit("selected",this.files.length),this.autoUpload&&this.startUploading()}},startUploading:function(){var e=this;if(this.files.filter((function(e){return"waiting"===e.status})).length){var t=[],i=o.a.CancelToken;this.$emit("uploading",this.files.length);for(var n=function(n){var o=e.files[n];if(t[n]=function(e){o.progress=Math.round(100*e.loaded/e.total)},"waiting"===o.status){var r=new FormData;r.append("file",o.file),r.append("mime",o.file.type),r.append("token",e.options.token),r.append("module",e.options.module),r.append("request_uuid",e.requestIdentifier),r.append("first_attachment",0===n),r.append("last_attachment",n===e.files.length-1),e.additionalFormData.objForEach((function(e,t){e&&(_.isObject(e)?r.append(t.snakeCase(),JSON.stringify(e)):r.append(t.snakeCase(),e))})),o.status="uploading";var s=new i((function(e){o.cancel=e}));a.c({url:e.url,data:r},t[n],s).then((function(t){t.upload?e.uploadedFiles.push(t.upload):t.attachments&&e.uploadedFiles.push(t.attachments),o.uuid=t.upload?t.upload.uuid:t.uuid,o.status="justUploaded",delete o.cancel,setTimeout((function(){o.status="uploaded",e.hideAfterUpload&&e.files.splice(e.files.findIndex((function(e){return e.uuid===o.uuid})),1)}),2e3),e.$emit("updated",t),e.checkUploadStatus(t)})).catch((function(t){if(e.$emit("error",u(u({},t),{},{requestUuid:e.requestIdentifier})),t.response&&t.response.data){var i=t.response.data||{},n=i.errors?formUtil.assignErrors(i.errors):{};o.error=n.message,e.$toasted.error(n.message,e.$toastConfig.error),o.status="error",setTimeout((function(){e.files.splice(e.files.findIndex((function(e){return e.uuid===o.uuid})),1)}),3e3),e.$emit("updated",u(u({},t),{},{requestUuid:e.requestIdentifier})),e.checkUploadStatus()}else o.status="cancelled",setTimeout((function(){e.files.splice(e.files.findIndex((function(e){return e.uuid===o.uuid})),1)}),3e3)}))}},r=0;r<this.files.length;r++)n(r)}},removeFile:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];formUtil.confirmAction().then((function(t){t.value&&(i.isLoading=!0,a.a({url:i.url+"/"+e.uuid,data:{token:i.options.token,module:i.options.module}}).then((function(t){e.status="removed",setTimeout((function(){n?i.existingFiles.splice(i.existingFiles.findIndex((function(t){return t.uuid===e.uuid})),1):i.files.splice(i.files.findIndex((function(t){return t.uuid===e.uuid})),1)}),3e3),i.isLoading=!1,i.$toasted.success(t.message,i.$toastConfig.success),i.$emit("selected",i.files.length),i.$emit("updated",t),i.checkUploadStatus()})).catch((function(t){var n=t.response.data||{},o=n.errors?formUtil.assignErrors(n.errors):{};i.$toasted.error(o.message,i.$toastConfig.error),e.error=o.message,e.status="removeError"})))}))},checkUploadStatus:function(e){for(var t=!0,i=0;i<this.files.length;i++)"justUploaded"!==this.files[i].status&&"uploaded"!==this.files[i].status&&(t=!1);t?this.$emit("uploaded",this.uploadedFiles):this.$emit("error",{requestUuid:this.requestIdentifier})},reset:function(){this.isLoading=!1,this.fileRemoved=!1,this.actionLabelUpdated="",this.files=[],this.uploadedFiles=[];var e=this.$refs.filesInput;e.type="text",e.type="file",this.$emit("selected",this.files.length)},startUpload:function(){this.files.length?this.startUploading():this.$emit("noNeed")}},mounted:function(){c.a.$off("START_UPLOAD",this.startUpload),c.a.$on("START_UPLOAD",this.startUpload),c.a.$off("RESET_UPLOAD",this.reset),c.a.$on("RESET_UPLOAD",this.reset),this.existingFiles=this.data.map((function(e){return u(u({},e),{},{status:null})}))},filters:{decimal:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number(e).toFixed(t)}},destroyed:function(){c.a.$off("START_UPLOAD",this.startUpload),c.a.$off("RESET_UPLOAD",this.reset)}},p=i("KHd+"),h=Object(p.a)(f,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sm-uploader file-uploader"},[i("div",{staticClass:"file-uploader-form"},[i("div",{class:["file-selector d-flex",e.buttonWrapperClasses]},[e.heading?i("h5",{class:["title-desc",e.headingClasses]},[e._v("\n                "+e._s(e.heading)+"\n            ")]):e._e(),e._v(" "),i("label",{class:["btn","btn-"+e.buttonDesign,e.buttonClasses]},[i("input",{ref:"filesInput",staticClass:"selector-input",attrs:{name:"filesInput",type:"file",id:"filesInput",multiple:e.multiple},on:{change:e.generateFilesList}}),e._v(" "),i("span",{staticClass:"button-icon"},[i("i",{class:e.buttonIcon})]),e._v(" "),e.hideButtonLabel?e._e():i("span",{staticClass:"button-label"},[e._v(e._s(e.$t(e.computedActionLabel,{attribute:e.$t(e.namesLabel)})))]),e._v(" "),e.showSelectedFilesCount&&e.files.length?i("span",{staticClass:"button-label bracketed"},[e._v(e._s(e.files.length))]):e._e()]),e._v(" "),e.hideFileList&&!e.hideResetButton&&e.files.length?i("button",{class:["btn","btn-"+e.buttonDesign,e.buttonClasses],attrs:{type:"button"},on:{click:e.reset}},[e._m(0)]):e._e()])]),e._v(" "),e.existingFiles.length||e.uploadedFiles.length||e.files.length?i("div",{class:["files-list-wrapper",{"d-none":e.hideFileList}]},[i("ul",{staticClass:"files-list"},[e._l(e.existingFiles,(function(t,n){return i("li",{key:t.uuid,staticClass:"file-details-row"},[i("div",{staticClass:"file-icon"},[i("span",[i("i",{class:["far",e.getFileIcon(t.mime)]})])]),e._v(" "),i("div",{staticClass:"file-details"},[i("h6",[e._v(e._s(t.filename))]),e._v(" "),t.error?i("p",{staticClass:"text-danger"},[e._v("\n                        "+e._s(t.error)+"\n                    ")]):i("p",[i("span",[i("span",{staticClass:"font-weight-700"},[e._v(e._s(e.$t("upload.type")))]),e._v(": "+e._s(e.mimeTypes[t.mime]||t.mime||"Unknown"))]),e._v(" "),i("span",{staticClass:"ml-1"},[i("span",{staticClass:"font-weight-700"},[e._v(e._s(e.$t("upload.size")))]),e._v(": "+e._s(e._f("decimal")(t.size/1024,0))+" KB")])])]),e._v(" "),i("div",{class:["status-wrapper",{"actions-wrapper":!t.status||"removeError"===t.status}]},[i("transition",{staticClass:"transition-wrapper",attrs:{appear:"",tag:"div",name:"actions",mode:"out-in"}},["removed"===t.status?i("div",{staticClass:"status-removed-wrapper"},[i("label",{staticClass:"status-text text-danger"},[e._v("Removed!")]),e._v(" "),i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-trash"})])]):t.status&&"removeError"!==t.status?e._e():i("div",{staticClass:"actions-buttons"},["removeError"===t.status?i("label",{staticClass:"status-text text-danger"},[e._v("Error!")]):e._e(),e._v(" "),"removeError"===t.status?i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-exclamation-triangle"})]):e._e(),e._v(" "),i("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"download-btn",attrs:{href:t.fullUrl,target:"_blank",title:e.$t("global.download",{attribute:e.$t(e.nameLabel)})}},[i("i",{staticClass:"fas fa-download"})]),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"remove-btn",attrs:{type:"button",title:e.$t("global.remove",{attribute:e.$t(e.nameLabel)})},on:{click:function(i){return e.removeFile(t,n,!0)}}},[i("i",{staticClass:"fas fa-trash"})])])])],1)])})),e._v(" "),e._l(e.uploadedFiles,(function(t,n){return i("li",{key:t.uuid,staticClass:"file-details-row"},[i("div",{staticClass:"file-icon"},[i("span",[i("i",{class:["far",e.getFileIcon(t.mime)]})])]),e._v(" "),i("div",{staticClass:"file-details"},[i("h6",[e._v(e._s(t.filename))]),e._v(" "),t.error?i("p",{staticClass:"text-danger"},[e._v("\n                        "+e._s(t.error)+"\n                    ")]):i("p",[i("span",[i("span",{staticClass:"font-weight-700"},[e._v(e._s(e.$t("upload.type")))]),e._v(": "+e._s(e.mimeTypes[t.mime]||t.mime||"Unknown"))]),e._v(" "),i("span",{staticClass:"ml-1"},[i("span",{staticClass:"font-weight-700"},[e._v(e._s(e.$t("upload.size")))]),e._v(": "+e._s(e._f("decimal")(t.size/1024,0))+" KB")])])]),e._v(" "),i("div",{class:["status-wrapper",{"actions-wrapper":!t.status||"removeError"===t.status}]},[i("transition",{staticClass:"transition-wrapper",attrs:{appear:"",tag:"div",name:"actions",mode:"out-in"}},["removed"===t.status?i("div",{staticClass:"status-removed-wrapper"},[i("label",{staticClass:"status-text text-danger"},[e._v("Removed!")]),e._v(" "),i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-trash"})])]):t.status&&"removeError"!==t.status?e._e():i("div",{staticClass:"actions-buttons"},["removeError"===t.status?i("label",{staticClass:"status-text text-danger"},[e._v("Error!")]):e._e(),e._v(" "),"removeError"===t.status?i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-exclamation-triangle"})]):e._e(),e._v(" "),i("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"download-btn",attrs:{href:t.fullUrl,target:"_blank",title:e.$t("global.download",{attribute:e.$t(e.nameLabel)})}},[i("i",{staticClass:"fas fa-download"})]),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"remove-btn",attrs:{type:"button",title:e.$t("global.remove",{attribute:e.$t(e.nameLabel)})},on:{click:function(i){return e.removeFile(t,n,!0)}}},[i("i",{staticClass:"fas fa-trash"})])])])],1)])})),e._v(" "),e._l(e.files,(function(t,n){return i("li",{key:n,staticClass:"file-details-row"},[i("div",{staticClass:"file-icon"},[i("span",[i("i",{class:["far",e.getFileIcon(t.file.type)]})])]),e._v(" "),i("div",{staticClass:"file-details"},[i("h6",[e._v(e._s(t.file.name))]),e._v(" "),t.error?i("p",{staticClass:"text-danger"},[e._v("\n                        "+e._s(t.error)+"\n                    ")]):i("p",[i("span",[i("span",{staticClass:"font-weight-700"},[e._v(e._s(e.$t("upload.type")))]),e._v(": "+e._s(e.mimeTypes[t.file.type]||"Unknown"))]),e._v(" "),i("span",{staticClass:"ml-1"},[i("span",{staticClass:"font-weight-700"},[e._v(e._s(e.$t("upload.size")))]),e._v(": "+e._s(e._f("decimal")(t.file.size/1024,0))+" KB")])])]),e._v(" "),i("div",{class:["status-wrapper",{"actions-wrapper":"uploaded"===t.status||"removeError"===t.status}]},[i("transition",{staticClass:"transition-wrapper",attrs:{appear:"",tag:"div",name:"actions",mode:"out-in"}},["uploading"===t.status?i("div",{staticClass:"status-uploading-wrapper"},[i("label",{staticClass:"status-action",on:{click:t.cancel}},[e._v(e._s(e.$t("general.cancel")))]),e._v(" "),i("progress-ring",{attrs:{value:t.progress,"stroke-color":e.vars.loaderColor}})],1):"justUploaded"===t.status?i("div",{staticClass:"status-uploaded-wrapper"},[i("label",{staticClass:"status-text text-success"},[e._v("Uploaded!")]),e._v(" "),i("span",{staticClass:"status-icon text-success"},[i("i",{staticClass:"fas fa-check"})])]):"cancelled"===t.status?i("div",{staticClass:"status-cancelled-wrapper"},[i("label",{staticClass:"status-text text-danger"},[e._v("Cancelled!")]),e._v(" "),i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-times"})])]):"removed"===t.status?i("div",{staticClass:"status-removed-wrapper"},[i("label",{staticClass:"status-text text-danger"},[e._v("Removed!")]),e._v(" "),i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-trash"})])]):"error"===t.status?i("div",{staticClass:"status-error-wrapper"},[i("label",{staticClass:"status-text text-danger"},[e._v("Error!")]),e._v(" "),i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-exclamation-triangle"})])]):"uploaded"===t.status||"removeError"===t.status?i("div",{staticClass:"actions-buttons"},["removeError"===t.status?i("label",{staticClass:"status-text text-danger"},[e._v("Error!")]):e._e(),e._v(" "),"removeError"===t.status?i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-exclamation-triangle"})]):"uploaded"===t.status?i("label",{staticClass:"status-text text-success"},[e._v("Uploaded!")]):e._e(),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"remove-btn",attrs:{type:"button",title:e.$t("global.remove",{attribute:e.$t(e.nameLabel)})},on:{click:function(i){return e.removeFile(t,n)}}},[i("i",{staticClass:"fas fa-trash"})])]):e._e()])],1)])}))],2)]):e._e()])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"button-icon"},[t("i",{staticClass:"fas fa-times"})])}],!1,null,null,null);t.a=h.exports},adPT:function(e,t,i){"use strict";var n={name:"animated-number",props:{number:{type:Number,default:0},delay:{type:Number,default:20}},data:function(){return{displayNumber:0,interval:!1,initialInterval:!1}},methods:{changeNumberFn:function(){if(this.displayNumber!=this.number){var e=(this.number-this.displayNumber)/10;e=e>=0?Math.ceil(e):Math.floor(e),this.displayNumber=this.displayNumber+e}}},watch:{number:function(){clearInterval(this.interval),this.number!=this.displayNumber&&(this.interval=window.setInterval(this.changeNumberFn,this.delay))}},mounted:function(){this.displayNumber=0,clearInterval(this.initialInterval),this.number!=this.displayNumber&&(this.initialInterval=window.setInterval(this.changeNumberFn,this.delay))}},o=i("KHd+"),a=Object(o.a)(n,(function(){var e=this.$createElement;return(this._self._c||e)("span",[this._v(this._s(this.displayNumber))])}),[],!1,null,null,null);t.a=a.exports},akQX:function(e,t,i){"use strict";i.d(t,"e",(function(){return o})),i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return s})),i.d(t,"c",(function(){return c})),i.d(t,"d",(function(){return d}));var n=i("V0LQ");navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||alert($t("misc.get_user_media_not_supported")),navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&(navigator.enumerateDevices=function(e){navigator.mediaDevices.enumerateDevices().then(e)});location.protocol;"undefined"!=typeof MediaStreamTrack&&"getSources"in MediaStreamTrack||navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices;var o=function(e){var t={icon:"error",html:"",footer:$t("misc.solve_and_refresh")};if(e)return"NotAllowedError"===e.name||"PermissionDeniedError"===e.name?(t.title=$t("misc.media.permission_denied"),t.html=$t("misc.media.permission_denied_text")):"NotFoundError"===e.name?(t.title=$t("misc.media.not_found"),t.html=$t("misc.media.not_found_text")):"NotReadableError"===e.name||"OverconstrainedError"===e.name?(t.title=$t("misc.media.unreadable"),t.html=$t("misc.media.unreadable_text")):"SecurityError"!==e.name&&"TypeError"!==e.name||(t.title=$t("misc.media.security"),t.html=$t("misc.media.security_text")),t.html+='<div><pre><code style="white-space: break-spaces;">'+e+"</code><pre></div>",{msg:t,alert:swtAlert.fire(t)}},a=function(e){if((e=Object.assign({},{type:null,loop:!1,duration:1e3},e)).type){var t=new Audio;return t.preload="auto",t.autoplay=!0,t.loop=e.loop,t.src="/sound/".concat(e.type,".mp3"),t.play().then((function(){setTimeout((function(){t&&t.pause()}),e.duration)})).catch((function(e){console.error(e)})),t}},r=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!document.hasFocus()||e)return a({type:"calling",loop:!0,duration:3e4})},s=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!document.hasFocus()||e)return a({type:"message",duration:3e3})},c=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!document.hasFocus()||e)return a({type:"screenshot",duration:3e3})},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=document.querySelector("link[rel=canonical]")?document.querySelector("link[rel=canonical]").href:document.location.href,a=e.url?e.url:o;if(i&&navigator.share)navigator.share({title:e.title?e.title:document.title,url:a}).then((function(){})).catch(console.error);else{var r={showCancelButton:!0,confirmButtonText:$t("misc.share_alert.confirm_btn"),cancelButtonText:$t("misc.share_alert.cancel_btn")};e.alertTitle&&(r.title=e.alertTitle),e.alertHtml?r.html=e.alertHtml:r.text=$t("misc.share_alert.text"),swtAlert.fire(r).then((function(e){e.value&&(Object(n.c)(a),setTimeout((function(){t()}),500))}))}}},bdEB:function(e,t,i){"use strict";var n=i("L2JU");function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s={props:{tag:{type:String,default:"a"},place:{type:String,default:"normal"},size:{type:String,default:"normal"},appLogo:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},link:{type:String,default:""},assets:{type:Object}},data:function(){return{appLogoText:window.kmenv.name}},computed:a(a({},Object(n.c)("config",["configs","uiConfigs"])),{},{computedUrl:function(){return"a"===this.tag&&(""!==this.link?this.link:"/")},orgLogo:function(){if(this.appLogo||!this.configs.assets&&!this.assets)return"navbar"===this.place||"sidebar"===this.place||"dark"===this.place?"/images/logo-light.png":"/images/logo.png";var e=this.assets&&this.assets.logo?this.assets.logo:this.configs.assets.logo?this.configs.assets.logo:"/images/logo.png";return(this.assets&&this.assets.logoLight||this.configs.assets.logoLight)&&("navbar"===this.place&&this.uiConfigs.topNavbarLogoLight||"sidebar"===this.place&&this.uiConfigs.leftSidebarLogoLight||"dark"===this.place)&&(e=this.assets&&this.assets.logoLight?this.assets.logoLight:this.configs.assets.logoLight),e},appTitle:function(){return this.configs.basic?this.configs.basic.appName:window.kmenv.name}})},c=i("KHd+"),d=Object(c.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.tag,{tag:"component",class:["logo",e.place+"-logo",e.size+"-logo",e.orgLogo?"org-logo":"app-logo",e.inline?"inline-logo":""],attrs:{href:e.computedUrl}},[e.orgLogo?i("img",{staticClass:"logo-icon",attrs:{src:e.orgLogo,alt:e.appTitle}}):[i("span",{staticClass:"logo-text",attrs:{title:e.appTitle}},[e._v(e._s(e.appLogoText))])]],2)}),[],!1,null,null,null);t.a=d.exports},"eC/g":function(e,t,i){"use strict";i("3ugI")},mpN2:function(e,t,i){var n,o,a,r;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r=function(){return function e(t,i,n){function o(r,s){if(!i[r]){if(!t[r]){if(a)return a(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[r]={exports:{}};t[r][0].call(d.exports,(function(e){return o(t[r][1][e]||e)}),d,d.exports,e,t,i,n)}return i[r].exports}for(var a=!1,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(e,t,i){"use strict";var n=(0,e("./adapter_factory.js").adapterFactory)({window:"undefined"==typeof window?void 0:window});t.exports=n},{"./adapter_factory.js":2}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.adapterFactory=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.window,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},d=n.log,l=n.detectBrowser(t),u={browserDetails:l,commonShim:c,extractVersion:n.extractVersion,disableLog:n.disableLog,disableWarnings:n.disableWarnings};switch(l.browser){case"chrome":if(!o||!o.shimPeerConnection||!i.shimChrome)return d("Chrome shim is not included in this adapter release."),u;if(null===l.version)return d("Chrome shim can not determine version, not shimming."),u;d("adapter.js shimming chrome."),u.browserShim=o,o.shimGetUserMedia(t),o.shimMediaStream(t),o.shimPeerConnection(t),o.shimOnTrack(t),o.shimAddTrackRemoveTrack(t),o.shimGetSendersWithDtmf(t),o.shimGetStats(t),o.shimSenderReceiverGetStats(t),o.fixNegotiationNeeded(t),c.shimRTCIceCandidate(t),c.shimConnectionState(t),c.shimMaxMessageSize(t),c.shimSendThrowTypeError(t),c.removeAllowExtmapMixed(t);break;case"firefox":if(!r||!r.shimPeerConnection||!i.shimFirefox)return d("Firefox shim is not included in this adapter release."),u;d("adapter.js shimming firefox."),u.browserShim=r,r.shimGetUserMedia(t),r.shimPeerConnection(t),r.shimOnTrack(t),r.shimRemoveStream(t),r.shimSenderGetStats(t),r.shimReceiverGetStats(t),r.shimRTCDataChannel(t),r.shimAddTransceiver(t),r.shimGetParameters(t),r.shimCreateOffer(t),r.shimCreateAnswer(t),c.shimRTCIceCandidate(t),c.shimConnectionState(t),c.shimMaxMessageSize(t),c.shimSendThrowTypeError(t);break;case"edge":if(!a||!a.shimPeerConnection||!i.shimEdge)return d("MS edge shim is not included in this adapter release."),u;d("adapter.js shimming edge."),u.browserShim=a,a.shimGetUserMedia(t),a.shimGetDisplayMedia(t),a.shimPeerConnection(t),a.shimReplaceTrack(t),c.shimMaxMessageSize(t),c.shimSendThrowTypeError(t);break;case"safari":if(!s||!i.shimSafari)return d("Safari shim is not included in this adapter release."),u;d("adapter.js shimming safari."),u.browserShim=s,s.shimRTCIceServerUrls(t),s.shimCreateOfferLegacy(t),s.shimCallbacksAPI(t),s.shimLocalStreamsAPI(t),s.shimRemoteStreamsAPI(t),s.shimTrackEventTransceiver(t),s.shimGetUserMedia(t),s.shimAudioContext(t),c.shimRTCIceCandidate(t),c.shimMaxMessageSize(t),c.shimSendThrowTypeError(t),c.removeAllowExtmapMixed(t);break;default:d("Unsupported browser!")}return u};var n=d(e("./utils")),o=d(e("./chrome/chrome_shim")),a=d(e("./edge/edge_shim")),r=d(e("./firefox/firefox_shim")),s=d(e("./safari/safari_shim")),c=d(e("./common_shim"));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=i.shimGetUserMedia=void 0;var n="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":s(e)},o=e("./getusermedia");Object.defineProperty(i,"shimGetUserMedia",{enumerable:!0,get:function(){return o.shimGetUserMedia}});var a=e("./getdisplaymedia");Object.defineProperty(i,"shimGetDisplayMedia",{enumerable:!0,get:function(){return a.shimGetDisplayMedia}}),i.shimMediaStream=function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},i.shimOnTrack=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var i=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(n){var o=void 0;o=e.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find((function(e){return e.track&&e.track.id===n.track.id})):{track:n.track};var a=new Event("track");a.track=n.track,a.receiver=o,a.transceiver={receiver:o},a.streams=[t.stream],i.dispatchEvent(a)})),t.stream.getTracks().forEach((function(n){var o=void 0;o=e.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find((function(e){return e.track&&e.track.id===n.id})):{track:n};var a=new Event("track");a.track=n,a.receiver=o,a.transceiver={receiver:o},a.streams=[t.stream],i.dispatchEvent(a)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else r.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))},i.shimGetSendersWithDtmf=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var o=i.apply(this,arguments);return o||(o=t(this,e),this._senders.push(o)),o};var o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){o.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var a=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var i=this;this._senders=this._senders||[],a.apply(this,[e]),e.getTracks().forEach((function(e){i._senders.push(t(i,e))}))};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((function(e){var i=t._senders.find((function(t){return t.track===e}));i&&t._senders.splice(t._senders.indexOf(i),1)}))}}else if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var s=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=s.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},i.shimGetStats=function(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,i=Array.prototype.slice.call(arguments),n=i[0],o=i[1],a=i[2];if(arguments.length>0&&"function"==typeof n)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof n))return t.apply(this,[]);var r=function(e){var t={};return e.result().forEach((function(e){var i={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){i[t]=e.stat(t)})),t[i.id]=i})),t},s=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){o(s(r(e)))};return t.apply(this,[c,n])}return new Promise((function(i,n){t.apply(e,[function(e){i(s(r(e)))},n])})).then(o,a)}}},i.shimSenderReceiverGetStats=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,i=t.apply(this,[]);return i.forEach((function(t){return t._pc=e})),i});var i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return r.filterStats(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var o=e.RTCPeerConnection.prototype.getReceivers;o&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=o.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),r.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return r.filterStats(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var a=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],i=void 0,n=void 0,o=void 0;return this.getSenders().forEach((function(e){e.track===t&&(i?o=!0:i=e)})),this.getReceivers().forEach((function(e){return e.track===t&&(n?o=!0:n=e),e.track===t})),o||i&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return a.apply(this,arguments)}}}},i.shimAddTrackRemoveTrackWithNative=d,i.shimAddTrackRemoveTrack=function(e){if(e.RTCPeerConnection){var t=r.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return d(e);var i=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=i.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var i=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(i.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var o=new e.MediaStream(t.getTracks());this._streams[t.id]=o,this._reverseStreams[o.id]=t,t=o}n.apply(this,[t])};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,i){var n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var o=[].slice.call(arguments,1);if(1!==o.length||!o[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var a=this.getSenders().find((function(e){return e.track===t}));if(a)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var r=this._streams[i.id];if(r)r.addTrack(t),Promise.resolve().then((function(){n.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);this._streams[i.id]=s,this._reverseStreams[s.id]=i,this.addStream(s)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var i=e.RTCPeerConnection.prototype[t],n=c({},t,(function(){var e=this,t=arguments,n=arguments.length&&"function"==typeof arguments[0];return n?i.apply(this,[function(i){var n=l(e,i);t[0].apply(null,[n])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):i.apply(this,arguments).then((function(t){return l(e,t)}))}));e.RTCPeerConnection.prototype[t]=n[t]}));var a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=u(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};var s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=s.get.apply(this);return""===e.type?e:l(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var i=void 0;Object.keys(this._streams).forEach((function(n){t._streams[n].getTracks().find((function(t){return e.track===t}))&&(i=t._streams[n])})),i&&(1===i.getTracks().length?this.removeStream(this._reverseStreams[i.id]):i.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function l(e,t){var i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var n=e._reverseStreams[t],o=e._streams[n.id];i=i.replace(new RegExp(o.id,"g"),n.id)})),new RTCSessionDescription({type:t.type,sdp:i})}function u(e,t){var i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var n=e._reverseStreams[t],o=e._streams[n.id];i=i.replace(new RegExp(n.id,"g"),o.id)})),new RTCSessionDescription({type:t.type,sdp:i})}},i.shimPeerConnection=function(e){var t=r.detectBrowser(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection){var i=0===e.RTCPeerConnection.prototype.addIceCandidate.length;t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var i=e.RTCPeerConnection.prototype[t],n=c({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=n[t]}));var n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return i||arguments[0]?t.version<78&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}},i.fixNegotiationNeeded=function(e){var t=r.detectBrowser(e);r.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){var i=e.target;if(!(t.version<72||i.getConfiguration&&"plan-b"===i.getConfiguration().sdpSemantics)||"stable"===i.signalingState)return e}))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../utils.js"));function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function d(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){if(!i)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[i.id]?-1===this._shimmedLocalStreams[i.id].indexOf(n)&&this._shimmedLocalStreams[i.id].push(n):this._shimmedLocalStreams[i.id]=[i,n],n};var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var n=this.getSenders();i.apply(this,arguments);var o=this.getSenders().filter((function(e){return-1===n.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(o)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};var o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(i){var n=t._shimmedLocalStreams[i].indexOf(e);-1!==n&&t._shimmedLocalStreams[i].splice(n,1),1===t._shimmedLocalStreams[i].length&&delete t._shimmedLocalStreams[i]})),o.apply(this,arguments)}}},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(i){return t(i).then((function(t){var n=i.video&&i.video.width,o=i.video&&i.video.height,a=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:a||3}},n&&(i.video.mandatory.maxWidth=n),o&&(i.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(i)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}},{}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":s(e)};i.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices){var i=o.detectBrowser(e),r=function(e){if("object"!==(void 0===e?"undefined":n(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(i){if("require"!==i&&"advanced"!==i&&"mediaSource"!==i){var o="object"===n(e[i])?e[i]:{ideal:e[i]};void 0!==o.exact&&"number"==typeof o.exact&&(o.min=o.max=o.exact);var a=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==o.ideal){t.optional=t.optional||[];var r={};"number"==typeof o.ideal?(r[a("min",i)]=o.ideal,t.optional.push(r),(r={})[a("max",i)]=o.ideal,t.optional.push(r)):(r[a("",i)]=o.ideal,t.optional.push(r))}void 0!==o.exact&&"number"!=typeof o.exact?(t.mandatory=t.mandatory||{},t.mandatory[a("",i)]=o.exact):["min","max"].forEach((function(e){void 0!==o[e]&&(t.mandatory=t.mandatory||{},t.mandatory[a(e,i)]=o[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},s=function(e,o){if(i.version>=61)return o(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===n(e.audio)){var s=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])};s((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),s(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"===n(e.video)){var c=e.video.facingMode;c=c&&("object"===(void 0===c?"undefined":n(c))?c:{ideal:c});var d=i.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||d)){delete e.video.facingMode;var l=void 0;if("environment"===c.exact||"environment"===c.ideal?l=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(l=["front"]),l)return t.mediaDevices.enumerateDevices().then((function(t){var i=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return l.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!i&&t.length&&l.includes("back")&&(i=t[t.length-1]),i&&(e.video.deviceId=c.exact?{exact:i.deviceId}:{ideal:i.deviceId}),e.video=r(e.video),a("chrome: "+JSON.stringify(e)),o(e)}))}e.video=r(e.video)}return a("chrome: "+JSON.stringify(e)),o(e)},c=function(e){return i.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,i,n){s(e,(function(e){t.webkitGetUserMedia(e,i,(function(e){n&&n(c(e))}))}))}.bind(t),t.mediaDevices.getUserMedia){var d=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return s(e,(function(e){return d(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(c(e))}))}))}}}};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../utils.js")),a=o.log},{"../utils.js":15}],6:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":s(e)};i.shimRTCIceCandidate=function(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var i=new t(e),o=r.default.parseCandidate(e.candidate),a=Object.assign(i,o);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,c.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}},i.shimMaxMessageSize=function(e){if(e.RTCPeerConnection){var t=c.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var i=function(e){if(!e||!e.sdp)return!1;var t=r.default.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=r.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},n=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var i=parseInt(t[1],10);return i!=i?-1:i},o=function(e){var i=65536;return"firefox"===t.browser&&(i=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),i},a=function(e,i){var n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);var o=r.default.matchPrefix(e.sdp,"a=max-message-size:");return o.length>0?n=parseInt(o[0].substr(19),10):"firefox"===t.browser&&-1!==i&&(n=2147483637),n},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){var e=this.getConfiguration(),r=e.sdpSemantics;"plan-b"===r&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){var c=n(arguments[0]),d=o(c),l=a(arguments[0],c),u=void 0;u=0===d&&0===l?Number.POSITIVE_INFINITY:0===d||0===l?Math.max(d,l):Math.min(d,l);var m={};Object.defineProperty(m,"maxMessageSize",{get:function(){return u}}),this._sctp=m}return s.apply(this,arguments)}}},i.shimSendThrowTypeError=function(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return i(e,this),e},c.wrapPeerConnectionEvent(e,"datachannel",(function(e){return i(e.channel,e.target),e}))}function i(e,t){var i=e.send;e.send=function(){var n=arguments[0],o=n.length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&o>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return i.apply(e,arguments)}}},i.shimConnectionState=function(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var i=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var i=new Event("connectionstatechange",e);t.dispatchEvent(i)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}}))}},i.removeAllowExtmapMixed=function(e){if(e.RTCPeerConnection){var t=c.detectBrowser(e);if(!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n")),i.apply(this,arguments)}}}};var o,a=e("sdp"),r=(o=a)&&o.__esModule?o:{default:o},c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("./utils"))},{"./utils":15,sdp:17}],7:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=i.shimGetUserMedia=void 0;var n=e("./getusermedia");Object.defineProperty(i,"shimGetUserMedia",{enumerable:!0,get:function(){return n.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(i,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),i.shimPeerConnection=function(e){var t=r.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var i=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){i.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var n=(0,d.default)(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,s.filterIceServers)(e.iceServers,t.version),r.log("ICE servers after filtering:",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype},i.shimReplaceTrack=function(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)};var a,r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../utils")),s=e("./filtericeservers"),c=e("rtcpeerconnection-shim"),d=(a=c)&&a.__esModule?a:{default:a}},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.filterIceServers=function(e,t){var i=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&n.deprecated("RTCIceServer.url","RTCIceServer.urls");var o="string"==typeof t;return o&&(t=[t]),t=t.filter((function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!i?(i=!0,!0):t&&!i})),delete e.url,e.urls=o?t[0]:t,!!t.length}}))};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../utils"))},{"../utils":15}],9:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=function(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}},{}],10:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetUserMedia=function(e){var t=e&&e.navigator,i=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return i(e).catch((function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))}))}}},{}],11:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=i.shimGetUserMedia=void 0;var n="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":s(e)},o=e("./getusermedia");Object.defineProperty(i,"shimGetUserMedia",{enumerable:!0,get:function(){return o.shimGetUserMedia}});var a=e("./getdisplaymedia");Object.defineProperty(i,"shimGetDisplayMedia",{enumerable:!0,get:function(){return a.shimGetDisplayMedia}}),i.shimOnTrack=function(e){"object"===(void 0===e?"undefined":n(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},i.shimPeerConnection=function(e){var t=r.detectBrowser(e);if("object"===(void 0===e?"undefined":n(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){if(!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var i,n,o,a=e.RTCPeerConnection.prototype[t],r=(o=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)},(n=t)in(i={})?Object.defineProperty(i,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[n]=o,i);e.RTCPeerConnection.prototype[t]=r[t]})),t.version<68){var i=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?Promise.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}var o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},a=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),i=e[0],n=e[1],r=e[2];return a.apply(this,[i||null]).then((function(e){if(t.version<53&&!n)try{e.forEach((function(e){e.type=o[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,i){e.set(i,Object.assign({},t,{type:o[t.type]||t.type}))}))}return e})).then(n,r)}}},i.shimSenderGetStats=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,i=t.apply(this,[]);return i.forEach((function(t){return t._pc=e})),i});var i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},i.shimReceiverGetStats=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,i=t.apply(this,[]);return i.forEach((function(t){return t._pc=e})),i}),r.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},i.shimRemoveStream=function(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;r.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(i){i.track&&e.getTracks().includes(i.track)&&t.removeTrack(i)}))})},i.shimRTCDataChannel=function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)},i.shimAddTransceiver=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],i=e&&"sendEncodings"in e;i&&e.sendEncodings.forEach((function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var n=t.apply(this,arguments);if(i){var o=n.sender,a=o.getParameters();(!("encodings"in a)||1===a.encodings.length&&0===Object.keys(a.encodings[0]).length)&&(a.encodings=e.sendEncodings,o.sendEncodings=e.sendEncodings,this.setParametersPromises.push(o.setParameters(a).then((function(){delete o.sendEncodings})).catch((function(){delete o.sendEncodings}))))}return n})}},i.shimGetParameters=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}},i.shimCreateOffer=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=this,i=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,i)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}},i.shimCreateAnswer=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=this,i=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,i)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../utils"))},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(i){if(!i||!i.video){var n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,Promise.reject(n)}return!0===i.video?i.video={mediaSource:t}:i.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(i)})}},{}],13:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":s(e)};i.shimGetUserMedia=function(e){var t=o.detectBrowser(e),i=e&&e.navigator,a=e&&e.MediaStreamTrack;if(i.getUserMedia=function(e,t,n){o.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){var r=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])},s=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(e){return"object"===(void 0===e?"undefined":n(e))&&"object"===n(e.audio)&&(e=JSON.parse(JSON.stringify(e)),r(e.audio,"autoGainControl","mozAutoGainControl"),r(e.audio,"noiseSuppression","mozNoiseSuppression")),s(e)},a&&a.prototype.getSettings){var c=a.prototype.getSettings;a.prototype.getSettings=function(){var e=c.apply(this,arguments);return r(e,"mozAutoGainControl","autoGainControl"),r(e,"mozNoiseSuppression","noiseSuppression"),e}}if(a&&a.prototype.applyConstraints){var d=a.prototype.applyConstraints;a.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===(void 0===e?"undefined":n(e))&&(e=JSON.parse(JSON.stringify(e)),r(e,"autoGainControl","mozAutoGainControl"),r(e,"noiseSuppression","mozNoiseSuppression")),d.apply(this,[e])}}}};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../utils"))},{"../utils":15}],14:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":s(e)};i.shimLocalStreamsAPI=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var i=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(n){return t.call(i,n,e)})),e.getVideoTracks().forEach((function(n){return t.call(i,n,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var i=this,n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return o&&o.forEach((function(e){i._localStreams?i._localStreams.includes(e)||i._localStreams.push(e):i._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var i=this._localStreams.indexOf(e);if(-1!==i){this._localStreams.splice(i,1);var n=e.getTracks();this.getSenders().forEach((function(e){n.includes(e.track)&&t.removeTrack(e)}))}})}},i.shimRemoteStreamsAPI=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var i=new Event("addstream");i.stream=e,t.dispatchEvent(i)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var i=new Event("addstream");i.stream=t,e.dispatchEvent(i)}}))}),t.apply(e,arguments)}}},i.shimCallbacksAPI=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,i=t.createOffer,o=t.createAnswer,a=t.setLocalDescription,r=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],o=i.apply(this,[n]);return t?(o.then(e,t),Promise.resolve()):o},t.createAnswer=function(e,t){var i=arguments.length>=2?arguments[2]:arguments[0],n=o.apply(this,[i]);return t?(n.then(e,t),Promise.resolve()):n};var c=function(e,t,i){var n=a.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n};t.setLocalDescription=c,c=function(e,t,i){var n=r.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n},t.setRemoteDescription=c,c=function(e,t,i){var n=s.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n},t.addIceCandidate=c}},i.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var i=t.mediaDevices,n=i.getUserMedia.bind(i);t.mediaDevices.getUserMedia=function(e){return n(a(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,i,n){t.mediaDevices.getUserMedia(e).then(i,n)}.bind(t))},i.shimConstraints=a,i.shimRTCIceServerUrls=function(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,i){if(e&&e.iceServers){for(var n=[],a=0;a<e.iceServers.length;a++){var r=e.iceServers[a];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(o.deprecated("RTCIceServer.url","RTCIceServer.urls"),(r=JSON.parse(JSON.stringify(r))).urls=r.url,delete r.url,n.push(r)):n.push(e.iceServers[a])}e.iceServers=n}return new t(e,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}},i.shimTrackEventTransceiver=function(e){"object"===(void 0===e?"undefined":n(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},i.shimCreateOfferLegacy=function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var i=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0!==e.offerToReceiveAudio||i||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var n=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}},i.shimAudioContext=function(e){"object"!==(void 0===e?"undefined":n(e))||e.AudioContext||(e.AudioContext=e.webkitAudioContext)};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../utils"));function a(e){return e&&void 0!==e.video?Object.assign({},e,{video:o.compactObject(e.video)}):e}},{"../utils":15}],15:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":s(e)};i.extractVersion=r,i.wrapPeerConnectionEvent=function(e,t,i){if(e.RTCPeerConnection){var n=e.RTCPeerConnection.prototype,o=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return o.apply(this,arguments);var a=function(e){var t=i(e);t&&(n.handleEvent?n.handleEvent(t):n(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(n,a),o.apply(this,[e,a])};var a=n.removeEventListener;n.removeEventListener=function(e,i){if(e!==t||!this._eventMap||!this._eventMap[t])return a.apply(this,arguments);if(!this._eventMap[t].has(i))return a.apply(this,arguments);var n=this._eventMap[t].get(i);return this._eventMap[t].delete(i),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,a.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}},i.disableLog=function(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":n(e))+". Please use a boolean."):(o=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},i.disableWarnings=function(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":n(e))+". Please use a boolean."):(a=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},i.log=function(){if("object"===("undefined"==typeof window?"undefined":n(window))){if(o)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},i.deprecated=function(e,t){a&&console.warn(e+" is deprecated, please use "+t+" instead.")},i.detectBrowser=function(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var i=e.navigator;if(i.mozGetUserMedia)t.browser="firefox",t.version=r(i.userAgent,/Firefox\/(\d+)\./,1);else if(i.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=r(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(i.mediaDevices&&i.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=r(i.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!i.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=r(i.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t},i.compactObject=function e(t){return c(t)?Object.keys(t).reduce((function(i,n){var o=c(t[n]),a=o?e(t[n]):t[n],r=o&&!Object.keys(a).length;return void 0===a||r?i:Object.assign(i,function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}({},n,a))}),{}):t},i.walkStats=d,i.filterStats=function(e,t,i){var n=i?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;var a=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&a.push(e)})),a.forEach((function(t){e.forEach((function(i){i.type===n&&i.trackId===t.id&&d(e,i,o)}))})),o};var o=!0,a=!0;function r(e,t,i){var n=e.match(t);return n&&n.length>=i&&parseInt(n[i],10)}function c(e){return"[object Object]"===Object.prototype.toString.call(e)}function d(e,t,i){t&&!i.has(t.id)&&(i.set(t.id,t),Object.keys(t).forEach((function(n){n.endsWith("Id")?d(e,e.get(t[n]),i):n.endsWith("Ids")&&t[n].forEach((function(t){d(e,e.get(t),i)}))})))}},{}],16:[function(e,t,i){"use strict";var n=e("sdp");function o(e,t,i,o,a){var r=n.writeRtpDescription(e.kind,t);if(r+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),r+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":a||"active"),r+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?r+="a=sendrecv\r\n":e.rtpSender?r+="a=sendonly\r\n":e.rtpReceiver?r+="a=recvonly\r\n":r+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var c="msid:"+(o?o.id:"-")+" "+s+"\r\n";r+="a="+c,r+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(r+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,r+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return r+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(r+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),r}function a(e,t){var i={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var i=0;i<t.length;i++)if(t[i].payloadType===e||t[i].preferredPayloadType===e)return t[i]},o=function(e,t,i,o){var a=n(e.parameters.apt,i),r=n(t.parameters.apt,o);return a&&r&&a.name.toLowerCase()===r.name.toLowerCase()};return e.codecs.forEach((function(n){for(var a=0;a<t.codecs.length;a++){var r=t.codecs[a];if(n.name.toLowerCase()===r.name.toLowerCase()&&n.clockRate===r.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&r.parameters.apt&&!o(n,r,e.codecs,t.codecs))continue;(r=JSON.parse(JSON.stringify(r))).numChannels=Math.min(n.numChannels,r.numChannels),i.codecs.push(r),r.rtcpFeedback=r.rtcpFeedback.filter((function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var n=0;n<t.headerExtensions.length;n++){var o=t.headerExtensions[n];if(e.uri===o.uri){i.headerExtensions.push(o);break}}})),i}function r(e,t,i){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(i)}function s(e,t){var i=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return i||e.addRemoteCandidate(t),!i}function c(e,t){var i=new Error(t);return i.name=e,i.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],i}t.exports=function(e,t){function i(t,i){i.addTrack(t),i.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function d(t,i,n,o){var a=new Event("track");a.track=i,a.receiver=n,a.transceiver={receiver:n},a.streams=o,e.setTimeout((function(){t._dispatchEvent("track",a)}))}var l=function(i){var o=this,a=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){o[e]=a[e].bind(a)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",i=JSON.parse(JSON.stringify(i||{})),this.usingBundle="max-bundle"===i.bundlePolicy,"negotiate"===i.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(i.rtcpMuxPolicy||(i.rtcpMuxPolicy="require"),i.iceTransportPolicy){case"all":case"relay":break;default:i.iceTransportPolicy="all"}switch(i.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:i.bundlePolicy="balanced"}if(i.iceServers=function(e,t){var i=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o="string"==typeof n;return o&&(n=[n]),n=n.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||i?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(i=!0,!0)})),delete e.url,e.urls=o?n[0]:n,!!n.length}}))}(i.iceServers||[],t),this._iceGatherers=[],i.iceCandidatePoolSize)for(var r=i.iceCandidatePoolSize;r>0;r--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:i.iceServers,gatherPolicy:i.iceTransportPolicy}));else i.iceCandidatePoolSize=0;this._config=i,this.transceivers=[],this._sdpSessionId=n.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(l.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(l.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),l.prototype.onicecandidate=null,l.prototype.onaddstream=null,l.prototype.ontrack=null,l.prototype.onremovestream=null,l.prototype.onsignalingstatechange=null,l.prototype.oniceconnectionstatechange=null,l.prototype.onconnectionstatechange=null,l.prototype.onicegatheringstatechange=null,l.prototype.onnegotiationneeded=null,l.prototype.ondatachannel=null,l.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},l.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},l.prototype.getConfiguration=function(){return this._config},l.prototype.getLocalStreams=function(){return this.localStreams},l.prototype.getRemoteStreams=function(){return this.remoteStreams},l.prototype._createTransceiver=function(e,t){var i=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&i)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var o=this._createIceAndDtlsTransports();n.iceTransport=o.iceTransport,n.dtlsTransport=o.dtlsTransport}return t||this.transceivers.push(n),n},l.prototype.addTrack=function(t,i){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find((function(e){return e.track===t})))throw c("InvalidAccessError","Track already exists.");for(var o=0;o<this.transceivers.length;o++)this.transceivers[o].track||this.transceivers[o].kind!==t.kind||(n=this.transceivers[o]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(i)&&this.localStreams.push(i),n.track=t,n.stream=i,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},l.prototype.addStream=function(e){var i=this;if(t>=15025)e.getTracks().forEach((function(t){i.addTrack(t,e)}));else{var n=e.clone();e.getTracks().forEach((function(e,t){var i=n.getTracks()[t];e.addEventListener("enabled",(function(e){i.enabled=e.enabled}))})),n.getTracks().forEach((function(e){i.addTrack(e,n)}))}},l.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var i=this.transceivers.find((function(e){return e.rtpSender===t}));if(!i)throw c("InvalidAccessError","Sender was not created by this connection.");var n=i.stream;i.rtpSender.stop(),i.rtpSender=null,i.track=null,i.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(n)&&this.localStreams.indexOf(n)>-1&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},l.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var i=t.getSenders().find((function(t){return t.track===e}));i&&t.removeTrack(i)}))},l.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},l.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},l.prototype._createIceGatherer=function(t,i){var n=this;if(i&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var o=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(o,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var i=!e.candidate||0===Object.keys(e.candidate).length;o.state=i?"completed":"gathering",null!==n.transceivers[t].bufferedCandidateEvents&&n.transceivers[t].bufferedCandidateEvents.push(e)},o.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),o},l.prototype._gather=function(t,i){var o=this,a=this.transceivers[i].iceGatherer;if(!a.onlocalcandidate){var r=this.transceivers[i].bufferedCandidateEvents;this.transceivers[i].bufferedCandidateEvents=null,a.removeEventListener("localcandidate",this.transceivers[i].bufferCandidates),a.onlocalcandidate=function(e){if(!(o.usingBundle&&i>0)){var r=new Event("icecandidate");r.candidate={sdpMid:t,sdpMLineIndex:i};var s=e.candidate,c=!s||0===Object.keys(s).length;if(c)"new"!==a.state&&"gathering"!==a.state||(a.state="completed");else{"new"===a.state&&(a.state="gathering"),s.component=1,s.ufrag=a.getLocalParameters().usernameFragment;var d=n.writeCandidate(s);r.candidate=Object.assign(r.candidate,n.parseCandidate(d)),r.candidate.candidate=d,r.candidate.toJSON=function(){return{candidate:r.candidate.candidate,sdpMid:r.candidate.sdpMid,sdpMLineIndex:r.candidate.sdpMLineIndex,usernameFragment:r.candidate.usernameFragment}}}var l=n.getMediaSections(o._localDescription.sdp);l[r.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+r.candidate.candidate+"\r\n",o._localDescription.sdp=n.getDescription(o._localDescription.sdp)+l.join("");var u=o.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==o.iceGatheringState&&(o.iceGatheringState="gathering",o._emitGatheringStateChange()),c||o._dispatchEvent("icecandidate",r),u&&(o._dispatchEvent("icecandidate",new Event("icecandidate")),o.iceGatheringState="complete",o._emitGatheringStateChange())}},e.setTimeout((function(){r.forEach((function(e){a.onlocalcandidate(e)}))}),0)}},l.prototype._createIceAndDtlsTransports=function(){var t=this,i=new e.RTCIceTransport(null);i.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var n=new e.RTCDtlsTransport(i);return n.ondtlsstatechange=function(){t._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:i,dtlsTransport:n}},l.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var i=this.transceivers[e].iceTransport;i&&(delete i.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},l.prototype._transceive=function(e,i,o){var r=a(e.localCapabilities,e.remoteCapabilities);i&&e.rtpSender&&(r.encodings=e.sendEncodingParameters,r.rtcp={cname:n.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(r.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(r)),o&&e.rtpReceiver&&r.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?r.encodings=e.recvEncodingParameters:r.encodings=[{}],r.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(r.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(r.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(r))},l.prototype.setLocalDescription=function(e){var t,i,o=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!r("setLocalDescription",e.type,o.signalingState)||o._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+o.signalingState));if("offer"===e.type)t=n.splitSections(e.sdp),i=t.shift(),t.forEach((function(e,t){var i=n.parseRtpParameters(e);o.transceivers[t].localCapabilities=i})),o.transceivers.forEach((function(e,t){o._gather(e.mid,t)}));else if("answer"===e.type){t=n.splitSections(o._remoteDescription.sdp),i=t.shift();var s=n.matchPrefix(i,"a=ice-lite").length>0;t.forEach((function(e,t){var r=o.transceivers[t],c=r.iceGatherer,d=r.iceTransport,l=r.dtlsTransport,u=r.localCapabilities,m=r.remoteCapabilities;if(!(n.isRejected(e)&&0===n.matchPrefix(e,"a=bundle-only").length||r.rejected)){var f=n.getIceParameters(e,i),p=n.getDtlsParameters(e,i);s&&(p.role="server"),o.usingBundle&&0!==t||(o._gather(r.mid,t),"new"===d.state&&d.start(c,f,s?"controlling":"controlled"),"new"===l.state&&l.start(p));var h=a(u,m);o._transceive(r,h.codecs.length>0,!1)}}))}return o._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?o._updateSignalingState("have-local-offer"):o._updateSignalingState("stable"),Promise.resolve()},l.prototype.setRemoteDescription=function(o){var l=this;if(-1===["offer","answer"].indexOf(o.type))return Promise.reject(c("TypeError",'Unsupported type "'+o.type+'"'));if(!r("setRemoteDescription",o.type,l.signalingState)||l._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+o.type+" in state "+l.signalingState));var u={};l.remoteStreams.forEach((function(e){u[e.id]=e}));var m=[],f=n.splitSections(o.sdp),p=f.shift(),h=n.matchPrefix(p,"a=ice-lite").length>0,g=n.matchPrefix(p,"a=group:BUNDLE ").length>0;l.usingBundle=g;var v=n.matchPrefix(p,"a=ice-options:")[0];return l.canTrickleIceCandidates=!!v&&v.substr(14).split(" ").indexOf("trickle")>=0,f.forEach((function(r,c){var d=n.splitLines(r),f=n.getKind(r),v=n.isRejected(r)&&0===n.matchPrefix(r,"a=bundle-only").length,b=d[0].substr(2).split(" ")[2],C=n.getDirection(r,p),y=n.parseMsid(r),w=n.getMid(r)||n.generateIdentifier();if(v||"application"===f&&("DTLS/SCTP"===b||"UDP/DTLS/SCTP"===b))l.transceivers[c]={mid:w,kind:f,protocol:b,rejected:!0};else{var S,_,R,T,k,x,E,P,O;!v&&l.transceivers[c]&&l.transceivers[c].rejected&&(l.transceivers[c]=l._createTransceiver(f,!0));var M,D,L=n.parseRtpParameters(r);v||(M=n.getIceParameters(r,p),(D=n.getDtlsParameters(r,p)).role="client"),E=n.parseRtpEncodingParameters(r);var I=n.parseRtcpParameters(r),A=n.matchPrefix(r,"a=end-of-candidates",p).length>0,U=n.matchPrefix(r,"a=candidate:").map((function(e){return n.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===o.type||"answer"===o.type)&&!v&&g&&c>0&&l.transceivers[c]&&(l._disposeIceAndDtlsTransports(c),l.transceivers[c].iceGatherer=l.transceivers[0].iceGatherer,l.transceivers[c].iceTransport=l.transceivers[0].iceTransport,l.transceivers[c].dtlsTransport=l.transceivers[0].dtlsTransport,l.transceivers[c].rtpSender&&l.transceivers[c].rtpSender.setTransport(l.transceivers[0].dtlsTransport),l.transceivers[c].rtpReceiver&&l.transceivers[c].rtpReceiver.setTransport(l.transceivers[0].dtlsTransport)),"offer"!==o.type||v)"answer"!==o.type||v||(_=(S=l.transceivers[c]).iceGatherer,R=S.iceTransport,T=S.dtlsTransport,k=S.rtpReceiver,x=S.sendEncodingParameters,P=S.localCapabilities,l.transceivers[c].recvEncodingParameters=E,l.transceivers[c].remoteCapabilities=L,l.transceivers[c].rtcpParameters=I,U.length&&"new"===R.state&&(!h&&!A||g&&0!==c?U.forEach((function(e){s(S.iceTransport,e)})):R.setRemoteCandidates(U)),g&&0!==c||("new"===R.state&&R.start(_,M,"controlling"),"new"===T.state&&T.start(D)),!a(S.localCapabilities,S.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&S.sendEncodingParameters[0].rtx&&delete S.sendEncodingParameters[0].rtx,l._transceive(S,"sendrecv"===C||"recvonly"===C,"sendrecv"===C||"sendonly"===C),!k||"sendrecv"!==C&&"sendonly"!==C?delete S.rtpReceiver:(O=k.track,y?(u[y.stream]||(u[y.stream]=new e.MediaStream),i(O,u[y.stream]),m.push([O,k,u[y.stream]])):(u.default||(u.default=new e.MediaStream),i(O,u.default),m.push([O,k,u.default]))));else{(S=l.transceivers[c]||l._createTransceiver(f)).mid=w,S.iceGatherer||(S.iceGatherer=l._createIceGatherer(c,g)),U.length&&"new"===S.iceTransport.state&&(!A||g&&0!==c?U.forEach((function(e){s(S.iceTransport,e)})):S.iceTransport.setRemoteCandidates(U)),P=e.RTCRtpReceiver.getCapabilities(f),t<15019&&(P.codecs=P.codecs.filter((function(e){return"rtx"!==e.name}))),x=S.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var j,$=!1;"sendrecv"===C||"sendonly"===C?($=!S.rtpReceiver,k=S.rtpReceiver||new e.RTCRtpReceiver(S.dtlsTransport,f),$&&(O=k.track,y&&"-"===y.stream||(y?(u[y.stream]||(u[y.stream]=new e.MediaStream,Object.defineProperty(u[y.stream],"id",{get:function(){return y.stream}})),Object.defineProperty(O,"id",{get:function(){return y.track}}),j=u[y.stream]):(u.default||(u.default=new e.MediaStream),j=u.default)),j&&(i(O,j),S.associatedRemoteMediaStreams.push(j)),m.push([O,k,j]))):S.rtpReceiver&&S.rtpReceiver.track&&(S.associatedRemoteMediaStreams.forEach((function(t){var i=t.getTracks().find((function(e){return e.id===S.rtpReceiver.track.id}));i&&function(t,i){i.removeTrack(t),i.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(i,t)})),S.associatedRemoteMediaStreams=[]),S.localCapabilities=P,S.remoteCapabilities=L,S.rtpReceiver=k,S.rtcpParameters=I,S.sendEncodingParameters=x,S.recvEncodingParameters=E,l._transceive(l.transceivers[c],!1,$)}}})),void 0===l._dtlsRole&&(l._dtlsRole="offer"===o.type?"active":"passive"),l._remoteDescription={type:o.type,sdp:o.sdp},"offer"===o.type?l._updateSignalingState("have-remote-offer"):l._updateSignalingState("stable"),Object.keys(u).forEach((function(t){var i=u[t];if(i.getTracks().length){if(-1===l.remoteStreams.indexOf(i)){l.remoteStreams.push(i);var n=new Event("addstream");n.stream=i,e.setTimeout((function(){l._dispatchEvent("addstream",n)}))}m.forEach((function(e){var t=e[0],n=e[1];i.id===e[2].id&&d(l,t,n,[i])}))}})),m.forEach((function(e){e[2]||d(l,e[0],e[1],[])})),e.setTimeout((function(){l&&l.transceivers&&l.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},l.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},l.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},l.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},l.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var i=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",i)}},l.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var i=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",i)}},l.prototype.createOffer=function(){var i=this;if(i._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var a=i.transceivers.filter((function(e){return"audio"===e.kind})).length,r=i.transceivers.filter((function(e){return"video"===e.kind})).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==s.offerToReceiveAudio&&(a=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(r=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo)}for(i.transceivers.forEach((function(e){"audio"===e.kind?--a<0&&(e.wantReceive=!1):"video"===e.kind&&--r<0&&(e.wantReceive=!1)}));a>0||r>0;)a>0&&(i._createTransceiver("audio"),a--),r>0&&(i._createTransceiver("video"),r--);var d=n.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);i.transceivers.forEach((function(o,a){var r=o.track,s=o.kind,c=o.mid||n.generateIdentifier();o.mid=c,o.iceGatherer||(o.iceGatherer=i._createIceGatherer(a,i.usingBundle));var d=e.RTCRtpSender.getCapabilities(s);t<15019&&(d.codecs=d.codecs.filter((function(e){return"rtx"!==e.name}))),d.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),o.remoteCapabilities&&o.remoteCapabilities.codecs&&o.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),d.headerExtensions.forEach((function(e){(o.remoteCapabilities&&o.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=o.sendEncodingParameters||[{ssrc:1001*(2*a+1)}];r&&t>=15019&&"video"===s&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),o.wantReceive&&(o.rtpReceiver=new e.RTCRtpReceiver(o.dtlsTransport,s)),o.localCapabilities=d,o.sendEncodingParameters=l})),"max-compat"!==i._config.bundlePolicy&&(d+="a=group:BUNDLE "+i.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),d+="a=ice-options:trickle\r\n",i.transceivers.forEach((function(e,t){d+=o(e,e.localCapabilities,"offer",e.stream,i._dtlsRole),d+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===i.iceGatheringState||0!==t&&i.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,d+="a="+n.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(d+="a=end-of-candidates\r\n"))}));var l=new e.RTCSessionDescription({type:"offer",sdp:d});return Promise.resolve(l)},l.prototype.createAnswer=function(){var i=this;if(i._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==i.signalingState&&"have-local-pranswer"!==i.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+i.signalingState));var r=n.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);i.usingBundle&&(r+="a=group:BUNDLE "+i.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),r+="a=ice-options:trickle\r\n";var s=n.getMediaSections(i._remoteDescription.sdp).length;i.transceivers.forEach((function(e,n){if(!(n+1>s)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?r+="m=application 0 DTLS/SCTP 5000\r\n":r+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?r+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(r+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(r+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;e.stream&&("audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var d=a(e.localCapabilities,e.remoteCapabilities);!d.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,r+=o(e,d,"answer",e.stream,i._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(r+="a=rtcp-rsize\r\n")}}));var d=new e.RTCSessionDescription({type:"answer",sdp:r});return Promise.resolve(d)},l.prototype.addIceCandidate=function(e){var t,i=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(o,a){if(!i._remoteDescription)return a(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var r=e.sdpMLineIndex;if(e.sdpMid)for(var d=0;d<i.transceivers.length;d++)if(i.transceivers[d].mid===e.sdpMid){r=d;break}var l=i.transceivers[r];if(!l)return a(c("OperationError","Can not add ICE candidate"));if(l.rejected)return o();var u=Object.keys(e.candidate).length>0?n.parseCandidate(e.candidate):{};if("tcp"===u.protocol&&(0===u.port||9===u.port))return o();if(u.component&&1!==u.component)return o();if((0===r||r>0&&l.iceTransport!==i.transceivers[0].iceTransport)&&!s(l.iceTransport,u))return a(c("OperationError","Can not add ICE candidate"));var m=e.candidate.trim();0===m.indexOf("a=")&&(m=m.substr(2)),(t=n.getMediaSections(i._remoteDescription.sdp))[r]+="a="+(u.type?m:"end-of-candidates")+"\r\n",i._remoteDescription.sdp=n.getDescription(i._remoteDescription.sdp)+t.join("")}else for(var f=0;f<i.transceivers.length&&(i.transceivers[f].rejected||(i.transceivers[f].iceTransport.addRemoteCandidate({}),(t=n.getMediaSections(i._remoteDescription.sdp))[f]+="a=end-of-candidates\r\n",i._remoteDescription.sdp=n.getDescription(i._remoteDescription.sdp)+t.join(""),!i.usingBundle));f++);o()}))},l.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var i=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?i=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(i=e.rtpReceiver)})),!i)throw c("InvalidAccessError","Invalid selector.");return i.getStats()}var n=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&n.push(e[t].getStats())}))})),Promise.all(n).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var i=e[t];if(i&&i.prototype&&i.prototype.getStats){var n=i.prototype.getStats;i.prototype.getStats=function(){return n.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(i){var n;e[i].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(n=e[i]).type]||n.type,t.set(i,e[i])})),t}))}}}));var u=["createOffer","createAnswer"];return u.forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(u=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),l}},{sdp:17}],17:[function(e,t,i){"use strict";var n={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},n.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},n.getDescription=function(e){var t=n.splitSections(e);return t&&t[0]},n.getMediaSections=function(e){var t=n.splitSections(e);return t.shift(),t},n.matchPrefix=function(e,t){return n.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},n.parseCandidate=function(e){for(var t,i={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":i.relatedAddress=t[n+1];break;case"rport":i.relatedPort=parseInt(t[n+1],10);break;case"tcptype":i.tcpType=t[n+1];break;case"ufrag":i.ufrag=t[n+1],i.usernameFragment=t[n+1];break;default:i[t[n]]=t[n+1]}return i},n.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var i=e.type;return t.push("typ"),t.push(i),"host"!==i&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},n.parseIceOptions=function(e){return e.substr(14).split(" ")},n.parseRtpMap=function(e){var t=e.substr(9).split(" "),i={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),i.name=t[0],i.clockRate=parseInt(t[1],10),i.channels=3===t.length?parseInt(t[2],10):1,i.numChannels=i.channels,i},n.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var i=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==i?"/"+i:"")+"\r\n"},n.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},n.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},n.parseFmtp=function(e){for(var t,i={},n=e.substr(e.indexOf(" ")+1).split(";"),o=0;o<n.length;o++)i[(t=n[o].trim().split("="))[0].trim()]=t[1];return i},n.writeFmtp=function(e){var t="",i=e.payloadType;if(void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?n.push(t+"="+e.parameters[t]):n.push(t)})),t+="a=fmtp:"+i+" "+n.join(";")+"\r\n"}return t},n.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},n.writeRtcpFb=function(e){var t="",i=e.payloadType;return void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+i+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},n.parseSsrcMedia=function(e){var t=e.indexOf(" "),i={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(i.attribute=e.substr(t+1,n-t-1),i.value=e.substr(n+1)):i.attribute=e.substr(t+1),i},n.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},n.getMid=function(e){var t=n.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},n.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},n.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:n.matchPrefix(e+t,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(e,t){var i="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){i+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),i},n.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},n.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===s(e.keyParams)?n.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},n.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},n.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},n.getCryptoParameters=function(e,t){return n.matchPrefix(e+t,"a=crypto:").map(n.parseCryptoLine)},n.getIceParameters=function(e,t){var i=n.matchPrefix(e+t,"a=ice-ufrag:")[0],o=n.matchPrefix(e+t,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substr(12),password:o.substr(10)}:null},n.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=n.splitLines(e)[0].split(" "),o=3;o<i.length;o++){var a=i[o],r=n.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(r){var s=n.parseRtpMap(r),c=n.matchPrefix(e,"a=fmtp:"+a+" ");switch(s.parameters=c.length?n.parseFmtp(c[0]):{},s.rtcpFeedback=n.matchPrefix(e,"a=rtcp-fb:"+a+" ").map(n.parseRtcpFb),t.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(s.name.toUpperCase())}}}return n.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(n.parseExtmap(e))})),t},n.writeRtpDescription=function(e,t){var i="";i+="m="+e+" ",i+=t.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",i+="c=IN IP4 0.0.0.0\r\n",i+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){i+=n.writeRtpMap(e),i+=n.writeFmtp(e),i+=n.writeRtcpFb(e)}));var o=0;return t.codecs.forEach((function(e){e.maxptime>o&&(o=e.maxptime)})),o>0&&(i+="a=maxptime:"+o+"\r\n"),i+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){i+=n.writeExtmap(e)})),i},n.parseRtpEncodingParameters=function(e){var t,i=[],o=n.parseRtpParameters(e),a=-1!==o.fecMechanisms.indexOf("RED"),r=-1!==o.fecMechanisms.indexOf("ULPFEC"),s=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=s.length>0&&s[0].ssrc,d=n.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));d.length>0&&d[0].length>1&&d[0][0]===c&&(t=d[0][1]),o.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(n.rtx={ssrc:t}),i.push(n),a&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:c,mechanism:r?"red+ulpfec":"red"},i.push(n))}})),0===i.length&&c&&i.push({ssrc:c});var l=n.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,i.forEach((function(e){e.maxBitrate=l}))),i},n.parseRtcpParameters=function(e){var t={},i=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];i&&(t.cname=i.value,t.ssrc=i.ssrc);var o=n.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=o.length>0,t.compound=0===o.length;var a=n.matchPrefix(e,"a=rtcp-mux");return t.mux=a.length>0,t},n.parseMsid=function(e){var t,i=n.matchPrefix(e,"a=msid:");if(1===i.length)return{stream:(t=i[0].substr(7).split(" "))[0],track:t[1]};var o=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return o.length>0?{stream:(t=o[0].value.split(" "))[0],track:t[1]}:void 0},n.parseSctpDescription=function(e){var t,i=n.parseMLine(e),o=n.matchPrefix(e,"a=max-message-size:");o.length>0&&(t=parseInt(o[0].substr(19),10)),isNaN(t)&&(t=65536);var a=n.matchPrefix(e,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substr(12),10),protocol:i.fmt,maxMessageSize:t};if(n.matchPrefix(e,"a=sctpmap:").length>0){var r=n.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(r[0],10),protocol:r[1],maxMessageSize:t}}},n.writeSctpDescription=function(e,t){var i=[];return i="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&i.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),i.join("")},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(e,t,i){var o=void 0!==t?t:2;return"v=0\r\no="+(i||"thisisadapterortc")+" "+(e||n.generateSessionId())+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(e,t,i,o){var a=n.writeRtpDescription(e.kind,t);if(a+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":"active"),a+="a=mid:"+e.mid+"\r\n",e.direction?a+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var r="msid:"+o.id+" "+e.rtpSender.track.id+"\r\n";a+="a="+r,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+r,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+r,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),a},n.getDirection=function(e,t){for(var i=n.splitLines(e),o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substr(2)}return t?n.getDirection(t):"sendrecv"},n.getKind=function(e){return n.splitLines(e)[0].split(" ")[0].substr(2)},n.isRejected=function(e){return"0"===e.split(" ",2)[1]},n.parseMLine=function(e){var t=n.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},n.parseOLine=function(e){var t=n.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},n.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=n.splitLines(e),i=0;i<t.length;i++)if(t[i].length<2||"="!==t[i].charAt(1))return!1;return!0},"object"===s(t)&&(t.exports=n)},{}]},{},[1])(1)},"object"===s(t)&&void 0!==e?e.exports=r():(o=[],void 0===(a="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=a))},susR:function(e,t,i){(t=e.exports=i("I1BE")(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Muli:300,400,600,700,800,900);",""]),t.push([e.i,".files-sharing-box{position:relative;width:100vw;min-height:30vh}.files-sharing-box .files-container{width:100%;height:100%;background-color:#fff}.files-sharing-box .files-container .files-wrapper{display:flex;flex-direction:column;justify-content:space-between;padding:.5rem}@media (min-width:576px){.files-sharing-box{position:fixed;top:0;left:0;width:35vw;height:100vh;z-index:1}.files-sharing-box .files-container{width:100%;height:100%;background-color:hsla(0,0%,100%,.85);padding-bottom:60px;opacity:.85}.files-sharing-box .files-container .files-wrapper{display:flex;flex-direction:column;justify-content:space-between;padding:1.5rem}.files-sharing-box:hover .files-container{opacity:1}}",""])},t0ug:function(t,i,n){"use strict";n.r(i);var o,a=n("0xtn"),r=n("L2JU"),s=n("gFX4"),c=n.n(s),d=n("zWga"),l=n.n(d),u=n("/LFT"),m=(n("mpN2"),n("x18S")),f=n.n(m),p=(n("l4sq"),n("k7+O")),h=n.n(p),g=n("vDqi"),v=n.n(g),b=(n("0D4p"),n("akQX")),C=n("V0LQ"),y=(n("lUM2"),n("PCDP")),w=n("/MoV"),S=n("8uEn"),R=(n("1TzJ"),n("kogc")),T=n("ICll");function k(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return x(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function E(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function P(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?E(Object(i),!0).forEach((function(t){O(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):E(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function O(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var M=document.createElement("script");M.setAttribute("src","/js/EBML.js"),document.head.appendChild(M),window.io=c.a,window.hark=f.a;var D={components:{RTCMultiConnection:l.a},data:function(){return{uuid:null,entity:null,entityDatesBackup:{},isLoading:!1,prevRoute:null,fullScreenItemId:null,meetingRoomId:null,initUrl:"meetings",fallBackRoute:"appMeetingList",newMessages:!1,roomIdAlive:!1,showFlipClock:!0,duplicateTab:!1,fullScreenInOn:!1,mediaDeviceIssue:!1,permissionRejected:!1,needStreamAddOrReplace:!1,membersLive:[],videoList:[],liveParticipants:[],mediaConfigFormData:{},mediaConfigurations:{selectedAudioInput:null,selectedAudioOutput:null,selectedVideoInput:null,activeAudioInput:null,activeVideoInput:null,activeFacingMode:null,selectedResolution:"Auto",facingMode:"auto",frameRate:"auto",bandwidth:{audio:"auto",video:"auto",screen:"auto",audioMin:6,videoMin:100,screenMin:300},recording:{type:"video",mimeType:"video/webm",timeSlice:5e3,disableLogs:!1}},audioBandwidthOpts:[{uuid:"auto",label:"Auto"},{uuid:64,label:"64 kbps"},{uuid:128,label:"128 kbps"},{uuid:256,label:"256 kbps"},{uuid:510,label:"512 kbps"}],videoBandwidthOpts:[{uuid:"auto",label:"Auto"},{uuid:128,label:"128 kbps"},{uuid:256,label:"256 kbps"},{uuid:512,label:"512 kbps"},{uuid:1024,label:"1 mbps"},{uuid:2e3,label:"2 mbps"}],screenBandwidthOpts:[{uuid:"auto",label:"Auto"},{uuid:512,label:"512 kbps"},{uuid:1024,label:"1 mbps"},{uuid:2048,label:"2 mbps"},{uuid:3e3,label:"3 mbps"},{uuid:4e3,label:"4 mbps"}],mediaDevices:{audioInput:[{uuid:"auto",name:"Auto"}],audioOutput:[{uuid:"auto",name:"Auto"}],videoInput:[{uuid:"auto",name:"Auto"}],resolutions:[{label:"Auto",constraints:{}},{label:"240p",constraints:{width:{max:320,ideal:320},height:{max:240,ideal:240}}},{label:"240p Wide",constraints:{width:{max:426,ideal:426},height:{max:240,ideal:240}},wide:!0},{label:"360p",constraints:{width:{max:640,ideal:640},height:{max:480,ideal:480}}},{label:"360p Wide",constraints:{width:{max:640,ideal:640},height:{max:360,ideal:360}},wide:!0},{label:"720p",constraints:{width:{max:960,ideal:960},height:{max:720,ideal:720}}},{label:"720p Wide",constraints:{width:{max:1280,ideal:1280},height:{max:720,ideal:720}},wide:!0},{label:"1080p",constraints:{width:{max:1920,ideal:1920},height:{max:1080,ideal:1080}}},{label:"4K",constraints:{width:{max:4096,ideal:4096},height:{max:2160,ideal:2160}}}],facingModes:[{uuid:"auto",label:"Auto"},{uuid:"user",label:"User"},{uuid:"environment",label:"Environment"}],frameRates:[{uuid:"auto",label:"Auto"},{uuid:30,label:"30 fps"},{uuid:60,label:"60 fps"}]},socketURL:"aHR0cHM6Ly9zaWduYWwua29kZW1pbnQuaW46OTAwMS8=",rtcmConnection:null,localVideo:null,localScreenStreamid:null,localWhiteboardStreamid:null,localGreenRoomStream:null,audioConstraints:{},videoConstraints:{},pageConfigs:{hasAgenda:!0,enableChat:!0,enableAudio:!0,enableVideo:!0,showEnableAudioBtn:!0,showEnableVideoBtn:!0,showDeviceConfig:!0,enableScreenSharing:!0,enableRecording:!0,enableAutoRecording:!1,autoUploadRecording:!1,autoUploadRecorded:!1,canStopAutoRecording:!1,recordingTimeSlice:5e3,enableHandGesture:!0,enableWhiteboard:!1,footerAutoHide:!1,disableScroll:!1,speechDetection:!1,muteParticipantsOnStart:!1,allowJoiningWithoutDevices:!1,enableFileSharing:!0,enableLinkSharing:!0,enableSnapshot:!1,anyoneCanTakeSnapshot:!1,enableSnapshotAlert:!1,snapshotAlertToUserOnly:!1,snapshotAlertToModerators:!1,askHostBeforeJoining:!1,preferRearCameraFirst:!1,enableUserAvatar:!1,enableFullUserAvatar:!1,enableMeetingInfo:!1,forceUpdateUsername:!1,autoEndMeeting:!1,alertBeforeAutoEnd:!1,canSnoozeAutoEnd:!1,canCancelAutoEnd:!1,alertBeforeAutoEndTime:1,endTimeSnoozePeriod:1,layout:"fullpage",lastLayout:"fullpage",maxParticipantCount:1e3},meetingRulesHost:{session:{audio:!1,video:!1,screen:!1,data:!1,oneway:!1},mediaConstraints:{audio:!1,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1},autoCloseEntireSession:!1},meetingRulesGuest:{session:{audio:!1,video:!1,screen:!1,data:!1,oneway:!1},mediaConstraints:{audio:!1,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1},autoCloseEntireSession:!1},snoozeOpts:[{uuid:5,name:5,type:"m"},{uuid:10,name:10,type:"m"},{uuid:15,name:15,type:"m"},{uuid:30,name:30,type:"m"},{uuid:60,name:1,type:"h"}],isHandUp:!1,recording:!1,recorded:!1,recordingPaused:!1,recordingDuration:null,meetingDuration:null,showDevicesModal:!1,showFileSharing:!1,showWhiteboard:!1,showMeetingInfo:!0,showAgenda:!0,fileSharingConnection:null,canvasDesigner:null,autoEndingToast:null,stopNavigation:!1,hasNativeShare:!!navigator.share,stopNavigationMessage:"",recordedFilesToUpload:[],micVolumeActivity:20,alreadyAcceptedParticipants:{}}},computed:P(P({},Object(r.c)("config",["configs","uiConfigs","vars"])),{},{user:function(){return{uuid:this.userUuid,username:this.username,name:this.profile.name}},hasVideos:function(){return this.videoList&&this.videoList.length>0?this.videoList.length:0},hasVideosClasses:function(){if(!this.hasVideos)return"has-no-video";var e="has-videos "+(this.pageConfigs.disableScroll?"disable-scroll ":"")+"has-".concat(this.hasVideos,"-videos "),t=this.hasVideos>15?4:this.hasVideos>8?3:this.hasVideos>3?2:1,i=this.hasVideos>20?6:16===this.hasVideos?4:this.hasVideos>12?5:this.hasVideos>9?4:9===this.hasVideos?3:this.hasVideos>6?4:this.hasVideos>4?3:4===this.hasVideos?2:this.hasVideos;return e+(this.hasVideos>20?"has-gt-20-videos":this.hasVideos>12?"has-gt-12-videos":this.hasVideos>4?"has-gt-4-videos":this.hasVideos>1?"has-2-3-videos":"has-1-video")+" has-".concat(t,"-rows has-").concat(i,"-per-row")},liveMembersCount:function(){return this.membersLive.length-1},startDateTimeIsFuture:function(){var e=this.entity&&this.showFlipClock&&this.isStartDateTimeInFuture();return e?this.startCountDown():window.countdownInterval&&clearInterval(window.countdownInterval),e},enableLogs:function(){return this.rtcmConnection&&this.rtcmConnection.enableLogs||this.configs.meeting.debugMode},participantCount:function(){return this.liveParticipants.length+1},coverPageStyles:function(){return this.entity&&this.entity.cover&&this.hasVideos?{backgroundImage:"url("+this.entity.cover+")"}:{}}}),watch:{liveMembersCount:function(e,t){window.isLiveMeetingDestroyed||e===t||this.meetingRoomCreated(this.entity)}},methods:P(P(P({},Object(r.b)("config",["SetUiConfig"])),Object(r.b)("common",["Init","Get","Custom","GetPreRequisite"])),{},(o={stopAutoEndMeeting:function(){window.autoEndMeetingTimeout&&(clearTimeout(window.autoEndMeetingTimeout),window.autoEndMeetingTimeout=null),this.autoEndingToast&&this.autoEndingToast.close&&_.isFunction(this.autoEndingToast.close)&&(R.e.close(),this.autoEndingToast=null)},startAutoEndMeeting:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300;window.autoEndMeetingTimeout&&(clearTimeout(window.autoEndMeetingTimeout),window.autoEndMeetingTimeout=null),window.autoEndMeetingTimeout=setTimeout((function(){e.entity.canModerate?e.endMeeting(!1):e.getOffline()}),1e3*t)},startMeetingTimer:function(){var e=this;if(window.meetingDurationInterval&&(this.meetingDuration=null,clearInterval(window.meetingDurationInterval)),this.entity&&"live"===this.entity.status){var t=moment(this.entity.startedAt,this.vars.serverDateTimeFormat).valueOf();window.meetingDurationInterval=window.setInterval((function(){var i=w.i({moment:!0}).valueOf();e.meetingDuration=Object(C.b)((i-t)/1e3),function(){if(!e.entity||"live"!==e.entity.status)return e.stopAutoEndMeeting(),void e.stopMeetingTimer();if(e.pageConfigs.autoEndMeeting&&e.entity.estimatedEndTime){var t=e.pageConfigs.alertBeforeAutoEndTime||5,i=moment(e.entity.estimatedEndTime,e.vars.serverDateTimeFormat),n=w.i({moment:!0}),o=((i.valueOf()-n.valueOf())/1e3).toFixed(0);if(o<=0)window.autoEndMeetingTimeout&&(clearInterval(window.autoEndMeetingTimeout),window.autoEndMeetingTimeout=null),e.entity.canModerate?e.endMeeting(!1):e.getOffline();else if(o<=60*t){var a=Object(C.b)(o)+" "+$t("list.general.durations.seconds");if(o>=60?a=Object(C.b)(o)+" "+$t("list.general.durations.minutes"):o>=3600&&(a=Object(C.b)(o)+" "+$t("list.general.durations.hours")),e.pageConfigs.alertBeforeAutoEnd)if(window.autoEndMeetingTimeout&&e.autoEndingToast&&R.a.isVisible()&&R.a.isTimerRunning())R.e.update({title:$t("meeting.auto_ending_msg",{attribute:a})});else{if(!e.autoEndingToast&&R.a.isVisible())return;if(e.autoEndingToast&&e.autoEndingToast.close&&_.isFunction(e.autoEndingToast.close)&&(R.e.close(),e.autoEndingToast=null),e.entity.canModerate){var r={iconHtml:'<i class="far fa-clock"></i>',title:$t("meeting.auto_ending_msg",{attribute:a}),timer:1e3*o,showConfirmButton:!1,showDenyButton:!1,position:"bottom"};e.pageConfigs.canSnoozeAutoEnd&&(r.showConfirmButton=!0,r.confirmButtonText=$t("meeting.snooze")),e.pageConfigs.canCancelAutoEnd&&(r.showDenyButton=!0,r.denyButtonText=$t("meeting.keep_meeting_live")),e.autoEndingToast=R.e.fire(r).then((function(t){t.isConfirmed&&e.pageConfigs.canSnoozeAutoEnd?(e.stopAutoEndMeeting(),e.entity.estimatedEndTime=moment(e.entity.estimatedEndTime,e.vars.serverDateTimeFormat).add(10,"minutes").format(e.vars.serverDateTimeFormat),e.meetingAction("snooze-end-time",{period:e.pageConfigs.endTimeSnoozePeriod||5},{alert:!1,inform:{endTimeSnoozed:!0}}),R.e.close(),e.autoEndingToast=null):t.isDenied&&e.pageConfigs.canCancelAutoEnd&&(e.stopAutoEndMeeting(),e.pageConfigs.autoEndMeeting=!1,e.meetingAction("cancel-auto-end",null,{alert:!1,inform:{autoEndCancelled:!0}}),R.e.close(),e.autoEndingToast=null)}))}else e.autoEndingToast=R.e.fire({iconHtml:'<i class="far fa-clock"></i>',title:$t("meeting.auto_ending_msg",{attribute:a}),timer:1e3*o,showConfirmButton:!1,position:"bottom"})}window.autoEndMeetingTimeout&&e.autoEndingToast||(e.stopAutoEndMeeting(),e.startAutoEndMeeting(o))}else o>60*t?e.autoEndingToast&&e.autoEndingToast.close&&_.isFunction(e.autoEndingToast.close)&&(R.e.close(),e.autoEndingToast=null):e.stopAutoEndMeeting()}}()}),1e3)}},stopMeetingTimer:function(){window.meetingDurationInterval&&(this.meetingDuration=null,clearInterval(window.meetingDurationInterval))},configPageUrl:function(){return this.$router.resolve({name:"appMeetingSingleConfig",params:{subUuid:this.uuid}}).href},snapshotsPageUrl:function(){return this.$router.resolve({name:"appMeetingSnapshots",params:{uuid:this.uuid}}).href},recordingsPageUrl:function(){return this.$router.resolve({name:"appMeetingRecordings",params:{uuid:this.uuid}}).href},share:function(){this.shareURL(null,!0)},shareURL:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.entity){this.$gaEvent("engagement","shareURL","Shown");var n=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");n+=this.entity.identifier?"/m/".concat(this.entity.identifier):"/app/live/meetings/".concat(this.entity.uuid);var o=this.entity.identifier?'<span class="text-nowrap">'.concat($t("meeting.meeting_code"),':</span> <strong class="ml-2 text-wrap-pre-line text-word-break-all"> ').concat(this.entity.identifier,"</strong>"):null;Object(b.d)({title:$t("meeting.user_inviting_msg",{attribute:this.user.name}),alertTitle:o,alertHtml:"".concat($t("misc.share_alert.text"),"<br>")+"<small class='text-muted'>".concat(n,"</small><br>"),url:n},(function(){t.$gaEvent("engagement","shareURL","Copied"),t.$toasted.success($t("meeting.url_has_been_copied"),t.$toastConfig)}),i)}},isStartDateTimeInFuture:function(){return this.entity&&this.entity.startDateTime&&moment(this.entity.startDateTime,this.vars.serverDateTimeFormat).isAfter(w.i({moment:!0}))},startCountDown:function(){var e=this;window.countdownInterval&&clearInterval(window.countdownInterval),window.countdownInterval=window.setInterval((function(){e.isStartDateTimeInFuture()?e.showFlipClock=!0:(e.showFlipClock&&!document.hasFocus()&&Object(b.a)(),e.showFlipClock=!1)}),1e3)},stopKeepAlivePolling:function(){window.meetingKeepAliveTimer&&(clearInterval(window.meetingKeepAliveTimer),window.meetingKeepAliveTimer=null)},startKeepAlivePolling:function(){var e=this;window.meetingKeepAliveTimer&&(clearInterval(window.meetingKeepAliveTimer),window.meetingKeepAliveTimer=null),this.entity&&"live"===this.entity.status&&(window.meetingKeepAliveTimer=setInterval((function(){e.Custom({url:"/".concat(e.initUrl,"/").concat(e.uuid,"/keep-alive"),method:"post",silent:!0}).then((function(e){})).catch((function(e){}))}),3e5))},takeSnapshotOfStream:function(e,t){var i=this;if(this.pageConfigs.enableSnapshot&&(this.entity.canModerate||this.pageConfigs.anyoneCanTakeSnapshot)){this.$gaEvent("engagement","takeSnapshot");var n=this.takeSnapshot(this.$refs.videos[t],!e.disableMirror),o="".concat(e.extra.username," stream by ").concat(this.username);this.Custom({url:"/".concat(this.initUrl,"/").concat(this.uuid,"/snapshots"),method:"post",data:{image:n,name:o}}).then((function(e){i.$toasted.info($t("meeting.snapshot_taken"),P(P({},i.$toastConfig.info),{},{duration:1e4,icon:{name:"fa-download"},action:{text:"View / Download",href:e.fullUrl,target:"_blank"}}))})).catch((function(e){i.isLoading=!1,formUtil.handleErrors(e)})),this.informAboutSnapshot(e),Object(b.c)()}},takeSnapshot:function(e,t){var i=document.createElement("canvas");i.width=2*(e.videoWidth||e.clientWidth),i.height=2*(e.videoHeight||e.clientHeight);var n=i.getContext("2d");return this.configs.meeting&&this.configs.meeting.mirroredVideo&&t&&(n.translate(i.width,0),n.scale(-1,1)),n.drawImage(e,0,0,i.width,i.height),i.toDataURL("image/png")},informAboutSnapshot:function(e){this.pageConfigs.enableSnapshotAlert&&this.emitSocketEvents("snapshotTaken",{byUser:this.user,ofUser:e.extra,item:e})},informAboutMeetingUpdate:function(e){this.emitSocketEvents("meetingUpdated",{data:e})},checkPendingUploads:_.throttle((function(){this.recordedFilesToUpload.filter((function(e){return"waiting"===e.status||"uploading"===e.status})).length?(this.stopNavigation=!0,this.stopNavigationMessage=$t("meeting.uploads_pending_message")):(this.stopNavigation=!1,this.stopNavigationMessage=""),this.uploadRecording()}),500,{leading:!0,trailing:!1}),uploadRecording:function(e){var t=this,i=_.throttle((function(){var e=t.recordedFilesToUpload.filter((function(e){return"waiting"===e.status&&e.chunk})),i=t.recordedFilesToUpload.filter((function(e){return"uploading"===e.status&&e.chunk}));if(e.length)for(var n=[],o=v.a.CancelToken,a=5-i.length,r=function(e){var i=t.recordedFilesToUpload[e];if(n[e]=function(e){i.progress=Math.round(100*e.loaded/e.total)},"waiting"===i.status){a-=1;var r=new FormData;r.append("file",i.blob),r.append("mime",i.mime),r.append("request_uuid",i.requestUuid),r.append("order",i.order),r.append("chunk",i.chunk),i.status="uploading";var s=new o((function(e){i.cancel=e}));T.c({url:"/".concat(t.initUrl,"/").concat(t.uuid,"/recordings"),data:r,silent:!0},n[e],s).then((function(e){i.status="uploaded",delete i.cancel,t.checkPendingUploads(),setTimeout((function(){t.recordedFilesToUpload.splice(t.recordedFilesToUpload.findIndex((function(e){return e.uuid===i.uuid})),1),t.checkPendingUploads()}),3e3)})).catch((function(e){if(e.response&&e.response.data){var n=e.response.data||{},o=n.errors?formUtil.assignErrors(n.errors):{};i.error=o.message,i.status="error"}else i.status="cancelled";t.checkPendingUploads()}))}},s=t.recordedFilesToUpload.length-1;s>=0&&a>0;s--)r(s)}),1e3,{leading:!0,trailing:!1});if(e&&e.uuid){var n=($t("meeting.meeting_recording")+"-"+w.i({moment:!0}).unix()).kebabCase()+".webm";this.recordedFilesToUpload||(this.recordedFilesToUpload=[]),this.recordedFilesToUpload.unshift({uuid:uuid(),chunk:e.chunk,blob:e.blob,mime:e.blob.type,requestUuid:e.uuid,order:e.order,status:"waiting",name:n,progress:0,error:null}),i(),this.checkPendingUploads()}else i()},uploadRecorded:function(e,t,i){var n=this,o=function(e){var t=URL.createObjectURL(e),o=document.createElement("a");u.invokeSaveAsDialog(e,i),o.style.display="none",o.href=t,o.download=i,document.body.appendChild(o),setTimeout((function(){document.body.removeChild(o),window.URL.revokeObjectURL(o),n.recorded=!1}),100)},a=this.mediaConfigurations.recording&&this.mediaConfigurations.recording.mimeType?this.mediaConfigurations.recording.mimeType:"video/webm",r=new File([e],i,{type:a});r.size>this.configs.system.postMaxSize?this.$toasted.error(this.$t("global.file_too_large",{attribute:r.name}),this.$toastConfig.error):(this.recordedFilesToUpload||(this.recordedFilesToUpload=[]),this.recordedFilesToUpload.unshift({uuid:uuid(),chunk:!1,blob:e,file:r,status:"waiting",progress:0,error:null}),function(){if(n.recordedFilesToUpload.filter((function(e){return"waiting"===e.status&&!e.chunk})).length)for(var e=[],t=v.a.CancelToken,i=function(i){var a=n.recordedFilesToUpload[i];if(a.download=o,e[i]=function(e){a.progress=Math.round(100*e.loaded/e.total)},"waiting"===a.status){var r=new FormData;r.append("file",a.file),r.append("mime",a.file.type),r.append("request_uuid",a.uuid),a.status="uploading";var s=new t((function(e){a.cancel=e}));T.c({url:"/".concat(n.initUrl,"/").concat(n.uuid,"/recordings"),data:r,silent:!0},e[i],s).then((function(e){a.status="uploaded",delete a.cancel,n.checkPendingUploads(),setTimeout((function(){n.recordedFilesToUpload.splice(n.recordedFilesToUpload.findIndex((function(e){return e.uuid===a.uuid})),1),n.checkPendingUploads()}),3e3)})).catch((function(e){if(e.response&&e.response.data){var t=e.response.data||{},i=t.errors?formUtil.assignErrors(t.errors):{};a.error=i.message,a.status="error",n.$toasted.error(i.message,n.$toastConfig.error)}else a.status="cancelled";n.checkPendingUploads()}))}},a=n.recordedFilesToUpload.length-1;a>=0;a++)i(a)}()),this.checkPendingUploads(),t.reset(),t=null,this.rtcmConnection&&(this.rtcmConnection.recorder=null)},startRecording:function(){var e=this;if(this.$gaEvent("engagement","startRecording"),this.pageConfigs.enableRecording&&this.entity.canModerate){this.recording=!0,this.recorded=!1,this.configs.meeting.debugMode?this.mediaConfigurations.recording.disableLogs=!1:this.mediaConfigurations.recording.disableLogs=!0;var t=this.rtcmConnection.recorder;if(!t){var i=[],n=[],o=uuid();this.rtcmConnection.streamEvents.selectAll().forEach((function(e){i.push(e.stream)})),this.pageConfigs.autoUploadRecording&&(this.mediaConfigurations.recording.ondataavailable=function(t){n.push(t),e.uploadRecording({uuid:o,chunk:!0,blob:t,order:n.length})}),t=u(i,this.mediaConfigurations.recording),this.rtcmConnection.recorder=t,t.startRecording();var a=(new Date).getTime();window.recordingDurationInterval&&(this.recordingDuration=null,clearInterval(window.recordingDurationInterval)),window.recordingDurationInterval=window.setInterval((function(){e.recordingDuration=Object(C.b)(((new Date).getTime()-a)/1e3)}),1e3),t=null}}},pauseRecording:function(){this.$gaEvent("engagement","pauseRecording"),this.recordingPaused=!0;var e=this.rtcmConnection.recorder;if(!e)return alert("No recorder found!");e.pauseRecording(),window.recordingDurationInterval&&clearInterval(window.recordingDurationInterval),e=null},resumeRecording:function(){var e=this;this.$gaEvent("engagement","resumeRecording"),this.recordingPaused=!1;var t=this.rtcmConnection.recorder;if(!t)return alert("No recorder found!");t.resumeRecording();var i=(new Date).getTime(),n=Object(C.f)(this.recordingDuration||"00:00");window.recordingDurationInterval&&clearInterval(window.recordingDurationInterval),window.recordingDurationInterval=window.setInterval((function(){e.recordingDuration=Object(C.b)(n+((new Date).getTime()-i)/1e3)}),1e3),t=null},stopRecording:function(){var e=this;this.$gaEvent("engagement","stopRecording"),this.checkPendingUploads(),this.recording=!1,this.recorded=!0;var t=this.rtcmConnection.recorder;if(!t)return alert("No recorder found!");t.stopRecording((function(){window.recordingDurationInterval&&(e.recordingDuration=null,clearInterval(window.recordingDurationInterval),window.recordingDurationInterval=null);var i=($t("meeting.meeting_recording")+"-"+w.i({moment:!0}).unix()).kebabCase()+".webm";u.getSeekableBlob(t.getBlob(),(function(n){e.checkPendingUploads(),e.pageConfigs.autoUploadRecording?(t.reset(),t=null,e.rtcmConnection&&(e.rtcmConnection.recorder=null)):e.pageConfigs.autoUploadRecorded?e.uploadRecorded(n,t,i):swtAlert.fire({title:$t("meeting.recorded_meeting"),allowOutsideClick:!1,allowEscapeKey:!1,position:"bottom",showDenyButton:!0,showCancelButton:!0,confirmButtonText:'<i class="fas fa-download"></i> '.concat($t("general.download")),denyButtonText:'<i class="fas fa-upload"></i> '.concat($t("general.upload")),cancelButtonText:"".concat($t("general.cancel")),customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger",denyButton:"btn btn-primary"}}).then((function(o){if(o.isConfirmed){var a=URL.createObjectURL(n),r=document.createElement("a");u.invokeSaveAsDialog(n,i),r.style.display="none",r.href=a,r.download=i,document.body.appendChild(r),setTimeout((function(){document.body.removeChild(r),window.URL.revokeObjectURL(r),e.recorded=!1}),100),t.reset(),t=null,e.rtcmConnection&&(e.rtcmConnection.recorder=null),e.checkPendingUploads()}else{if(!o.isDenied)return o.dismiss,R.a.DismissReason.cancel,t.reset(),t=null,e.rtcmConnection&&(e.rtcmConnection.recorder=null),void e.checkPendingUploads();e.uploadRecorded(n,t,i),e.checkPendingUploads()}})),e.checkPendingUploads()}))}))},toggleHandUp:function(){var e=this;this.$gaEvent("engagement","toggleHandUp"),window.lowerHandTimer&&(clearTimeout(window.lowerHandTimer),window.lowerHandTimer=null);var t=this.$refs.videos.find((function(t){return t.id===e.localVideo.id})),i=this.videoList.findIndex((function(t){return t.id===e.localVideo.id}));if(t&&t.srcObject){var n=t.srcObject;this.isHandUp=!this.isHandUp,this.videoList[i].isHandUp=this.isHandUp,this.emitSocketEvents("remoteHandToggled",{isHandUp:this.isHandUp,streamid:n.streamid}),this.isHandUp&&(window.lowerHandTimer=setTimeout((function(){e.toggleHandUp()}),3e4)),this.rtcmConnection.extra.isHandUp=this.isHandUp,this.updateExtraData()}else this.localVideo=null},toggleAudio:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pageConfigs.enableAudio=!i&&!this.pageConfigs.enableAudio,this.rtcmConnection&&(this.rtcmConnection.extra.audioMuted=!this.pageConfigs.enableAudio,this.updateExtraData()),this.$refs.videos&&this.$refs.videos.length){var n=this.$refs.videos.find((function(e){return e.id===t.localVideo.id})),o=this.videoList.findIndex((function(e){return e.id===t.localVideo.id}));if(n&&n.srcObject){var a=n.srcObject,r=a.getAudioTracks();r.forEach((function(e){t.pageConfigs.enableAudio?(e.enabled=!0,t.videoList[o].audioMuted=!1):(e.enabled=!1,t.videoList[o].audioMuted=!0)})),this.emitSocketEvents("remoteMutedUnmuted",{audioEnabled:this.pageConfigs.enableAudio,streamid:a.streamid})}else this.localVideo=null}else this.setupGreenRoom()},toggleVideo:function(){var e=this;if(this.pageConfigs.enableVideo=!this.pageConfigs.enableVideo,this.rtcmConnection&&(this.rtcmConnection.extra.videoMuted=!this.pageConfigs.enableVideo,this.updateExtraData()),this.$refs.videos&&this.$refs.videos.length){var t=this.$refs.videos.find((function(t){return t.id===e.localVideo.id})),i=this.videoList.findIndex((function(t){return t.id===e.localVideo.id}));if(t&&t.srcObject){var n=t.srcObject;n.getVideoTracks().forEach((function(t){e.pageConfigs.enableVideo?(t.enabled=!0,e.videoList[i].videoMuted=!1):(t.enabled=!1,e.videoList[i].videoMuted=!0)})),this.emitSocketEvents("remoteMutedUnmuted",{videoEnabled:this.pageConfigs.enableVideo,streamid:n.streamid})}else this.localVideo=null}else this.setupGreenRoom()},toggleRemoteAudio:function(e,t){e.muted?(this.videoList[t].muted=!1,this.$refs.videos[t].muted=!1):(this.videoList[t].muted=!0,this.$refs.videos[t].muted=!0)},toggleRemoteAudioSource:function(e,t){this.emitSocketEvents("muteUnmuteRemote",e)},toggleEleFullScreen:function(e,t){var i=this,n=this.$refs.videoListEle;this.fullScreenItemId=e.id,this.$fullscreen.toggle(n,{wrap:!1,callback:function(e){i.fullScreenInOn=e}})},toggleFullScreen:function(e){h.a.isEnabled&&(e?h.a.request():h.a.exit())},toggleFooterAutoHide:function(){this.pageConfigs.footerAutoHide=!this.pageConfigs.footerAutoHide,this.$gaEvent("engagement","toggleFooterAutoHide")},toggleLayout:function(e){this.pageConfigs.layout=e||this.pageConfigs.layout,this.pageConfigs.disableScroll="grid"===this.pageConfigs.layout||(this.entity.config&&this.entity.config.hasOwnProperty("disableScroll")?this.entity.config.disableScroll:this.pageConfigs.disableScroll),this.$gaEvent("engagement","toggleLayout",e)},toggleFileSharing:function(){this.showFileSharing=!this.showFileSharing,this.$gaEvent("engagement","toggleFileSharing")},toggleAgenda:function(){this.showAgenda=!this.showAgenda,this.$gaEvent("engagement","toggleAgenda")},toggleMeetingInfo:function(){this.showMeetingInfo=!this.showMeetingInfo,this.$gaEvent("engagement","toggleMeetingInfo")},toggleWhiteboard:function(){this.$gaEvent("engagement","toggleWhiteboard"),this.showWhiteboard?(this.pageConfigs.layout=this.pageConfigs.lastLayout,this.showWhiteboard=!1):(this.canvasDesigner||this.initWhiteboard(),this.pageConfigs.lastLayout=this.pageConfigs.layout,this.pageConfigs.layout="presentation",this.showWhiteboard=!0)},changeFocus:function(e){this.videoList.forEach((function(t){t.maximized=t.id===e.id}))},disableMirror:function(e,t){this.videoList[t].disableMirror=!this.videoList[t].disableMirror},kickRemoteUser:function(e,t){var i=this;formUtil.confirmAction().then((function(t){if(t.value){var n=i.$refs.videos.find((function(t){return t.id===e.id}));if(n&&n.srcObject){var o=n.srcObject;i.rtcmConnection.removeStream(o.streamid),i.emitSocketEvents("banAttendee",e),i.Custom({url:"/".concat(i.initUrl,"/").concat(i.uuid,"/invitees/").concat(e.extra.uuid,"/block"),method:"post"}).then((function(e){i.$toasted.success(e.message,i.$toastConfig)})).catch((function(e){formUtil.handleErrors(e)}))}}else t.dismiss,R.a.DismissReason.cancel}))},switchCamera:function(){this.mediaConfigurations.facingMode="user"===this.mediaConfigurations.facingMode?"environment":"user",this.applyMediaConstraints()},stopStream:function(e){var t=this.$refs.videos.find((function(t){return t.id===e.id}));if(t&&t.srcObject){var i=t.srcObject;this.stopStream(i)}},afterJoiningChannel:function(e){this.membersLive=e},newMemberJoining:function(e){this.membersLive.push(e)},memberLeaving:function(e){this.membersLive=this.membersLive.filter((function(t){return t.uuid!==e.uuid}))},updateEntityBackup:function(e){var t=_.cloneDeep(e);this.entityDatesBackup.status=t.status,this.entityDatesBackup.startDateTime=t.startDateTime,this.entityDatesBackup.plannedStartDateTime=t.plannedStartDateTime,this.entityDatesBackup.startedAt=t.startedAt,this.entityDatesBackup.estimatedEndTime=t.estimatedEndTime,this.entityDatesBackup.endedAt=t.endedAt},meetingStatusChanged:function(e){var t=this,i=function(e){return w.e(e,t.vars.serverDateTimeFormat)};if(e.uuid===this.entity.uuid){if(this.entity.status===e.status&&!e.delayed&&!e.updated)return;if(e.updated&&this.stopAutoEndMeeting(),this.updateEntityBackup(e),this.entity.status=e.status,this.entity.startDateTime=i(e.startDateTime),this.entity.plannedStartDateTime&&(this.entity.plannedStartDateTime=i(e.plannedStartDateTime)),this.entity.startedAt&&(this.entity.startedAt=i(e.startedAt)),this.entity.estimatedEndTime&&(this.entity.estimatedEndTime=i(e.estimatedEndTime)),this.entity.status===e.status&&!e.delayed)return;var n=e.status;"scheduled"===n&&e.delayed&&(n="delayed");this.$toasted.success($t({live:"meeting.is_live_now",delayed:"meeting.meeting_delayed",cancelled:"meeting.meeting_cancelled",ended:"meeting.meeting_ended"}[n]),this.$toastConfig)}},gotNewMessage:function(){this.pageConfigs.enableChat&&this.configs.chat&&this.configs.chat.enabled&&(this.pageConfigs.showChat&&!this.fullScreenInOn||(this.newMessages=!0,Object(b.a)()))},meetingRoomCreated:function(e){var t=this,i=e.hasOwnProperty("data")&&e.data?e.data:e;this.entity.roomId=i.roomId,this.initMediaAndRtcmConnection(),this.rtcmConnection.checkPresence(this.entity.roomId,(function(e,i){t.roomIdAlive=!!e}))},banAttendee:function(e){var t=e.hasOwnProperty("data")&&e.data?e.data:e;this.enableLogs&&console.log(t);var i=this.$refs.videos.find((function(e){return e.id===t.id}));if(i&&i.srcObject){var n=i.srcObject;this.rtcmConnection.removeStream(n.streamid)}e.uuid===this.userUuid&&(this.closeConnectionAndStream(),this.getInitialData()),this.$toasted.info($t("meeting.ban_notification"),this.$toastConfig.info)},streamRemoved:function(e){var t=e.hasOwnProperty("data")&&e.data?e.data:e;this.rtcmConnection&&t.id&&this.rtcmConnection.removeStream(t.id),this.rtcmOnStreamEnded(t)},meetingEnded:function(e){e.hasOwnProperty("data")&&e.data&&e.data;this.closeConnectionAndStream(),this.getInitialData()},joinChannel:function(){window.Echo&&(this.entity.isPam?window.meetingChannel=window.Echo.channel("MeetingGuest.".concat(this.uuid)):(window.meetingChannel=window.Echo.join("Meeting.".concat(this.uuid)),window.meetingChannel.here(this.afterJoiningChannel).joining(this.newMemberJoining).leaving(this.memberLeaving)),window.meetingChannel.listen("MeetingStatusChanged",this.meetingStatusChanged).listen("NewMessage",this.gotNewMessage).listen("MeetingRoomCreated",this.meetingRoomCreated).listen("PublicMeetingRoomCreated",this.meetingRoomCreated))},whisperChannel:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&e.whisper&&t&&e.whisper(t,i)},emitSocketEvents:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.rtcmConnection&&this.rtcmConnection.socket&&e){this.enableLogs&&console.log("Emitting on Socket: ",e);try{this.rtcmConnection.socket.emit("Whisper",{event:e,data:t})}catch(e){}}},rtcmOnNewParticipant:function(e,t){var i=this;if(this.enableLogs&&(console.log("On rtcmOnNewParticipant - participantId : ",e),console.log("On rtcmOnNewParticipant - userPreferences : ",t)),!(this.rtcmConnection.getAllParticipants().length>=this.rtcmConnection.maxParticipantsAllowed)){var n=t.connectionDescription.remoteUserId;this.alreadyAcceptedParticipants[n]?this.rtcmConnection.acceptParticipationRequest(e,t):this.pageConfigs.askHostBeforeJoining?swtAlert.fire({title:$t("meeting.user_trying_to_join",{attribute:t.extra.name||n}),allowOutsideClick:!1,showCancelButton:!0,confirmButtonText:$t("general.accept"),cancelButtonText:$t("general.reject")}).then((function(o){return o.value?(i.rtcmConnection.acceptParticipationRequest(e,t),void(i.alreadyAcceptedParticipants[n]=!0)):(o.dismiss,void R.a.DismissReason.cancel)})):this.rtcmConnection.acceptParticipationRequest(e,t)}},rtcmOnOpen:function(e){var t=this;this.canvasDesigner&&this.rtcmConnection.isInitiator&&setTimeout((function(){t.canvasDesigner.renderStream()}),1e3)},rtcmOnClose:function(e){},rtcmOnMessage:function(e){},rtcmOnUserStatusChanged:function(e){var t=this,i=this.rtcmConnection.userid;this.enableLogs&&(console.log("On rtcmOnUserStatusChanged - event : ",e),console.log("On rtcmOnUserStatusChanged - localUserId : ",i));var n=this.videoList.filter((function(t){return t.id===e.userid||t.streamUserId===e.userid||e.extra&&t.uuid===e.extra.uuid}));e&&"online"===e.status?n&&n.length?n.forEach((function(i){if(i.username!==e.extra.username){var n=t.videoList.findIndex((function(e){return e.uuid===i.uuid&&(!(e.hasOwnProperty("id")&&i.hasOwnProperty("id"))||e.hasOwnProperty("id")&&i.hasOwnProperty("id")&&e.id===i.id)}));t.videoList[n].username=e.extra.username,t.videoList[n].name=e.extra.name,t.videoList[n].extra&&(t.videoList[n].extra.username=e.extra.username,t.videoList[n].extra.name=e.extra.name)}})):e.extra&&e.extra.hasOwnProperty("username")&&e.extra.username&&function(e){var n=e.userid,o=e.userid===i?"local":"remote";if(t.rtcmConnection.isInitiator||t.entity.canModerate||"local"===o||"live_class"!==t.entity.type.uuid&&"webinar"!==t.entity.type.uuid){var a=t.videoList.find((function(t){return t.id===e.streamid}));if(t.videoList.length>1&&t.recheckLiveParticipants(null),void 0===a){var r=P(P({id:n,streamUserId:e.userid,muted:!0},e.extra),{},{extra:e.extra,maximized:!1,local:"local"===o,screen:!1,status:!0,hasAudio:!1,hasVideo:!1,hasStream:!1,speaking:!1,disableMirror:!1});t.videoList.push(r)}t.isLoading=!1}}(e):n&&n.length&&n.forEach((function(e){t.rtcmConnection.removeStream(e.id),t.recheckLiveParticipants(P(P({},e),{},{streamid:e.id})),t.autoSetVideoMaximized()}))},rtcmOnLeave:function(e){this.enableLogs&&console.log("On rtcmOnLeave - event : ",e)},rtcmOnSpeaking:function(e){var t=this,i=this.videoList.findIndex((function(t){return t.id===e.streamid}));window.onSilenceTimeoutObj["index"+i]&&clearTimeout(window.onSilenceTimeoutObj["index"+i]),this.videoList[i]&&(this.videoList[i].speaking=!0),window.onSilenceTimeoutObj["index"+i]=setTimeout((function(){t.videoList[i]&&(t.videoList[i].speaking=!1)}),5e3)},rtcmOnSilence:function(e){var t=this,i=this.videoList.findIndex((function(t){return t.id===e.streamid}));window.onSilenceTimeoutObj["index"+i]&&clearTimeout(window.onSilenceTimeoutObj["index"+i]),window.onSilenceTimeoutObj["index"+i]=setTimeout((function(){t.videoList[i]&&(t.videoList[i].speaking=!1)}),2e3)},rtcmOnVolumeChange:function(e){},rtcmOnStream:function(e){var t=this;if(this.enableLogs&&console.log("On Stream: ",e),this.rtcmConnection.isInitiator||this.entity.canModerate||"local"===e.type||"live_class"!==this.entity.type.uuid&&"webinar"!==this.entity.type.uuid||e.extra.isInitiator){var i=e.streamid,n=this.videoList.findIndex((function(t){return t.id===e.streamid||t.id===e.userid})),o=e.stream.idInstance?JSON.parse(e.stream.idInstance):e.stream,a=!(o.isAudio||o.audio||o.isVideo||o.video||o.isScreen||o.screen)&&e.extra.hasWhiteboard;if(o.isScreen&&"local"===e.type)this.localScreenStreamid=e.streamid,e.stream.getTracks().forEach((function(e){e.addEventListener("ended",t.stopSharingScreen)}));else a&&"local"===e.type&&(this.localWhiteboardStreamid=e.streamid);this.videoList.length>1&&this.recheckLiveParticipants(null);var r=P(P({id:i,streamUserId:e.userid,muted:"local"===e.type},e.extra),{},{extra:e.extra,maximized:"local"===e.type&&!o.isScreen&&!a,local:"local"===e.type,screen:e.extra.screenStreamId&&i===e.extra.screenStreamId||this.localScreenStreamid===i||o.isScreen,whiteboard:e.extra.whiteboardStreamId&&i===e.extra.whiteboardStreamId||a,status:!0,hasAudio:o.isAudio||o.audio,hasVideo:o.isVideo||o.video||o.isScreen||a||o.screen,hasStream:!0,speaking:!1,disableMirror:!1});if((r.screen||r.whiteboard)&&(r.videoMuted=!1),-1===n?"local"===e.type&&this.localScreenStreamid!==r.id&&this.localWhiteboardStreamid!==r.id?this.localVideo&&this.needStreamAddOrReplace?r.id=i=this.localVideo.id:(this.localVideo=r,this.videoList.push(r)):this.videoList.push(r):-1===n||this.videoList[n].hasStream||("local"===e.type&&this.localScreenStreamid!==r.id&&this.localWhiteboardStreamid!==r.id?this.localVideo&&this.needStreamAddOrReplace?r.id=i=this.localVideo.id:(this.localVideo=r,this.videoList[n]=Object.assign({},this.videoList[n],r)):this.videoList[n]=Object.assign({},this.videoList[n],r)),this.autoSetVideoMaximized(),this.pageConfigs.enableRecording&&this.entity.canModerate){var s=this.rtcmConnection.recorder;if(s){var c=s.getInternalRecorder();this.recording&&c&&c.addStreams(e.stream)}else this.pageConfigs.enableAutoRecording&&setTimeout((function(){t.startRecording()}),1e3)}setTimeout((function(){t.enableLogs&&(console.log("$refs : ",t.$refs),console.log("$refs.videos : ",t.$refs.videos));for(var n=0,r=t.$refs.videos.length;n<r;n++)if(t.$refs.videos[n].id===i||t.$refs.videos[n].id===e.userid){t.$refs.videos[n].srcObject=e.stream;break}"local"===e.type&&t.applyOnStartConfigs(),setTimeout((function(){!t.pageConfigs.speechDetection||a||o.isScreen||t.initHark({stream:e.stream,streamedObject:e,connection:t.rtcmConnection})}),1e3)}),500),this.isLoading=!1}},rtcmOnStreamEnded:function(e){this.recheckLiveParticipants(e),this.autoSetVideoMaximized()},rtcmOnError:function(e){this.isLoading=!1},rtcmOnMediaError:function(e){var t=this;this.isLoading=!1,window.currentUserMediaRequest&&(window.currentUserMediaRequest.mutex=!1),this.enableLogs&&console.log("onMediaError : ",e),this.mediaDeviceIssue=!0,Object(b.e)(e).alert.then((function(i){"NotFoundError"===e.name||"NotReadableError"===e.name||"OverconstrainedError"===e.name?(t.applyMediaConstraints(!0),t.$toasted.info($t("meeting.media_devices.setup_reset_try_again"),t.$toastConfig.info)):"NotAllowedError"!==e.name&&"PermissionDeniedError"!==e.name||(t.permissionRejected=!0),i.value||(t.isLoading=!1,i.dismiss,R.a.DismissReason.cancel)}))},rtcmOnMute:function(e){this.enableLogs&&console.log("On rtcmOnMute: ",e);var t=this.videoList.findIndex((function(t){return t.id===e.streamid})),i=this.$refs.videos.find((function(t){return t.id===e.streamid}));"video"===e.muteType?this.videoList[t].videoMuted=!0:"audio"===e.muteType?this.videoList[t].muted=!0:(this.videoList[t].videoMuted=!0,this.videoList[t].muted=!0,i.srcObject=null)},rtcmOnUnmute:function(e){this.enableLogs&&console.log(e);var t=this.videoList.findIndex((function(t){return t.id===e.streamid})),i=this.$refs.videos.find((function(t){return t.id===e.streamid}));"video"===e.unmuteType?this.videoList[t].videoMuted=!1:"audio"===e.unmuteType?this.videoList[t].muted=!1:(this.videoList[t].videoMuted=!1,this.videoList[t].muted=!1,i.srcObject=e)},rtcmOnRemoteMuteUnmuted:function(e){var t=e.hasOwnProperty("data")&&e.data?e.data:e;this.enableLogs&&console.log(t);var i=this.videoList.findIndex((function(e){return e.id===t.streamid}));-1!==i&&this.videoList[i]&&(t.hasOwnProperty("audioEnabled")?t.audioEnabled?this.videoList[i].audioMuted=!1:this.videoList[i].audioMuted=!0:t.hasOwnProperty("videoEnabled")&&(t.videoEnabled?this.videoList[i].videoMuted=!1:this.videoList[i].videoMuted=!0))},rtcmOnSnapshotTaken:function(e){var t=e.hasOwnProperty("data")&&e.data?e.data:e;this.enableLogs&&console.log("rtcmOnSnapshotTaken",t),this.pageConfigs.enableSnapshotAlert&&t&&t.byUser&&t.ofUser&&(this.pageConfigs.snapshotAlertToUserOnly?this.pageConfigs.snapshotAlertToModerators?this.entity.canModerate&&(this.$toasted.info($t("meeting.snapshot_taken_notification_user",{by_user:t.byUser.name,of_user:t.ofUser.name}),this.$toastConfig.info),Object(b.c)()):this.userUuid===t.ofUser.uuid&&(this.$toasted.info($t("meeting.snapshot_taken_notification_your",{by_user:t.byUser.name}),this.$toastConfig.info),Object(b.c)()):(this.userUuid===t.ofUser.uuid?this.$toasted.info($t("meeting.snapshot_taken_notification_your",{by_user:t.byUser.name}),this.$toastConfig.info):this.$toasted.info($t("meeting.snapshot_taken_notification_user",{by_user:t.byUser.name,of_user:t.ofUser.name}),this.$toastConfig.info),Object(b.c)()))},rtcmOnMeetingUpdated:function(e){var t=this,i=e.hasOwnProperty("data")&&e.data?e.data:e;if(this.enableLogs&&console.log("rtcmOnMeetingUpdated",i),i.dateUpdated){var n=function(e){return w.e(e,t.vars.serverDateTimeFormat)};this.updateEntityBackup(i),this.entity.status=i.status,this.entity.startDateTime=n(i.startDateTime),i.plannedStartDateTime&&(this.entity.plannedStartDateTime=n(i.plannedStartDateTime)),i.startedAt&&(this.entity.startedAt=n(i.startedAt)),i.estimatedEndTime&&(this.entity.estimatedEndTime=n(i.estimatedEndTime)),i.endedAt&&(this.entity.endedAt=n(i.endedAt))}i.endTimeSnoozed&&this.autoEndingToast&&this.autoEndingToast.close&&_.isFunction(this.autoEndingToast.close)&&(this.stopAutoEndMeeting(),R.e.close(),this.autoEndingToast=null),i.autoEndCancelled&&this.autoEndingToast&&this.autoEndingToast.close&&_.isFunction(this.autoEndingToast.close)&&(this.stopAutoEndMeeting(),this.pageConfigs.autoEndMeeting=!1,R.e.close(),this.autoEndingToast=null)},rtcmOnRemoteHandToggled:function(e){var t=e.hasOwnProperty("data")&&e.data?e.data:e;if(this.enableLogs&&console.log(t),t&&t.streamid&&this.rtcmConnection.streamEvents[t.streamid]){var i=this.videoList.findIndex((function(e){return e.id===t.streamid}));t.hasOwnProperty("isHandUp")&&(t.isHandUp?(this.videoList[i].isHandUp=!0,this.$toasted.info($t("meeting.handup_notification",{attribute:this.videoList[i].name}),this.$toastConfig.info)):this.videoList[i].isHandUp=!1)}},rtcmOnMuteUnmuteRemote:function(e){var t=e.hasOwnProperty("data")&&e.data?e.data:e;this.enableLogs&&console.log(t);var i=this.$refs.videos.find((function(e){return e.id===t.id}));i&&i.srcObject&&this.toggleAudio()},rtcmOnUserIdAlreadyTaken:function(e,t){this.rtcmConnection.userid=t},initMediaAndRtcmConnection:function(){this.rtcmConnection||(this.rtcmConnection=new l.a,this.rtcmConnection.socketURL=window.atob(this.socketURL),this.configs.signalServers&&this.configs.signalServers.url&&(this.rtcmConnection.socketURL=this.configs.signalServers.url),this.rtcmConnection.autoCreateMediaElement=!1,this.configs.meeting&&(this.configs.meeting.debugMode?this.rtcmConnection.enableLogs=!0:this.rtcmConnection.enableLogs=!1,this.configs.meeting.forceTurn&&(this.rtcmConnection.candidates={turn:!0,stun:!1,host:!1})),this.rtcmConnection.onopen=this.rtcmOnOpen,this.rtcmConnection.onclose=this.rtcmOnClose,this.rtcmConnection.onleave=this.rtcmOnLeave,this.rtcmConnection.onmessage=this.rtcmOnMessage,this.rtcmConnection.onNewParticipant=this.rtcmOnNewParticipant,this.rtcmConnection.onUserStatusChanged=this.rtcmOnUserStatusChanged,this.rtcmConnection.onstream=this.rtcmOnStream,this.rtcmConnection.onstreamended=this.rtcmOnStreamEnded,this.rtcmConnection.onmute=this.rtcmOnMute,this.rtcmConnection.onunmute=this.rtcmOnUnmute,this.rtcmConnection.onMediaError=this.rtcmOnMediaError,this.rtcmConnection.onUserIdAlreadyTaken=this.rtcmOnUserIdAlreadyTaken,this.pageConfigs.speechDetection&&(this.rtcmConnection.onspeaking=this.rtcmOnSpeaking,this.rtcmConnection.onsilence=this.rtcmOnSilence,this.rtcmConnection.onvolumechange=this.rtcmOnVolumeChange,window.onSilenceTimeoutObj={}),this.rtcmConnection.setCustomSocketEvent("Whisper"),this.fileSharingConnection=this.rtcmConnection),this.getMediaConstraints();this.rtcmConnection.BandwidthHandler;this.rtcmConnection.bandwidth={audio:"auto"!==this.mediaConfigurations.bandwidth.audio&&this.mediaConfigurations.bandwidth.audio,video:"auto"!==this.mediaConfigurations.bandwidth.video&&this.mediaConfigurations.bandwidth.video,screen:"auto"!==this.mediaConfigurations.bandwidth.screen&&this.mediaConfigurations.bandwidth.screen},this.rtcmConnection.iceServers=[{urls:["stun.l.google.com:19302","stun1.l.google.com:19302","stun2.l.google.com:19302","stun3.l.google.com:19302","stun4.l.google.com:19302"]}],this.pageConfigs.maxParticipantCount&&(this.rtcmConnection.maxParticipantsAllowed=this.pageConfigs.maxParticipantCount),this.configs.iceServers.length&&(this.rtcmConnection.iceServers=k(this.configs.iceServers)),this.rtcmConnection.session=P({},this.meetingRulesHost.session),this.rtcmConnection.sdpConstraints.mandatory=P({},this.meetingRulesHost.mandatory),this.rtcmConnection.mediaConstraints={video:!!this.meetingRulesHost.mediaConstraints.video&&this.videoConstraints,audio:!!this.meetingRulesHost.mediaConstraints.audio&&this.audioConstraints,screen:this.meetingRulesHost.mediaConstraints.screen}},initSocketListener:function(){if(this.rtcmConnection&&this.rtcmConnection.socket){var e={removedStream:this.streamRemoved,banAttendee:this.banAttendee,muteUnmuteRemote:this.rtcmOnMuteUnmuteRemote,remoteMutedUnmuted:this.rtcmOnRemoteMuteUnmuted,remoteHandToggled:this.rtcmOnRemoteHandToggled,meetingEnded:this.meetingEnded,snapshotTaken:this.rtcmOnSnapshotTaken,meetingUpdated:this.rtcmOnMeetingUpdated};this.rtcmConnection.socket.on("Whisper",(function(t){t&&e.hasOwnProperty(t.event)&&e[t.event](t.data)}))}},initCanvasDesigner:function(){this.canvasDesigner=new CanvasDesigner,this.canvasDesigner.widgetHtmlURL="/js/canvas-designer/widget.html",this.canvasDesigner.widgetJsURL="/js/canvas-designer/widget.min.js"},initWhiteboard:function(){var e=this;this.videoList.length<1||!this.$refs.whiteboard||!CanvasDesigner||(this.canvasDesigner||this.initCanvasDesigner(),this.canvasDesigner.addSyncListener((function(t){e.rtcmConnection.send(t)})),this.canvasDesigner.setSelected("pencil"),this.canvasDesigner.setTools({pencil:!0,text:!0,image:!0,pdf:!0,eraser:!0,line:!0,arrow:!0,dragSingle:!0,dragMultiple:!0,arc:!0,rectangle:!0,quadratic:!0,bezier:!0,marker:!0,zoom:!1,lineWidth:!0,colorsPicker:!0,extraOptions:!1,code:!1,undo:!0}),this.canvasDesigner.iframe||this.canvasDesigner.appendTo(this.$refs.whiteboard,(function(){e.rtcmConnection.extra.hasWhiteboard=!0,e.updateExtraData(),e.canvasDesigner.captureStream((function(t){e.rtcmConnection.addStream(t),e.rtcmConnection.onstream({streamid:t.id,stream:t,userid:e.rtcmConnection.userid,type:"local",extra:e.rtcmConnection.extra})}))})))},updateExtraData:function(){this.rtcmConnection&&this.rtcmConnection.socket&&this.rtcmConnection.updateExtraData()},destroyWhiteboard:function(){var e=this;if(this.canvasDesigner){this.canvasDesigner.destroy(),this.canvasDesigner=null;var t=this.$refs.videos.find((function(t){return t.id===e.localWhiteboardStreamid}));t&&t.srcObject?(this.rtcmConnection&&this.localWhiteboardStreamid&&(this.rtcmConnection.removeStream(this.localWhiteboardStreamid),this.rtcmOnStreamEnded({id:this.localWhiteboardStreamid}),this.videoList.length>1&&this.recheckLiveParticipants({streamid:this.localWhiteboardStreamid}),this.autoSetVideoMaximized()),this.emitSocketEvents("removedStream",t.srcObject),this.localWhiteboardStreamid=null):this.localWhiteboardStreamid=null}this.rtcmConnection.extra.hasWhiteboard=!1,this.updateExtraData()},hideAndDestroyWhiteboard:function(){var e=this;formUtil.confirmAction().then((function(t){t.value?(e.pageConfigs.layout=e.pageConfigs.lastLayout,e.showWhiteboard=!1,e.destroyWhiteboard()):(t.dismiss,R.a.DismissReason.cancel)}))},getMediaConstraints:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.needStreamAddOrReplace=!1,t)return this.audioConstraints={sampleSize:16,channelCount:2,echoCancellation:!1},void(this.videoConstraints={width:{min:426,ideal:1280,max:4096},height:{min:240,ideal:720,max:2160}});if(this.pageConfigs.enableAudio?this.mediaConfigurations.selectedAudioInput&&this.mediaConfigurations.selectedAudioInput.uuid&&"auto"!==this.mediaConfigurations.selectedAudioInput.uuid?(this.audioConstraints={deviceId:{ideal:this.mediaConfigurations.selectedAudioInput.uuid}},this.audioConstraints.hasOwnProperty("deviceId")&&this.mediaConfigurations.activeAudioInput!==this.audioConstraints.deviceId.ideal&&(this.needStreamAddOrReplace=!0)):this.audioConstraints=!0:this.audioConstraints=!1,this.pageConfigs.enableVideo){this.mediaConfigurations.selectedVideoInput&&this.mediaConfigurations.selectedVideoInput.uuid&&"auto"!==this.mediaConfigurations.selectedVideoInput.uuid?(this.videoConstraints={deviceId:{ideal:this.mediaConfigurations.selectedVideoInput.uuid}},this.videoConstraints.hasOwnProperty("deviceId")&&this.mediaConfigurations.activeVideoInput!==this.videoConstraints.deviceId.ideal&&(this.needStreamAddOrReplace=!0)):delete this.videoConstraints.deviceId,"auto"!==this.mediaConfigurations.facingMode?(this.videoConstraints.facingMode=this.mediaConfigurations.facingMode,this.mediaConfigurations.activeFacingMode!==this.videoConstraints.facingMode&&(this.needStreamAddOrReplace=!0)):this.videoConstraints.hasOwnProperty("facingMode")&&(this.mediaConfigurations.activeFacingMode!==this.videoConstraints.facingMode&&(this.needStreamAddOrReplace=!0),delete this.videoConstraints.facingMode),"auto"!==this.mediaConfigurations.frameRate?this.videoConstraints.frameRate=this.mediaConfigurations.frameRate:this.videoConstraints.hasOwnProperty("frameRate")&&delete this.videoConstraints.frameRate;var i=this.mediaDevices.resolutions.find((function(t){return t.label===e.mediaConfigurations.selectedResolution}));i&&"Auto"!==i.label?(this.videoConstraints.width=i.constraints.width,this.videoConstraints.height=i.constraints.height):(this.videoConstraints.hasOwnProperty("width")&&delete this.videoConstraints.width,this.videoConstraints.hasOwnProperty("height")&&delete this.videoConstraints.height)}else this.videoConstraints=!1},applyMediaConstraints:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.rtcmConnection&&this.localVideo&&(this.getMediaConstraints(e),this.rtcmConnection.mediaConstraints={video:!!this.meetingRulesHost.mediaConstraints.video&&this.videoConstraints,audio:!!this.meetingRulesHost.mediaConstraints.audio&&this.audioConstraints,screen:this.meetingRulesHost.mediaConstraints.screen},this.rtcmConnection.bandwidth={audio:"auto"!==this.mediaConfigurations.bandwidth.audio&&this.mediaConfigurations.bandwidth.audio,video:"auto"!==this.mediaConfigurations.bandwidth.video&&this.mediaConfigurations.bandwidth.video,screen:"auto"!==this.mediaConfigurations.bandwidth.screen&&this.mediaConfigurations.bandwidth.screen},this.mediaConfigurations.activeAudioInput=this.audioConstraints&&this.audioConstraints.hasOwnProperty("deviceId")?this.audioConstraints.deviceId.ideal:null,this.mediaConfigurations.activeVideoInput=this.videoConstraints&&this.videoConstraints.hasOwnProperty("deviceId")?this.videoConstraints.deviceId.ideal:null,this.mediaConfigurations.activeFacingMode=this.mediaConfigurations.facingMode,this.needStreamAddOrReplace?this.closeConnectionAndStream(!0):this.rtcmConnection.applyConstraints(this.rtcmConnection.mediaConstraints))},closeConnectionAndStream:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1?arguments[1]:void 0;if(this.stopKeepAlivePolling(),this.stopAutoEndMeeting(),this.autoEndingToast&&_.isEmpty(this.autoEndingToast)&&(R.e.close(),this.autoEndingToast=null),this.rtcmConnection)try{if(this.destroyWhiteboard(),this.rtcmConnection.attachStreams.forEach((function(e){e.stop()})),this.$refs.greenRoomVideo&&this.$refs.greenRoomVideo.srcObject){var n=this.$refs.greenRoomVideo.srcObject;n.stop(),this.localGreenRoomStream=null}else if(this.localGreenRoomStream){var o=this.localGreenRoomStream;o.stop(),this.localGreenRoomStream=null}this.localVideo&&this.emitSocketEvents("removedStream",this.localVideo),this.rtcmConnection.getAllParticipants().forEach((function(t){e.rtcmConnection.disconnectWith(t)})),this.rtcmConnection.leave(),this.rtcmConnection.closeSocket(),window.setTimeout((function(){e.localVideo=null,e.localScreenStreamid=null,e.localWhiteboardStreamid=null,e.localGreenRoomStream=null,e.rtcmConnection&&(e.rtcmConnection.recorder=null),e.rtcmConnection=null,t&&e.getOnline(),i&&_.isFunction(i)&&i()}),500)}catch(e){console.log("There are some errors"),console.error(e)}this.videoList=[]},initHark:function(e){if(window.hark&&this.pageConfigs.speechDetection){var t=e.streamedObject,i=e.stream,n=e.connection,o=f()(i,{});o.on("speaking",(function(){n.onspeaking(t)})),o.on("stopped_speaking",(function(){n.onsilence(t)})),window.harkInitiated=!0}},recheckLiveParticipants:function(e){var t=this,i=[];this.liveParticipants=this.rtcmConnection?this.rtcmConnection.getAllParticipants():[],this.videoList.forEach((function(n,o){var a=t.liveParticipants.findIndex((function(e){return e===n.streamUserId}));(!e||e&&n.id!==e.streamid)&&(n.local||!n.local&&-1!==a)||(n.status=!1),i.push(n)})),this.videoList=i,setTimeout((function(){t.videoList=t.videoList.filter((function(e){return e.status})),t.autoSetVideoMaximized()}),3e3)},autoSetVideoMaximized:function(){var e=this,t=function(t){e.videoList[t].maximized=!0,e.videoList=e.videoList.map((function(e,i){return e.maximized=!1,i===t&&(e.maximized=!0),e}))};if(this.videoList.length>1)if(-1===this.videoList.findIndex((function(e){return!e.local&&e.maximized&&e.status}))){var i=this.videoList.findIndex((function(e){return!e.local&&e.hasStream}));t(-1!==i?i:0)}else{var n=this.videoList.findIndex((function(e){return!e.local&&e.whiteboard&&e.status}));-1!==n&&this.videoList[n].whiteboard&&t(n)}else this.videoList.length&&t(0)},validateMediaDeviceRequest:function(e){var t={video:!!e.video,audio:!!e.audio,screen:!!e.screen};return this.pageConfigs.allowJoiningWithoutDevices&&(!t.audio||this.mediaDevices.audioInput&&this.mediaDevices.audioInput.length||(t.audio=!1),!t.video||this.mediaDevices.videoInput&&this.mediaDevices.videoInput.length||(t.video=!1)),t},openRoom:function(e){var t=this;this.enableLogs&&console.log("openRoom",e),this.rtcmConnection.session=P({},this.meetingRulesHost.session),this.videoList=[],this.getMediaConstraints();var i=this.meetingRulesHost;this.rtcmConnection.mediaConstraints={video:!!i.mediaConstraints.video&&this.videoConstraints,audio:!!i.mediaConstraints.audio&&this.audioConstraints,screen:i.mediaConstraints.screen},this.rtcmConnection.sdpConstraints.mandatory=P({},i.mandatory),this.rtcmConnection.autoCloseEntireSession=i.autoCloseEntireSession,this.rtcmConnection.enableScalableBroadcast=i.enableScalableBroadcast,this.rtcmConnection.enableScalableBroadcast&&(this.rtcmConnection.maxRelayLimitPerUser=i.maxRelayLimitPerUser),this.rtcmConnection.extra.isInitiator=!0,this.rtcmConnection.open(e,(function(i,n,o){t.enableLogs&&console.log("Room Opened: ",n),t.isLoading=!1,o?formUtil.handleErrors(o):!0===i&&(t.updatePageConfigs(!0),t.whisperChannel(window.meetingChannel,"MeetingRoomCreated",{roomId:e}),t.Custom({url:"/".concat(t.initUrl,"/").concat(t.uuid,"/alert"),method:"post",params:{type:"MeetingRoomCreated",data:{roomId:e}}}).catch((function(e){t.isLoading=!1,formUtil.handleErrors(e)})),t.initSocketListener(),t.$toasted.success($t("meeting.meeting_created"),t.$toastConfig))}))},joinRoom:function(e){var t=this;this.rtcmConnection.session=P({},this.meetingRulesGuest.session),this.videoList=[],this.getMediaConstraints();var i=this.entity.canModerate?this.meetingRulesHost:this.meetingRulesGuest,n=this.validateMediaDeviceRequest(i.mediaConstraints);this.rtcmConnection.mediaConstraints={video:!!n.video&&this.videoConstraints,audio:!!n.audio&&this.audioConstraints,screen:n.screen},!this.pageConfigs.allowJoiningWithoutDevices||n.audio||n.video||n.screen||(this.rtcmConnection.dontCaptureUserMedia=!0),this.rtcmConnection.sdpConstraints.mandatory=P({},i.mandatory),this.rtcmConnection.autoCloseEntireSession=i.autoCloseEntireSession,this.rtcmConnection.enableScalableBroadcast=i.enableScalableBroadcast,this.rtcmConnection.enableScalableBroadcast&&(this.rtcmConnection.maxRelayLimitPerUser=i.maxRelayLimitPerUser),this.rtcmConnection.extra.isInitiator=this.entity.canModerate,this.rtcmConnection.join(e,(function(e,i,n){t.isLoading=!1,!1===e||n?(t.closeConnectionAndStream(),"Room full"===n?t.$toasted.error($t("meeting.room_full"),t.$toastConfig.error):t.$toasted.error($t("meeting.unable_to_join"),t.$toastConfig.error)):(t.updatePageConfigs(t.entity.canModerate),t.initSocketListener(),t.$toasted.success($t("meeting.meeting_joined"),t.$toastConfig))}))},applyOnStartConfigs:function(){var e=this;!this.rtcmConnection.extra.isInitiator&&this.pageConfigs.muteParticipantsOnStart&&window.setTimeout((function(){e.toggleAudio(null,!0)}),1e3)},shareScreen:function(){var e=this;try{this.rtcmConnection.addStream({screen:!0,streamCallback:function(t){e.rtcmConnection.extra.screenStreamId=t.id,e.updateExtraData()}})}catch(e){}},stopSharingScreen:function(){var e=this;this.isLoading=!0,this.rtcmConnection.extra.screenStreamId=null,this.updateExtraData();var t=this.$refs.videos.find((function(t){return t.id===e.localScreenStreamid}));t&&t.srcObject?(t.srcObject.getTracks().forEach((function(t){t.removeEventListener("ended",e.stopSharingScreen),t.enabled=!1,t.stop()})),this.rtcmConnection.removeStream(this.localScreenStreamid),this.emitSocketEvents("removedStream",t.srcObject),this.localScreenStreamid=null,this.isLoading=!1):(this.localScreenStreamid=null,this.isLoading=!1)},getOnline:function(){var e=this;this.isLoading=!0,this.showAgenda=!1;this.entity.status;this.$gaEvent("engagement","meeting_getOnline"),this.initMediaAndRtcmConnection(),this.Custom({url:"/".concat(this.initUrl,"/").concat(this.uuid,"/join"),method:"post"}).then((function(t){e.meetingRoomId=t.meeting.roomId,t.meeting=e.updateMeetingTimezone(t.meeting),e.entity=t.meeting,e.rtcmConnection.extra={username:e.user.username,name:e.user.name,uuid:e.user.uuid,avatar:e.profile.avatar,cover:e.profile.cover,audioMuted:!e.pageConfigs.enableAudio,videoMuted:!e.pageConfigs.enableVideo,isHandUp:e.isHandUp,isInitiator:!1,isHost:e.entity.isHost,canModerate:e.entity.canModerate},e.enableLogs&&(console.log("rtcmConnection",e.rtcmConnection),console.log("mediaConfigurations",e.mediaConfigurations),console.log("mediaDevices",e.mediaDevices),console.log("pageConfigs",e.pageConfigs),console.log("videoConstraints",e.videoConstraints),console.log("audioConstraints",e.audioConstraints),console.log("meetingRulesHost",e.meetingRulesHost),console.log("meetingRulesGuest",e.meetingRulesGuest),console.log("rtcmConnection-ExtraData",e.rtcmConnection.extra)),e.rtcmConnection.checkPresence(e.meetingRoomId,(function(t,i){e.enableLogs&&console.log("RoomID checkPresence",t),!0===t?e.joinRoom(e.meetingRoomId):e.entity.canModerate?e.openRoom(e.meetingRoomId):(e.isLoading=!1,e.$toasted.error($t("meeting.room_not_found"),e.$toastConfig.error)),e.startKeepAlivePolling(),e.startMeetingTimer()}))})).catch((function(t){e.isLoading=!1,formUtil.handleErrors(t)}))},getOffline:function(){var e=this;this.$gaEvent("engagement","meeting_getOffline");var t="confirm";this.rtcmConnection.recorder&&window.recordingDurationInterval&&(t=null,this.stopRecording()),this.isLoading=!0,this.meetingAction("leave",null,{alert:t,sameCallbackIfError:!0,callback:function(t){e.showAgenda=!0,e.showWhiteboard=!1,"presentation"===e.pageConfigs.layout&&(e.pageConfigs.layout=e.pageConfigs.lastLayout),e.closeConnectionAndStream(!1,(function(){e.stopMeetingTimer(),e.setupGreenRoom(),e.initMediaAndRtcmConnection()}))}})},meetingAction:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{alert:"confirm"},o={alert:"confirm"};n=Object.assign({},o,n);var a=function(o){t.isLoading=!0,i=o||i,("end"!==e||t.entity&&"live"===t.entity.status)&&t.Custom({url:"/".concat(t.initUrl,"/").concat(t.uuid,"/").concat(e),method:"post",data:i}).then((function(e){t.updateEntityBackup(e.meeting),e.meeting=t.updateMeetingTimezone(e.meeting),t.entity=e.meeting;var i=P(P({},t.entityDatesBackup),{},{dateUpdated:!0});n.inform&&(i=P(P({},i),n.inform)),t.informAboutMeetingUpdate(i),t.$toasted.success(e.message,t.$toastConfig),n.callback&&n.callback(e),t.isLoading=!1})).catch((function(e){t.isLoading=!1,n.callback&&n.sameCallbackIfError&&n.callback(e),formUtil.handleErrors(e)}))};e?"confirm"===n.alert||!0===n.alert?formUtil.confirmAction().then((function(e){e.value?a():(t.isLoading=!1,e.dismiss,R.a.DismissReason.cancel)})):"input"===n.alert?swtAlert.fire({title:n.title,input:"text",inputPlaceholder:n.inputPlaceholder,showCancelButton:!0,confirmButtonText:"Proceed!",cancelButtonText:"Go Back!"}).then((function(e){if(e.value){var i={};i[n.fieldName]=e.value,a(i)}else t.isLoading=!1,e.dismiss,R.a.DismissReason.cancel})):a():this.isLoading=!1},snoozeMeeting:function(e){this.meetingAction("snooze",{period:e})},cancelMeeting:function(){this.meetingAction("cancel",null,{alert:"input",title:$t("meeting.reason_for_cancellation"),inputPlaceholder:$t("meeting.reason_for_cancellation"),fieldName:"cancellationReason"})},endMeeting:_.debounce((function(){var t=this,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$gaEvent("engagement","meeting_endMeeting"),this.rtcmConnection&&this.rtcmConnection.recorder&&window.recordingDurationInterval&&(i=null,this.stopRecording()),this.entity&&"live"===this.entity.status?(this.isLoading=!0,this.meetingAction("end",null,{alert:i,sameCallbackIfError:!0,callback:function(e){t.showAgenda=!0,t.showWhiteboard=!1,"presentation"===t.pageConfigs.layout&&(t.pageConfigs.layout=t.pageConfigs.lastLayout),e&&e.meeting&&t.emitSocketEvents("meetingEnded",{status:e.meeting.status}),t.closeConnectionAndStream()}})):(this.showAgenda=!0,this.showWhiteboard=!1,"presentation"===this.pageConfigs.layout&&(this.pageConfigs.layout=this.pageConfigs.lastLayout),e&&e.meeting&&this.emitSocketEvents("meetingEnded",{status:e.meeting.status}),this.closeConnectionAndStream())}),5e3,{leading:!0,trailing:!1}),updateMeetingRules:function(){"video_conference"===this.entity.type.uuid?(this.meetingRulesHost={session:{audio:!0,video:!0,screen:!1,data:!0,oneway:!1},mediaConstraints:{audio:!0,video:!0,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},autoCloseEntireSession:!1,enableScalableBroadcast:!1},this.meetingRulesGuest={session:{audio:!0,video:!0,screen:!1,data:!0,oneway:!1},mediaConstraints:{audio:!0,video:!0,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},autoCloseEntireSession:!1,enableScalableBroadcast:!1}):"audio_conference"===this.entity.type.uuid?(this.meetingRulesHost={session:{audio:!0,video:!1,screen:!1,data:!0,oneway:!1},mediaConstraints:{audio:!0,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1},autoCloseEntireSession:!1,enableScalableBroadcast:!1},this.meetingRulesGuest={session:{audio:!0,video:!1,screen:!1,data:!0,oneway:!1},mediaConstraints:{audio:!0,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1},autoCloseEntireSession:!1,enableScalableBroadcast:!1}):"webinar"===this.entity.type.uuid?(this.meetingRulesHost={session:{audio:!0,video:!0,screen:!1,data:!0,oneway:!0},mediaConstraints:{audio:!0,video:!0,screen:!1},mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1},autoCloseEntireSession:!0,enableScalableBroadcast:!0,maxRelayLimitPerUser:1},this.meetingRulesGuest={session:{audio:!0,video:!0,screen:!1,data:!0,oneway:!0},mediaConstraints:{audio:!1,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},autoCloseEntireSession:!0,enableScalableBroadcast:!0,maxRelayLimitPerUser:1}):"live_class"===this.entity.type.uuid?(this.meetingRulesHost={session:{audio:!0,video:!0,screen:!1,data:!0,oneway:!1},mediaConstraints:{audio:!0,video:!0,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},autoCloseEntireSession:!0,enableScalableBroadcast:!1},this.meetingRulesGuest={session:{audio:!0,video:!0,screen:!1,data:!0,oneway:!1},mediaConstraints:{audio:!0,video:!0,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},autoCloseEntireSession:!0,enableScalableBroadcast:!1}):"podcast"===this.entity.type.uuid&&(this.meetingRulesHost={session:{audio:!0,video:!1,screen:!1,data:!1,oneway:!0},mediaConstraints:{audio:!0,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1},autoCloseEntireSession:!0,enableScalableBroadcast:!0,maxRelayLimitPerUser:1},this.meetingRulesGuest={session:{audio:!0,video:!1,screen:!1,data:!1,oneway:!0},mediaConstraints:{audio:!1,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1},autoCloseEntireSession:!0,enableScalableBroadcast:!0,maxRelayLimitPerUser:1})},updateMeetingTimezone:function(e){var t=this,i=function(e){return w.e(e,t.vars.serverDateTimeFormat)};return this.updateEntityBackup(e),e.startDateTime=i(e.startDateTime),e.plannedStartDateTime&&(e.plannedStartDateTime=i(e.plannedStartDateTime)),e.startedAt&&(e.startedAt=i(e.startedAt)),e.estimatedEndTime&&(e.estimatedEndTime=i(e.estimatedEndTime)),e},beforeUnload:function(e){this.localVideo&&this.emitSocketEvents("removedStream",this.localVideo),this.stopNavigation&&(e.returnValue=this.stopNavigationMessage)},logEvent:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"log";this.enableLogs&&("log"===i?console.log(e,t):"error"===i?console.error(e,t):"debug"===i&&console.trace(e,t))},toggleDevicesModal:function(){this.mediaConfigFormData=_.cloneDeep(this.mediaConfigurations),this.showDevicesModal=!0},onDevicesModalOK:function(e){var t=this;e.preventDefault(),Object(y.areEqual)(this.mediaConfigFormData,this.mediaConfigurations)||(this.mediaConfigurations=_.cloneDeep(this.mediaConfigFormData),this.applyMediaConstraints()),this.$nextTick((function(){t.$bvModal.hide("devicesModal")}))},onDevicesModalCancel:function(e){var t=this;e.preventDefault(),this.$nextTick((function(){t.$bvModal.hide("devicesModal")}))},updatePageConfigs:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.configs.meeting.recordingFormatAudio?this.configs.meeting.recordingFormatAudio:"audio/webm",n=this.configs.meeting.recordingFormatVideo?this.configs.meeting.recordingFormatVideo:"video/webm",o={},a=this.mediaConfigurations.recording.type,r=this.mediaConfigurations.recording.mimeType;"video_conference"===this.entity.type.uuid?(o={enableAudio:!0,enableVideo:!0,showEnableAudioBtn:!0,showEnableVideoBtn:!0},a="video",r=n):"audio_conference"===this.entity.type.uuid?(o={enableAudio:!0,enableVideo:!0,showEnableAudioBtn:!0,showEnableVideoBtn:!1},a="audio",r=i):"webinar"===this.entity.type.uuid?(o=t?{enableAudio:!0,enableVideo:!0,showEnableAudioBtn:!0,showEnableVideoBtn:!0}:{enableAudio:!0,enableVideo:!0,showEnableAudioBtn:!1,showEnableVideoBtn:!1,enableScreenSharing:!1,enableFileSharing:!1,enableRecording:!1,enableHandGesture:!1,enableWhiteboard:!1},a="video",r=n):"live_class"===this.entity.type.uuid?(o=t?{enableAudio:!0,enableVideo:!0,showEnableAudioBtn:!0,showEnableVideoBtn:!0}:{enableAudio:!0,enableVideo:!0,showEnableAudioBtn:!1,showEnableVideoBtn:!1,enableScreenSharing:!1,enableFileSharing:!1,enableRecording:!1,enableWhiteboard:!1},a="video",r=n):"podcast"===this.entity.type.uuid&&(o=t?{enableAudio:!0,enableVideo:!1,showEnableAudioBtn:!0,showEnableVideoBtn:!1,enableScreenSharing:!1,enableHandGesture:!1,enableWhiteboard:!1}:{enableAudio:!0,enableVideo:!1,showEnableAudioBtn:!1,showEnableVideoBtn:!1,enableScreenSharing:!1,enableFileSharing:!1,enableRecording:!1,enableHandGesture:!1,enableWhiteboard:!1},a="audio",r=i),o.objForEach((function(t,i){return e.pageConfigs[i]=t})),this.mediaConfigurations.recording.type=a,this.mediaConfigurations.recording.mimeType=r,this.mediaConfigurations.recording.timeSlice=this.pageConfigs.recordingTimeSlice||5e3;var s=this.mediaDevices.resolutions.find((function(t){return t.label===e.mediaConfigurations.selectedResolution}));s&&"Auto"!==s.label?this.mediaConfigurations.recording.video={width:s.constraints.width.max,height:s.constraints.height.max}:this.mediaConfigurations.recording.video&&delete this.mediaConfigurations.recording.video,this.rtcmConnection.extra.audioMuted=!this.pageConfigs.enableAudio,this.rtcmConnection.extra.videoMuted=!this.pageConfigs.enableVideo,this.rtcmConnection.extra.isHandUp=this.isHandUp,this.updateExtraData(),this.pageConfigs.enableWhiteboard&&(Object(C.g)("/js/canvas-designer/webrtc-handler.js"),Object(C.g)("/js/canvas-designer/canvas-designer-widget.js"))},destroyPage:function(){window.countdownInterval&&clearInterval(window.countdownInterval),window.meetingKeepAliveTimer&&clearInterval(window.meetingKeepAliveTimer),window.recordingDurationInterval&&clearInterval(window.recordingDurationInterval),this.SetUiConfig({pageHeaderShow:!0,pageFooterShow:!0}),this.closeConnectionAndStream(),window.Echo&&(window.meetingChannel&&(window.meetingChannel.stopListening("MeetingStatusChanged"),window.meetingChannel.stopListening("NewMessage")),window.Echo.leave("Meeting.".concat(this.uuid))),h.a.isEnabled&&(h.a.off("change"),h.a.off("error"))},getInitialData:function(){var e=this;return this.isLoading=!0,window.Echo?this.Get({uuid:this.uuid}).then((function(t){return t.isInstantMeeting&&(e.fallBackRoute="appInstantMeetingList",e.pageConfigs.hasAgenda=!1),!t.identifier||!t.isPam||e.$route.query&&e.$route.query.identifier&&e.$route.query.identifier===t.identifier||e.$router.replace({name:e.$route.name,params:e.$route.params,query:P(P({},e.$route.query),{},{identifier:t.identifier})}),t.isPaid&&!t.hasPaid?(e.$toasted.error($t("meeting.could_not_join_paid_meeting_without_payment"),e.$toastConfig.error),void setTimeout((function(){e.$router.push({name:"appMeetingPayment",params:{uuid:t.uuid}})}),2e3)):(t.config.objForEach((function(t,i){return e.pageConfigs[i]=t})),e.pageConfigs.disableScroll="grid"===e.pageConfigs.layout||(t.config&&t.config.hasOwnProperty("disableScroll")?t.config.disableScroll:e.pageConfigs.disableScroll),t=e.updateMeetingTimezone(t),e.entity=t,e.updateMeetingRules(),e.pageConfigs.preferRearCameraFirst&&(e.mediaConfigurations.facingMode="environment"),t.roomId&&"live"===t.status&&setTimeout((function(){e.initMediaAndRtcmConnection(),e.rtcmConnection.checkPresence(t.roomId,(function(t,i){e.roomIdAlive=!!t}))}),1e3),e.joinChannel(),e.setupGreenRoom(),t.isInstantMeeting&&!t.isBlocked&&"live"===t.status&&(e.rtcmConnection&&e.rtcmConnection.isInitiator||t.canModerate||"live_class"!==t.type.uuid&&"webinar"!==t.type.uuid)?e.getOnline():e.isLoading=!1,t)})).catch((function(t){return e.isLoading=!1,formUtil.handleErrors(t),e.$router.push({name:e.fallBackRoute}),t})):(this.$toasted.error($t("config.pusher.credential_required"),this.$toastConfig.error),void this.$router.push({name:this.fallBackRoute}))}},O(o,"stopStream",(function(e){e&&_.isFunction(e.stop)&&e.stop(),e&&_.isFunction(e.getTracks)&&e.getTracks().forEach((function(e){return e.stop()}))})),O(o,"toggleVideoTracks",(function(e,t){e&&e.getVideoTracks().forEach((function(e){e.enabled=t}))})),O(o,"toggleAudioTracks",(function(e,t){e&&e.getAudioTracks().forEach((function(e){e.enabled=t}))})),O(o,"setupGreenRoom",(function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=function(t){if(e.$refs.greenRoomAudio&&e.pageConfigs.enableAudio){var i=new AudioContext,n=i.createAnalyser(),o=i.createMediaStreamSource(t),a=i.createScriptProcessor(2048,1,1);n.smoothingTimeConstant=.8,n.fftSize=1024,o.connect(n),n.connect(a),a.connect(i.destination),Object(S.a)(e.$refs.greenRoomAudio,{width:"sibling",boxGapFraction:.2}),a.onaudioprocess=function(){var t=new Uint8Array(n.frequencyBinCount);n.getByteFrequencyData(t);for(var i=0,o=t.length,a=0;a<o;a++)i+=t[a];var r=i/o,s=Math.round(r);e.micVolumeActivity=s<0?0:s}}};if(this.$refs.videos&&this.$refs.videos.length)return this.localGreenRoomStream&&this.stopStream(this.localGreenRoomStream),void(this.localGreenRoomStream=null);!this.pageConfigs.enableVideo||!this.pageConfigs.enableAudio||this.$refs.greenRoomVideo&&this.$refs.greenRoomVideo.srcObject||(t=!0),!this.localGreenRoomStream||t?(this.localGreenRoomStream&&this.stopStream(this.localGreenRoomStream),this.localGreenRoomStream=null,this.getMediaConstraints(),(this.videoConstraints&&this.mediaConfigurations.selectedVideoInput||this.audioConstraints&&this.mediaConfigurations.selectedAudioInput)&&navigator.mediaDevices.getUserMedia({video:this.videoConstraints,audio:this.audioConstraints||!0}).then((function(t){e.toggleVideoTracks(t,e.pageConfigs.enableVideo),e.toggleAudioTracks(t,e.pageConfigs.enableAudio),e.localGreenRoomStream=t,e.$refs.greenRoomVideo&&e.pageConfigs.enableVideo&&(e.$refs.greenRoomVideo.srcObject=t),setTimeout((function(){i(e.localGreenRoomStream)}),1e3)})).catch(this.rtcmOnMediaError)):this.pageConfigs.enableVideo||this.pageConfigs.enableAudio?(this.toggleVideoTracks(this.localGreenRoomStream,this.pageConfigs.enableVideo),this.toggleAudioTracks(this.localGreenRoomStream,this.pageConfigs.enableAudio),!this.pageConfigs.enableVideo&&this.$refs.greenRoomVideo&&(this.$refs.greenRoomVideo.srcObject=null),i(this.localGreenRoomStream)):(this.localGreenRoomStream&&this.stopStream(this.localGreenRoomStream),this.localGreenRoomStream=null,this.$refs.greenRoomVideo.srcObject=null)})),O(o,"setupMediaDevices",(function(){var e=this,t=new l.a;!1===t.DetectRTC.isWebRTCSupported&&this.$toasted.error($t("meeting.invalid_browser_error"),this.$toastConfig.error),this.isLoading=!0,this.mediaDeviceIssue=this.permissionRejected=!1;var i=function(i){t.DetectRTC.load((function(){e.enableLogs&&console.log(t.DetectRTC),!0===t.DetectRTC.hasMicrophone?e.mediaDevices.audioInput=t.DetectRTC.audioInputDevices.map((function(t){return{uuid:t.deviceId||t.id,name:t.label||"microphone ".concat(e.mediaDevices.audioInput.length+1)}})):e.mediaDeviceIssue=!0,!0===t.DetectRTC.hasWebcam?e.mediaDevices.videoInput=t.DetectRTC.videoInputDevices.map((function(t){return{uuid:t.deviceId||t.id,name:t.label||"camera ".concat(e.mediaDevices.videoInput.length+1)}})):e.mediaDeviceIssue=!0,!0===t.DetectRTC.hasSpeakers?e.mediaDevices.audioOutput=t.DetectRTC.audioOutputDevices.map((function(t){return{uuid:t.deviceId||t.id,name:t.label||"speaker ".concat(e.mediaDevices.audioOutput.length+1)}})):e.$toasted.error($t("meeting.audio_output_device_error"),e.$toastConfig.error),e.mediaConfigurations.selectedAudioInput=e.mediaDevices.audioInput?e.mediaDevices.audioInput[0]:null,e.mediaConfigurations.selectedVideoInput=e.mediaDevices.videoInput?e.mediaDevices.videoInput[0]:null,e.mediaConfigFormData=_.cloneDeep(e.mediaConfigurations),i&&i(),e.getInitialData()}))};!t.DetectRTC.MediaDevices.length||t.DetectRTC.MediaDevices[0]&&t.DetectRTC.MediaDevices[0].isCustomLabel?navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(e){i((function(){e.getTracks().forEach((function(e){e.stop()}))}))})).catch((function(t){e.rtcmOnMediaError(t),e.getInitialData()})):i()})),O(o,"doInit",(function(){this.Init({url:this.initUrl}),window.isDuplicate()&&(this.duplicateTab=!0),this.setupMediaDevices()})),O(o,"initNetworkListener",(function(){var e=this;window.addEventListener("offline",(function(t){e.rtcmConnection&&e.videoList&&e.videoList.length&&(e.videoList=e.videoList.slice(0,1),e.autoSetVideoMaximized())})),window.addEventListener("online",(function(t){e.closeConnectionAndStream(!0)}))})),o)),mounted:function(){var e=this;h.a.isEnabled&&(h.a.on("change",(function(){e.SetUiConfig({fullScreen:h.a.isFullscreen})})),h.a.on("error",(function(e){console.error("Failed to enable fullscreen",e)})),this.SetUiConfig({fullScreen:!1})),this.doInit(),window.addEventListener("beforeunload",this.beforeUnload),this.checkIfOffline(),this.initNetworkListener()},created:function(){document.body.classList.add("meeting-page"),this.$route.params.uuid&&(this.uuid=this.$route.params.uuid),this.mediaConfigFormData=_.cloneDeep(this.mediaConfigurations),this.SetUiConfig({pageHeaderShow:!1,pageFooterShow:!1}),navigator.connection&&"cellular"===navigator.connection.type&&navigator.connection.downlinkMax<=.115&&alert("2G is not supported. Please use a better internet service.")},beforeRouteEnter:function(e,t,i){e.params.uuid?i((function(e){e.prevRoute=t})):i({name:"appMeetingView"===t?t:"AppMeetingList"})},beforeDestroy:function(){window.isMeetingPageDestroyed||(this.isLoading=!0,this.destroyPage(),this.entity&&"live"===this.entity.status&&this.Custom({url:"/".concat(this.initUrl,"/").concat(this.uuid,"/leave"),method:"post"}),window.isMeetingPageDestroyed=!0)},beforeRouteLeave:function(e,t,i){var n=this,o=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&(n.isLoading=!0,n.destroyPage(),window.removeEventListener("beforeunload",n.beforeUnload),n.entity&&"live"===n.entity.status?n.Custom({url:"/".concat(n.initUrl,"/").concat(n.uuid,"/leave"),method:"post"}).then((function(e){window.isMeetingPageDestroyed=!0,i()})).catch((function(e){window.isMeetingPageDestroyed=!0,i()})):(window.isMeetingPageDestroyed=!0,i()))};this.hasVideos?formUtil.unsavedCheckAlert({},{unsaved:!0},o,{title:$t("meeting.is_live")}):o()},destroyed:function(){document.body.classList.remove("meeting-page")},filters:{decimal:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number(e).toFixed(t)}}},L=n("zfsR"),I=n("bdEB"),A=n("adPT"),U=n("K2Rr"),j=n.n(U),$=n("nFxi"),F=n("XuX8"),B=n.n(F),N=n("xjcK"),V=n("pyNs"),z=n("2C+6"),G=n("z3V6"),W=n("jBgq"),H=n("hpAl"),q=n("ex6f"),J=n("qMhD"),K=n("OljW"),Y=n("+nMp"),Q=Object(G.d)({animated:Object(G.c)(V.f,null),label:Object(G.c)(V.r),labelHtml:Object(G.c)(V.r),max:Object(G.c)(V.m,null),precision:Object(G.c)(V.m,null),showProgress:Object(G.c)(V.f,null),showValue:Object(G.c)(V.f,null),striped:Object(G.c)(V.f,null),value:Object(G.c)(V.m,0),variant:Object(G.c)(V.r)},N.E),X=B.a.extend({name:N.E,mixins:[W.a],inject:{bvProgress:{default:function(){return{}}}},props:Q,computed:{progressBarClasses:function(){var e=this.computedAnimated,t=this.computedVariant;return[t?"bg-".concat(t):"",this.computedStriped||e?"progress-bar-striped":"",e?"progress-bar-animated":""]},progressBarStyles:function(){return{width:this.computedValue/this.computedMax*100+"%"}},computedValue:function(){return Object(K.b)(this.value,0)},computedMax:function(){var e=Object(K.b)(this.max)||Object(K.b)(this.bvProgress.max,0);return e>0?e:100},computedPrecision:function(){return Object(J.d)(Object(K.c)(this.precision,Object(K.c)(this.bvProgress.precision,0)),0)},computedProgress:function(){var e=this.computedPrecision,t=Object(J.f)(10,e);return Object(K.a)(100*t*this.computedValue/this.computedMax/t,e)},computedVariant:function(){return this.variant||this.bvProgress.variant},computedStriped:function(){return Object(q.b)(this.striped)?this.striped:this.bvProgress.striped||!1},computedAnimated:function(){return Object(q.b)(this.animated)?this.animated:this.bvProgress.animated||!1},computedShowProgress:function(){return Object(q.b)(this.showProgress)?this.showProgress:this.bvProgress.showProgress||!1},computedShowValue:function(){return Object(q.b)(this.showValue)?this.showValue:this.bvProgress.showValue||!1}},render:function(e){var t,i=this.label,n=this.labelHtml,o=this.computedValue,a=this.computedPrecision,r={};return this.hasNormalizedSlot()?t=this.normalizeSlot():i||n?r=Object(H.a)(n,i):this.computedShowProgress?t=this.computedProgress:this.computedShowValue&&(t=Object(K.a)(o,a)),e("div",{staticClass:"progress-bar",class:this.progressBarClasses,style:this.progressBarStyles,attrs:{role:"progressbar","aria-valuemin":"0","aria-valuemax":Object(Y.e)(this.computedMax),"aria-valuenow":Object(K.a)(o,a)},domProps:r},t)}});function Z(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ee(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(i),!0).forEach((function(t){te(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Z(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function te(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ie=Object(z.i)(Q,["label","labelHtml"]),ne=Object(G.d)(Object(z.l)(ee(ee({},ie),{},{animated:Object(G.c)(V.f,!1),height:Object(G.c)(V.r),max:Object(G.c)(V.m,100),precision:Object(G.c)(V.m,0),showProgress:Object(G.c)(V.f,!1),showValue:Object(G.c)(V.f,!1),striped:Object(G.c)(V.f,!1)})),N.D);function oe(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ae(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var re={name:"file-sharer",components:{BProgress:B.a.extend({name:N.D,mixins:[W.a],provide:function(){return{bvProgress:this}},props:ne,computed:{progressHeight:function(){return{height:this.height||null}}},render:function(e){var t=this.normalizeSlot();return t||(t=e(X,{props:Object(G.e)(ie,this.$props)})),e("div",{staticClass:"progress",style:this.progressHeight},[t])}})},props:{connection:{default:null},allowSharing:{default:!0},actionLabel:{type:String,default:"global.choose"},nameLabel:{type:String,default:"upload.file"},namesLabel:{type:String,default:"upload.files"},closeButtonLabel:{type:String,default:"upload.close"},buttonWrapperClasses:{type:String,default:"justify-content-between"},buttonClasses:{type:String,default:""},closeButtonClasses:{type:String,default:"btn-light"},buttonIcon:{type:String,default:"fas fa-upload"},buttonDesign:{type:String,default:"primary"},options:{type:Object,default:function(){return{allowedExtensions:["jpg","png","jpeg","pdf","doc","docx","xls","xlsx","txt"],maxNoOfFiles:20,allowedMaxFileSize:null}}},multiple:{type:Boolean,default:!1},hideButtonLabel:{type:Boolean,default:!1},showCloseButton:{type:Boolean,default:!0},autoSend:{type:Boolean,default:!0}},data:function(){return{icons:$.b,mimeTypes:$.c,sharingFiles:[],lastSelectedFile:null,incomingRequest:{show:!1,sender:null,fileId:null}}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(i),!0).forEach((function(t){ae(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):oe(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},Object(r.c)("config",["configs","vars"])),watch:{connection:function(e,t){e&&null===t&&this.setupConnection()}},methods:{getFileIcon:function(e){return this.icons[e]||"fa-file-alt"},getFileNameIcon:function(e){return this.icons[e]||"fa-file-alt"},generateFilesList:function(e){var t=this,i=null,n=this.$refs.filesInput.files;if(this.options.allowedExtensions&&(_.isArray(this.options.allowedExtensions)||(this.options.allowedExtensions=this.options.allowedExtensions.split(",")),i=new RegExp("(."+this.options.allowedExtensions.join("|.")+")$")),this.options.maxNoOfFiles&&n.length>this.options.maxNoOfFiles)this.$toasted.error(this.$t("upload.max_file_limit_crossed",{number:this.options.maxNoOfFiles}),this.$toastConfig.error);else{for(var o=function(e){var o="".concat(n[e].size,"-").concat(n[e].name),a=t.sharingFiles.findIndex((function(e){return e.fileId===o}));if(i&&!i.test(n[e].name))t.$toasted.error(t.$t("global.file_not_supported",{attribute:n[e].name.split(".").pop()}),t.$toastConfig.error);else if(t.options.allowedMaxFileSize&&n[e].size>t.options.allowedMaxFileSize)t.$toasted.error(t.$t("global.file_too_large",{attribute:n[e].name}),t.$toastConfig.error);else if(-1===a){var r={uuid:"",name:n[e].name,size:n[e].size,type:n[e].type,humanSize:Object(C.a)(n[e].size),fileId:o,url:"",sendingTo:[],progress:{value:0,max:0,percent:0,status:"starting"}};t.sharingFiles.unshift(r),t.lastSelectedFile=n[e]}},a=0;a<n.length;a++)o(a);this.autoSend&&this.connection&&this.connection.send({doYouWannaReceiveThisFile:!0,sender:this.connection.extra,fileId:"".concat(this.lastSelectedFile.size,"-").concat(this.lastSelectedFile.name)})}},rejectIncomingFile:function(){this.incomingRequest.show=!1,this.connection.send({noIDoNotWannaReceive:!0,sender:this.connection.extra,fileId:this.incomingRequest.fileId}),this.incomingRequest.sender=null,this.incomingRequest.fileId=null},acceptIncomingFile:function(){this.incomingRequest.show=!1,this.connection.send({yesIWannaReceive:!0,sender:this.connection.extra,fileId:this.incomingRequest.fileId}),this.incomingRequest.sender=null,this.incomingRequest.fileId=null},rtcmOnOpen:function(e){var t=this;try{chrome.power.requestKeepAwake("display")}catch(e){}this.connection.connectedWith[e.userid]||(this.connection.connectedWith[e.userid]=!0,this.lastSelectedFile&&window.setTimeout((function(){t.autoSend&&t.connection&&t.connection.send({doYouWannaReceiveThisFile:!0,sender:t.connection.extra,fileId:"".concat(t.lastSelectedFile.size,"-").concat(t.lastSelectedFile.name)})}),500))},rtcmOnClose:function(e){},rtcmOnLeave:function(e){},rtcmOnMessage:function(e){e.data.doYouWannaReceiveThisFile?this.connection.fileReceived[e.data.fileId]||(this.incomingRequest.fileId=e.data.fileId,this.incomingRequest.sender=e.data.sender,this.incomingRequest.show=!0,this.$emit("show")):e.data.yesIWannaReceive&&this.lastSelectedFile?this.connection.shareFile(this.lastSelectedFile,e.userid):e.data.noIDoNotWannaReceive&&this.lastSelectedFile},rtcmOnFileStart:function(e){var t="".concat(e.size,"-").concat(e.name);if(!this.connection.fileReceived[t]){e.userid!==this.connection.userid&&(this.sharingFiles.unshift({uuid:"",name:e.name,size:e.size,type:e.type,humanSize:Object(C.a)(e.size),fileId:t,url:"",receivingFrom:null,progress:{value:0,max:0,percent:0,status:"starting"}}),this.$emit("show"));var i=this.sharingFiles.findIndex((function(e){return e.fileId===t}));if(-1!==i){var n=this.sharingFiles[i];if(n.uuid=e.uuid,n.userid=e.userid,e.userid===this.connection.userid){if(n.sendingTo||(n.sendingTo=[]),n.sendingTo.length>0&&-1!==n.sendingTo.findIndex((function(t){return t.userid===e.remoteUserId})))return;n.sendingTo.unshift({userid:e.remoteUserId,progress:{value:0,percent:0,max:e.maxChunks,status:"starting"}})}else n.receiveAgain=!0,n.receivingFrom=e.userid,n.progress.max=e.maxChunks,n.progress.status="starting"}}},rtcmOnFileProgress:function(e){var t="".concat(e.size,"-").concat(e.name);if(!this.connection.fileReceived[t]){var i=this.sharingFiles.findIndex((function(t){return t.uuid===e.uuid}));if(-1!==i){var n=this.sharingFiles[i];if(e.remoteUserId&&n.sendingTo){var o=n.sendingTo.findIndex((function(t){return t.userid===e.remoteUserId})),a=n.sendingTo[o];if(!a)return;a.progress.value=e.currentPosition,a.progress=this.updateProgress(a.progress,!0)}else n.progress.value=e.currentPosition,n.progress=this.updateProgress(n.progress,!1)}}},rtcmOnFileEnd:function(e){var t="".concat(e.size,"-").concat(e.name);if(!this.connection.fileReceived[t]){e.remoteUserId===this.connection.userid&&(this.connection.fileReceived[t]=e);var i=this.sharingFiles.findIndex((function(e){return e.fileId===t}));if(-1!==i){var n=this.sharingFiles[i];if(n.url=e.url,e.remoteUserId&&n.sendingTo){var o=n.sendingTo.findIndex((function(t){return t.userid===e.remoteUserId}));n.sendingTo[o].progress.status="sent"}else n.progress.status="received"}}},rtcmOnError:function(e){},updateProgress:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e.value||-1===e.value)return e.percent=0,e;var i=parseInt((e.value/e.max*100).toFixed(0));return e.status=t?i>100?"sent":"sending - "+i+"%":i>100?"received":"receiving - "+i+"%",e.percent=i>100?100:i,e},setupConnection:function(){this.connection.enableFileSharing=!0,this.connection.fileReceived={},this.connection.connectedWith={},this.connection.chunkSize=15e3,this.connection.onopen=this.rtcmOnOpen,this.connection.onclose=this.rtcmOnClose,this.connection.onleave=this.rtcmOnLeave,this.connection.onmessage=this.rtcmOnMessage,this.connection.onerror=this.rtcmOnError,this.connection.onFileStart=this.rtcmOnFileStart,this.connection.onFileProgress=this.rtcmOnFileProgress,this.connection.onFileEnd=this.rtcmOnFileEnd}},mounted:function(){this.options.allowedMaxFileSize=this.options.allowedMaxFileSize?this.options.allowedMaxFileSize:this.configs.system&&this.configs.system.postMaxSize?this.configs.system.postMaxSize:null,this.options.allowedExtensions=this.options.allowedExtensions?this.options.allowedExtensions:this.configs.system&&this.configs.system.allowedFileExtensions?this.configs.system.allowedFileExtensions:null,this.connection&&this.setupConnection()},destroyed:function(){}},se=n("KHd+"),ce=Object(se.a)(re,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sm-uploader file-uploader file-sharer"},[i("div",{class:["files-list-wrapper"]},[e.incomingRequest.show?i("div",{staticClass:"file-incoming-request"},[i("div",{staticClass:"alert fade show alert-white"},[i("div",{staticClass:"alert-content"},[i("h6",[i("strong",[e._v(e._s(e.incomingRequest.sender.name))]),i("span",{staticClass:"text-muted mx-1"},[e._v(e._s(e.$t("upload.wants_to_share_file")))]),i("strong",[e._v(e._s(e.incomingRequest.fileId))])])]),e._v(" "),i("div",{staticClass:"d-flex justify-content-start mt-3"},[i("button",{staticClass:"btn btn-sm btn-danger flex-grow",attrs:{type:"button"},on:{click:e.rejectIncomingFile}},[e._v(e._s(e.$t("upload.reject")))]),e._v(" "),i("button",{staticClass:"btn btn-sm btn-success flex-grow",attrs:{type:"button"},on:{click:e.acceptIncomingFile}},[e._v(e._s(e.$t("upload.accept")))])])])]):e._e(),e._v(" "),e.sharingFiles.length?i("ul",{staticClass:"files-list"},e._l(e.sharingFiles,(function(t,n){return i("li",{key:t.fileId,staticClass:"file-details-row"},[i("div",{staticClass:"file-details-wrapper"},[i("div",{staticClass:"file-icon"},[i("span",[i("i",{class:["far",e.getFileIcon(t.type)]})])]),e._v(" "),i("div",{staticClass:"file-details"},[i("h6",[e._v(e._s(t.name))]),e._v(" "),i("p",[i("span",[i("span",{staticClass:"font-weight-700"},[e._v(e._s(e.$t("upload.type")))]),e._v(": "+e._s(e.mimeTypes[t.type]||"Unknown"))]),e._v(" "),i("span",{staticClass:"ml-1"},[i("span",{staticClass:"font-weight-700"},[e._v(e._s(e.$t("upload.size")))]),e._v(": "+e._s(t.humanSize))])]),e._v(" "),t.sendingTo?i("div",{staticClass:"sharing-details-wrapper"},e._l(t.sendingTo,(function(t){return i("div",{key:t.userid,staticClass:"sharing-row mt-2"},[i("div",{staticClass:"sharing-details small"},[i("div",{staticClass:"flex-grow text-muted"},[e._v("\n                                        Sending to: "+e._s(t.userid)+"\n                                    ")]),e._v(" "),i("div",[i("span",{class:["badge badge-sm badge-pill",{"badge-success":"sent"===t.progress.status},{"badge-info":"sent"!==t.progress.status}]},[e._v(e._s(t.progress.status))])])]),e._v(" "),i("b-progress",{staticClass:"mt-2 mb-0",attrs:{value:t.progress.percent,max:100}})],1)})),0):t.receivingFrom?i("div",{staticClass:"sharing-row mt-2"},[i("div",{staticClass:"sharing-details small"},[i("div",{staticClass:"flex-grow text-muted"},[e._v("\n                                    Receiving From: "+e._s(t.receivingFrom)+"\n                                ")]),e._v(" "),i("div",[i("span",{class:["badge badge-sm badge-pill",{"badge-success":"received"===t.progress.status},{"badge-info":"received"!==t.progress.status}]},[e._v(e._s(t.progress.status))])])]),e._v(" "),i("b-progress",{staticClass:"mt-2 mb-0",attrs:{value:t.progress.percent,max:100}})],1):e._e()]),e._v(" "),i("div",{staticClass:"status-wrapper"},[t.receivingFrom&&"received"!==t.progress.status?e._e():i("a",{staticClass:"status-action",attrs:{href:t.url,target:"_blank",download:t.name}},[e._m(0,!0)])])])])})),0):e._e()]),e._v(" "),i("div",{staticClass:"file-uploader-form"},[i("div",{class:["file-selector d-flex",e.buttonWrapperClasses]},[e.showCloseButton?i("button",{class:["btn",e.closeButtonClasses],attrs:{type:"button"},on:{click:function(t){return e.$emit("hide")}}},[e._m(1),e._v(" "),i("span",{staticClass:"button-label"},[e._v(e._s(e.$t(e.closeButtonLabel)))])]):e._e(),e._v(" "),e.allowSharing?[i("label",{class:["btn","btn-"+e.buttonDesign,e.buttonClasses]},[i("input",{ref:"filesInput",staticClass:"selector-input",attrs:{name:"filesInput",type:"file",id:"filesInput",multiple:e.multiple},on:{change:e.generateFilesList}}),e._v(" "),i("span",{staticClass:"button-icon"},[i("i",{class:e.buttonIcon})]),e._v(" "),e.hideButtonLabel?e._e():i("span",{staticClass:"button-label"},[e._v(e._s(e.$t(e.actionLabel,{attribute:e.$t(e.namesLabel)})))])])]:e._e()],2)])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("i",{staticClass:"fas fa-download"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"button-icon"},[t("i",{staticClass:"fas fa-times"})])}],!1,null,null,null).exports,de={mixins:[L.a,D,a.a],components:{AppLogo:I.a,AnimatedNumber:A.a,FlipCountdown:j.a,FileSharer:ce},computed:{fileSharerOptions:function(){return{allowedExtensions:this.configs.system.allowedFileExtensions,maxNoOfFiles:20,allowedMaxFileSize:null}}},watch:{locked:function(e,t){if(e){var i=this.$route.fullPath;this.$router.push({name:"authLock",query:{ref:i}})}}},methods:{}},le=(n("eC/g"),Object(se.a)(de,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("base-container",{class:["meeting-page",{"auto-hide-footer":e.pageConfigs.footerAutoHide&&e.hasVideos},{pulse:e.recording},{"mirrored-video":e.configs.meeting&&e.configs.meeting.mirroredVideo}],attrs:{"with-loader":"","is-loading":e.isLoading,"loader-color":e.vars.loaderColor,"overlay-color":e.uiConfigs.pageColorSchemeType,"loader-size":"screen","data-page-background-color":e.uiConfigs.pageBackgroundColor,"data-card-background-color":e.uiConfigs.pageContainerBackgroundColor}},[e.duplicateTab?i("card",{staticClass:"duplicate-tab d-flex justify-content-center align-items-center min-height-90vh",attrs:{shadow:""}},[i("h2",[e._v(e._s(e.$t("meeting.duplicate_tab")))])]):[i("div",{class:["meeting-footer",{"has-videos":e.hasVideos}],attrs:{"data-footer-background-color":e.uiConfigs.leftSidebarColor}},[i("div",{staticClass:"logo-wrapper"},[i("app-logo",{attrs:{place:"sidebar",size:"sm",tag:"span"}})],1),e._v(" "),e.entity&&e.entity.status?i("div",{staticClass:"meeting-actions meeting-actions-center"},[e.pageConfigs.showEnableAudioBtn?[e.pageConfigs.enableAudio?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action",attrs:{type:"button",title:e.$t("meeting.mute_audio")},on:{click:e.toggleAudio}},[i("i",{staticClass:"fas fa-microphone"})]):i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action disabled-text",attrs:{type:"button",title:e.$t("meeting.unmute_audio")},on:{click:e.toggleAudio}},[i("i",{staticClass:"fas fa-microphone-slash"})])]:e._e(),e._v(" "),e.pageConfigs.showEnableVideoBtn?[e.pageConfigs.enableVideo?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action",attrs:{type:"button",title:e.$t("meeting.mute_video")},on:{click:e.toggleVideo}},[i("i",{staticClass:"fas fa-video"})]):i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action disabled-text",attrs:{type:"button",title:e.$t("meeting.unmute_video")},on:{click:e.toggleVideo}},[i("i",{staticClass:"fas fa-video-slash"})])]:e._e(),e._v(" "),e.pageConfigs.showDeviceConfig?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action d-sm-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.media_devices.setup")},on:{click:e.toggleDevicesModal}},[i("i",{staticClass:"fas fa-cogs"})]):e._e(),e._v(" "),e.videoList.length?[e.pageConfigs.enableFileSharing?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],class:["btn action d-none d-lg-inline-block",{"disabled-text":e.showFileSharing}],attrs:{type:"button",title:e.$t("upload.share_files")},on:{click:e.toggleFileSharing}},[i("i",{staticClass:"fas fa-upload"})]):e._e(),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action danger-text",attrs:{type:"button",title:e.$t("meeting.leave_meeting")},on:{click:e.getOffline}},[i("i",{staticClass:"fas fa-phone-slash"})]),e._v(" "),e.pageConfigs.enableScreenSharing?[e.localScreenStreamid?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action disabled-text d-none d-lg-inline-block",attrs:{type:"button",title:e.$t("meeting.stop_sharing_screen")},on:{click:e.stopSharingScreen}},[i("i",{staticClass:"fas fa-minus-square"})]):i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action d-none d-lg-inline-block",attrs:{type:"button",title:e.$t("meeting.share_screen")},on:{click:e.shareScreen}},[i("i",{staticClass:"fas fa-desktop"})])]:e._e(),e._v(" "),e.pageConfigs.enableRecording&&e.entity.canModerate?[e.recording?[e.pageConfigs.enableAutoRecording&&!e.pageConfigs.canStopAutoRecording?[i("button",{staticClass:"btn action danger-text d-none d-md-inline-block",attrs:{type:"button"}},[i("i",{staticClass:"fas fa-circle"}),e._v(" "),i("span",{staticClass:"recording_time"},[e._v(e._s(e.recordingDuration))])])]:[e.recordingPaused?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action success-text d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.resume_recording")},on:{click:e.resumeRecording}},[i("i",{staticClass:"fas fa-circle"})]):i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action danger-text d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.pause_recording")},on:{click:e.pauseRecording}},[i("i",{staticClass:"fas fa-pause"})]),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action danger-text d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.stop_recording")},on:{click:e.stopRecording}},[i("i",{staticClass:"fas fa-stop"}),e._v(" "),i("span",{staticClass:"recording_time"},[e._v(e._s(e.recordingDuration))])])]]:i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.start_recording")},on:{click:e.startRecording}},[i("i",{staticClass:"fas fa-circle"})])]:e._e(),e._v(" "),e.pageConfigs.enableWhiteboard?[e.showWhiteboard?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action danger-text d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.hide_whiteboard")},on:{click:e.toggleWhiteboard}},[i("i",{staticClass:"fas fa-chalkboard-teacher"})]):e._e(),e._v(" "),e.showWhiteboard?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action danger-text d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.clear_hide_whiteboard")},on:{click:e.hideAndDestroyWhiteboard}},[i("i",{staticClass:"fas fa-chalkboard-teacher mr-0"}),i("i",{staticClass:"fas fa-times font-size-xs ml-1 font-size-xs text-danger"})]):i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.show_whiteboard")},on:{click:e.toggleWhiteboard}},[i("i",{staticClass:"fas fa-chalkboard-teacher"})])]:e._e(),e._v(" "),e.pageConfigs.enableHandGesture?[e.isHandUp?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action success-text",attrs:{type:"button",title:e.$t("meeting.lower_hand")},on:{click:e.toggleHandUp}},[i("i",{staticClass:"far fa-hand-paper"})]):i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action",attrs:{type:"button",title:e.$t("meeting.raise_hand")},on:{click:e.toggleHandUp}},[i("i",{staticClass:"fas fa-hand-paper"})])]:e._e()]:e._e()],2):e._e(),e._v(" "),i("div",{staticClass:"meeting-actions meeting-actions-right"},[e.entity?[e.recordedFilesToUpload&&e.recordedFilesToUpload.length?i("base-dropdown",{staticClass:"more-actions d-none d-md-inline-block",attrs:{tag:"div",direction:"up",size:"md","menu-classes":"show-dropdown-up p-0 max-height-500px",position:"right","has-scroll":""}},[i("button",{staticClass:"btn action grid-toggle-btn d-none d-md-inline-block",attrs:{slot:"title",type:"button"},slot:"title"},[i("i",{staticClass:"fas fa-cloud-upload-alt"})]),e._v(" "),i("card",{staticClass:"upload-widget",attrs:{shadow:"","body-classes":"p-0","header-classes":"p-2"},scopedSlots:e._u([{key:"header",fn:function(){return[i("h5",{staticClass:"m-0 p-1"},[e._v(e._s(e.$t("meeting.meeting_recordings")))])]},proxy:!0}],null,!1,2909934337)},[e._v(" "),i("div",{staticClass:"widget-wrapper"},[i("div",{staticClass:"widget-body file-uploader"},[i("div",{staticClass:"files-list-wrapper"},[i("ul",{staticClass:"files-list"},e._l(e.recordedFilesToUpload,(function(t){return i("li",{key:t.uuid,staticClass:"file-details-row"},[i("div",{staticClass:"file-details"},[t.chunk?i("h6",{staticClass:"pointer"},[e._v(e._s(t.name))]):i("h6",{staticClass:"pointer",on:{click:function(e){return t.download(t.blob)}}},[e._v(e._s(t.file.name))]),e._v(" "),t.error?i("p",{staticClass:"text-danger"},[e._v("\n                                                        "+e._s(t.error)+"\n                                                    ")]):[i("p",{staticClass:"text-muted"},[e._v("\n                                                            "+e._s(t.status)+"\n                                                        ")]),e._v(" "),i("p",[t.chunk?e._e():i("span",[i("span",{staticClass:"font-weight-700"},[e._v(e._s(e.$t("upload.size")))]),e._v(": "+e._s(e._f("decimal")(t.file.size/1024,0))+" KB")])])]],2),e._v(" "),i("div",{class:["status-wrapper",{"actions-wrapper":"uploaded"===t.status}]},[i("transition",{staticClass:"transition-wrapper",attrs:{appear:"",tag:"div",name:"actions",mode:"out-in"}},["uploading"===t.status?i("div",{staticClass:"status-uploading-wrapper"},[t.chunk?e._e():i("label",{staticClass:"status-action",on:{click:t.cancel}},[e._v(e._s(e.$t("upload.cancel")))]),e._v(" "),i("progress-ring",{attrs:{value:t.progress,"stroke-color":e.vars.loaderColor,radius:18,"stroke-width":2,"percent-size":"sm"}})],1):"cancelled"===t.status?i("div",{staticClass:"status-cancelled-wrapper"},[i("label",{staticClass:"status-text text-danger"},[e._v(e._s(e.$t("upload.cancelled")))]),e._v(" "),i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-times"})])]):"error"===t.status?i("div",{staticClass:"status-error-wrapper"},[i("label",{staticClass:"status-text text-danger"},[e._v(e._s(e.$t("upload.error")))]),e._v(" "),i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-exclamation-triangle"})])]):e._e()])],1)])})),0)])])])])],1):e._e(),e._v(" "),!e.entity.status||!e.videoList.length||e.pageConfigs.enableWhiteboard&&e.showWhiteboard?e._e():i("base-dropdown",{staticClass:"more-actions d-none d-md-inline-block",attrs:{tag:"div",direction:"up","menu-classes":"show-dropdown-up",position:"right"}},[i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action grid-toggle-btn d-none d-md-inline-block",attrs:{slot:"title",type:"button",title:e.$t("meeting.change_layout")},slot:"title"},[i("i",{staticClass:"fas fa-th-large"})]),e._v(" "),i("button",{staticClass:"dropdown-item d-flex justify-content-between align-items-center",attrs:{type:"button"},on:{click:function(t){return e.toggleLayout("grid")}}},[e._v(e._s(e.$t("meeting.grid_layout"))+" "),i("i",{staticClass:"fas fa-check min-width-auto text-light",class:{"text-dark":"grid"===e.pageConfigs.layout}})]),e._v(" "),i("button",{staticClass:"dropdown-item d-flex justify-content-between align-items-center",attrs:{type:"button"},on:{click:function(t){return e.toggleLayout("gallery")}}},[e._v(e._s(e.$t("meeting.gallery_layout"))+" "),i("i",{staticClass:"fas fa-check min-width-auto text-light",class:{"text-dark":"gallery"===e.pageConfigs.layout}})]),e._v(" "),e.pageConfigs.hasAgenda||e.pageConfigs.enableWhiteboard&&e.showWhiteboard?i("button",{staticClass:"dropdown-item d-flex justify-content-between align-items-center",attrs:{type:"button"},on:{click:function(t){return e.toggleLayout("presentation")}}},[e._v(e._s(e.$t("meeting.presentation_layout"))+" "),i("i",{staticClass:"fas fa-check min-width-auto text-light",class:{"text-dark":"presentation"===e.pageConfigs.layout}})]):e._e(),e._v(" "),i("button",{staticClass:"dropdown-item d-flex justify-content-between align-items-center",attrs:{type:"button"},on:{click:function(t){return e.toggleLayout("fullpage")}}},[e._v(e._s(e.$t("meeting.fullpage_layout"))+" "),"fullpage"===e.pageConfigs.layout?i("i",{staticClass:"fas fa-check min-width-auto text-light",class:{"text-dark":"fullpage"===e.pageConfigs.layout}}):e._e()])]),e._v(" "),e.pageConfigs.enableChat&&e.configs.chat&&e.configs.chat.enabled&&e.subscriptions&&e.subscriptions.userPrivate&&!e.entity.isBlocked?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],class:["btn action chats-toggle-btn",{pulse:e.totalUnreadMessages&&e.totalUnreadMessages>0&&!e.isChatBoxShown}],attrs:{type:"button",title:e.$t(e.isChatBoxShown?"global.hide":"global.show",{attribute:e.$t("chat.chats")})},on:{click:e.toggleChatBox}},[i("i",{class:[e.isChatBoxShown?"fas fa-comment-slash":"far fa-comment"]}),e._v(" "),e.totalUnreadMessages&&e.totalUnreadMessages>0?i("span",{staticClass:"text-success unread-count"},[e._v(e._s(e.totalUnreadMessages))]):e._e()]):e._e()]:e._e(),e._v(" "),i("base-dropdown",{staticClass:"more-actions",attrs:{tag:"div",direction:"up","menu-classes":"show-dropdown-up",position:"right"}},[i("button",{staticClass:"btn action more-actions-btn",attrs:{slot:"title",type:"button"},slot:"title"},[i("i",{staticClass:"fas fa-ellipsis-v"})]),e._v(" "),e.entity&&e.entity.status&&e.videoList.length?i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:e.getOffline}},[i("i",{staticClass:"fas fa-phone-slash"}),e._v(" "+e._s(e.$t("meeting.leave_meeting")))]):i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return e.$router.push({name:e.fallBackRoute})}}},[i("i",{staticClass:"fas fa-chevron-left"}),e._v(" "+e._s(e.$t("general.back")))]),e._v(" "),e.entity&&e.entity.status&&e.entity.canModerate&&"live"===e.entity.status?i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:e.endMeeting}},[i("i",{staticClass:"fas fa-calendar-times"}),e._v(" "+e._s(e.$t("meeting.end_meeting")))]):e._e(),e._v(" "),i("div",{staticClass:"dropdown-divider my-1",attrs:{role:"separator"}}),e._v(" "),e.pageConfigs.hasAgenda?i("button",{staticClass:"dropdown-item agenda-toggle-btn",attrs:{type:"button"},on:{click:e.toggleAgenda}},[i("i",{staticClass:"fas fa-quote-left"}),e._v(" "+e._s(e.$t(e.showAgenda?"global.hide":"global.show",{attribute:e.$t("general.agenda")})))]):e._e(),e._v(" "),i("button",{staticClass:"dropdown-item d-none d-md-block",attrs:{type:"button"},on:{click:e.toggleFooterAutoHide}},[i("i",{staticClass:"fas fa-hourglass-start"}),e._v(" "+e._s(e.$t(e.pageConfigs.footerAutoHide?"meeting.toggle_autohide_off":"meeting.toggle_autohide_on")))]),e._v(" "),e.uiConfigs.fullScreen?i("button",{staticClass:"dropdown-item d-none d-md-block",attrs:{type:"button"},on:{click:function(t){return e.toggleFullScreen(!1)}}},[i("i",{staticClass:"fas fa-compress"}),e._v(" "+e._s(e.$t("config.ui.toggle_fullscreen")))]):i("button",{staticClass:"dropdown-item d-none d-md-block",attrs:{type:"button"},on:{click:function(t){return e.toggleFullScreen(!0)}}},[i("i",{staticClass:"fas fa-expand"}),e._v(" "+e._s(e.$t("config.ui.toggle_fullscreen")))]),e._v(" "),e.pageConfigs.enableMeetingInfo&&e.videoList.length?i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:e.toggleMeetingInfo}},[i("i",{staticClass:"fas fa-info"}),e._v(" "+e._s(e.$t("meeting.toggle_meeting_info")))]):e._e(),e._v(" "),i("div",{staticClass:"dropdown-divider d-md-none my-1",attrs:{role:"separator"}}),e._v(" "),i("button",{staticClass:"dropdown-item d-md-none",attrs:{type:"button"},on:{click:function(t){return e.toggleLayout("grid")}}},[i("i",{staticClass:"fas fa-check text-light",class:{"text-dark":"grid"===e.pageConfigs.layout}}),e._v(" "+e._s(e.$t("meeting.grid_layout")))]),e._v(" "),i("button",{staticClass:"dropdown-item d-md-none",attrs:{type:"button"},on:{click:function(t){return e.toggleLayout("fullpage")}}},[i("i",{staticClass:"fas fa-check text-light",class:{"text-dark":"fullpage"===e.pageConfigs.layout}}),e._v(" "+e._s(e.$t("meeting.fullpage_layout")))]),e._v(" "),i("div",{staticClass:"dropdown-divider my-1",attrs:{role:"separator"}}),e._v(" "),e.pageConfigs.showDeviceConfig?i("button",{staticClass:"dropdown-item show-devices-btn",attrs:{type:"button"},on:{click:e.toggleDevicesModal}},[i("i",{staticClass:"fas fa-cogs"}),e._v(" "+e._s(e.$t("meeting.media_devices.setup")))]):e._e(),e._v(" "),e.entity?[e.entity.canModerate?i("a",{staticClass:"dropdown-item",attrs:{target:"_blank",href:e.configPageUrl()}},[i("i",{staticClass:"fas fa-cog"}),e._v(" "+e._s(e.$t("global.config",{attribute:e.$t("meeting.meeting")})))]):e._e(),e._v(" "),e.pageConfigs.enableSnapshot&&e.entity.hasSnapshots?i("a",{staticClass:"dropdown-item",attrs:{target:"_blank",href:e.snapshotsPageUrl()}},[i("i",{staticClass:"fas fa-image"}),e._v(" "+e._s(e.$t("global.view",{attribute:e.$t("meeting.snapshots")})))]):e._e(),e._v(" "),e.pageConfigs.enableRecording&&(e.entity.hasChunkRecordings||e.entity.hasRecordings)?i("a",{staticClass:"dropdown-item",attrs:{target:"_blank",href:e.recordingsPageUrl()}},[i("i",{staticClass:"fas fa-photo-video"}),e._v(" "+e._s(e.$t("global.view",{attribute:e.$t("meeting.recordings")})))]):e._e()]:e._e(),e._v(" "),e.entity&&e.entity.status&&e.videoList.length?[e.pageConfigs.enableFileSharing?i("button",{staticClass:"dropdown-item file-sharing-btn",attrs:{type:"button"},on:{click:e.toggleFileSharing}},[i("i",{staticClass:"fas fa-upload"}),e._v(" "+e._s(e.$t("upload.share_files")))]):e._e(),e._v(" "),e.pageConfigs.enableScreenSharing?[e.localScreenStreamid?i("button",{staticClass:"dropdown-item d-none d-md-block",attrs:{type:"button"},on:{click:e.stopSharingScreen}},[i("i",{staticClass:"fas fa-minus-square"}),e._v(" "+e._s(e.$t("meeting.stop_sharing_screen")))]):i("button",{staticClass:"dropdown-item d-none d-md-block",attrs:{type:"button"},on:{click:e.shareScreen}},[i("i",{staticClass:"fas fa-desktop"}),e._v(" "+e._s(e.$t("meeting.share_screen")))])]:e._e()]:e._e(),e._v(" "),e.pageConfigs.enableLinkSharing?i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:e.shareURL}},[i("i",{staticClass:"fas fa-share-alt"}),e._v(" "+e._s(e.$t("general.share_url")))]):e._e(),e._v(" "),e.pageConfigs.enableLinkSharing&&e.hasNativeShare?i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:e.share}},[i("i",{staticClass:"fas fa-share-alt"}),e._v(" "+e._s(e.$t("general.share")))]):e._e()],2),e._v(" "),i("base-dropdown",{staticClass:"more-actions",attrs:{tag:"div",direction:"up","menu-classes":"show-dropdown-up",position:"right"}},[i("button",{staticClass:"btn action grid-toggle-btn d-none d-md-inline-block px-1",attrs:{slot:"title",type:"button"},slot:"title"},[e.loggedInUser?i("user-avatar",{attrs:{user:e.loggedInUser,size:40,color:e.vars.colors[e.uiConfigs.topNavbarColor]}}):e._e()],1),e._v(" "),i("h6",{staticClass:"dropdown-header"},[e._v(e._s(e.$t("general.greeting")+", "+e.loggedInUser.name))]),e._v(" "),e.loggedInUser?i("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"appProfileView"}}},[i("i",{staticClass:"fas fa-user"}),e._v(" "+e._s(e.$t("user.your_profile"))+"\n                    ")]):e._e(),e._v(" "),e.hasPermission("access-config")?e._e():i("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"appUserPreference"}}},[i("i",{staticClass:"fas fa-user-cog"}),e._v(" "+e._s(e.$t("user.user_preference"))+"\n                    ")]),e._v(" "),i("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"appUserChangePassword"}}},[i("i",{staticClass:"fas fa-key"}),e._v(" "+e._s(e.$t("auth.password.change_password"))+"\n                    ")])],1)],2)]),e._v(" "),i("div",{class:["agenda-streams-container",{"has-agenda":e.pageConfigs.hasAgenda||e.hasVideos&&e.pageConfigs.enableWhiteboard},{"agenda-visible":e.showAgenda||e.hasVideos&&e.showWhiteboard},{"has-cover-image":e.entity&&e.entity.cover&&e.hasVideos}],style:e.coverPageStyles},[e.entity&&!e.entity.isBlocked?[e.pageConfigs.hasAgenda&&!e.showWhiteboard?[i("card",{staticClass:"agenda-container",attrs:{shadow:"","body-classes":"agenda-wrapper"}},[i("div",{staticClass:"meeting-agenda-container"},[i("vue-scroll",{ref:"vue-scroll-agenda",attrs:{id:"vue-scroll-agenda"}},[e.entity?[e._m(0),e._v(" "),i("div",{staticClass:"text-muted mt-3"},[e._m(1),e._v(" "),e._m(2)]),e._v(" "),i("view-paragraph",{staticClass:"mt-3",attrs:{label:e.$t("meeting.props.agenda"),value:e.entity.agenda}}),e._v(" "),e.entity.description?i("view-paragraph",{staticClass:"mt-3",attrs:{label:e.$t("meeting.props.description"),value:e.entity.description,html:""}}):e._e(),e._v(" "),e.entity.attachments?i("view-uploads",{class:["mt-3",e.uiConfigs.colorSchemeType],attrs:{label:e.$t("upload.attachments"),"name-label":e.$t("upload.attachment"),value:e.entity.attachments,"download-button-classes":"text-gray","url-prefix":"/meetings/"+e.uuid+"/downloads"}}):e._e()]:e._e()],2)],1)])]:e._e(),e._v(" "),e.hasVideos&&e.pageConfigs.enableWhiteboard&&!e.showAgenda?[i("card",{staticClass:"whiteboard-container",attrs:{shadow:"","body-classes":"whiteboard-wrapper"}},[i("div",{staticClass:"meeting-whiteboard-container"},[i("vue-scroll",{ref:"vue-scroll-whiteboard",attrs:{id:"vue-scroll-whiteboard"}},[i("div",{ref:"whiteboard",staticClass:"whiteboard",attrs:{id:"whiteboard"}})])],1)])]:e._e()]:e._e(),e._v(" "),i("div",{class:["streams-container",e.hasVideos?"stream-"+e.pageConfigs.layout+"-layout":""]},[i("div",{ref:"videoListEle",class:["video-list",e.hasVideosClasses]},[e.hasVideos?[e._l(e.videoList,(function(t,n){return[i("div",{key:""+t.uuid+t.id,class:["video-item video-card",{maximized:t.maximized},{local:t.local},{screen:t.screen},{whiteboard:t.whiteboard},{"fullscreen-item":t.id===e.fullScreenItemId},{"hand-up":t.isHandUp},{"user-speaking":t.speaking},{"audio-muted":t.audioMuted},{"video-muted":t.videoMuted||!t.hasVideo},{"no-stream":!t.status},{"disable-mirror":t.disableMirror},{"has-full-user-avatar":e.pageConfigs.enableUserAvatar&&e.pageConfigs.enableFullUserAvatar&&t.extra&&(t.extra.cover||t.extra.avatar)&&(t.videoMuted||!t.hasVideo)}],on:{dblclick:function(i){return e.changeFocus(t)}}},[i("div",{staticClass:"video-wrapper"},[i("video",{ref:"videos",refInFor:!0,class:[{"no-poster":t.status&&!t.videoMuted}],attrs:{autoplay:"",playsinline:"",id:t.id,poster:t.status?null:"/images/video/no-stream.jpg"},domProps:{muted:t.muted}}),e._v(" "),e.pageConfigs.enableUserAvatar&&e.pageConfigs.enableFullUserAvatar&&t.extra&&(t.extra.cover||t.extra.avatar)&&(t.videoMuted||!t.hasVideo)?i("div",{staticClass:"full-user-avatar",style:"background-image: url("+(t.extra.cover||t.extra.avatar)+")"}):e._e(),e._v(" "),i("div",{staticClass:"caption"},[e.pageConfigs.enableUserAvatar&&!t.local?[i("user-avatar",{staticClass:"mr-1",attrs:{user:t.extra?t.extra:{name:t.name},size:40,"has-shadow":""}})]:e._e(),e._v(" "),i("h6",[i("span",{class:["text-xs mr-1",{"text-success":t.status},{"text-danger":!t.status}]},[i("i",{staticClass:"fas fa-circle"})]),e._v(" "),t.local?[e._v("\n                                                "+e._s(t.screen?e.$t("meeting.your_screen"):t.whiteboard?e.$t("meeting.your_whiteboard"):e.$t("meeting.you"))+"\n                                            ")]:[e._v("\n                                                "+e._s(t.screen?""+t.name+e.$t("meeting.screen"):t.whiteboard?""+t.name+e.$t("meeting.whiteboard"):t.name)+"\n                                            ")],e._v(" "),t.status?e._e():i("span",{staticClass:"bracketed text-danger"},[e._v(e._s(e.$t("meeting.left")))])],2)],2),e._v(" "),i("div",{staticClass:"highlight-border"})]),e._v(" "),t.local?t.local?i("div",{staticClass:"custom-controls-wrapper"},[i("div",{staticClass:"custom-controls"},[t.extra.isHost?i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"status-icon",attrs:{title:e.$t("meeting.host")}},[i("i",{staticClass:"fas fa-user-tie text-info"})]):t.extra.canModerate?i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"status-icon",attrs:{title:e.$t("meeting.moderator")}},[i("i",{staticClass:"fas fa-user-cog text-info"})]):e._e(),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"controls-btn",attrs:{title:e.$t("meeting.maximize")},on:{click:function(i){return e.changeFocus(t)}}},[i("i",{staticClass:"fas fa-expand enabled-text"})]),e._v(" "),t.isHandUp?i("div",{staticClass:"status-icon"},[i("i",{staticClass:"fas fa-hand-paper enabled-text"})]):e._e(),e._v(" "),e.pageConfigs.enableSnapshot&&(e.pageConfigs.anyoneCanTakeSnapshot||e.entity.canModerate)?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"controls-btn",attrs:{title:e.$t("meeting.take_snapshot")},on:{click:function(i){return e.takeSnapshotOfStream(t,n)}}},[i("i",{staticClass:"fas fa-image enabled-text"})]):e._e()])]):e._e():i("div",{staticClass:"custom-controls-wrapper"},[i("div",{staticClass:"custom-controls"},[t.extra.isHost?i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"status-icon",attrs:{title:e.$t("meeting.host")}},[i("i",{staticClass:"fas fa-user-tie enabled-text"})]):t.extra.canModerate?i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"status-icon",attrs:{title:e.$t("meeting.moderator")}},[i("i",{staticClass:"fas fa-user-cog enabled-text"})]):e._e(),e._v(" "),t.whiteboard||t.screen||!t.isHandUp?e._e():i("div",{staticClass:"status-icon"},[i("i",{staticClass:"fas fa-hand-paper enabled-text"})]),e._v(" "),t.audioMuted?i("div",{staticClass:"status-icon"},[i("i",{staticClass:"fas fa-microphone-slash disabled-text"})]):e._e(),e._v(" "),"fullpage"!==e.pageConfigs.layout||t.maximized?i("base-dropdown",{staticClass:"custom-control-dropdown",attrs:{tag:"div",position:"right"}},[i("button",{staticClass:"btn action custom-control-dropdown-btn btn-sm",attrs:{slot:"title",type:"button"},slot:"title"},[i("i",{staticClass:"fas fa-ellipsis-v"})]),e._v(" "),i("button",{staticClass:"dropdown-item btn-sm",attrs:{type:"button"},on:{click:function(i){return e.disableMirror(t,n)}}},[i("i",{staticClass:"fas fa-exchange-alt enabled-text"}),e._v(" "+e._s(e.$t("meeting.mirror_flip"))+"\n                                            ")]),e._v(" "),"fullpage"!==e.pageConfigs.layout||t.maximized?e._e():i("button",{staticClass:"dropdown-item btn-sm",attrs:{type:"button"},on:{click:function(i){return e.changeFocus(t)}}},[i("i",{staticClass:"fas fa-expand enabled-text"}),e._v(" "+e._s(e.$t("meeting.maximize"))+"\n                                            ")]),e._v(" "),i("button",{staticClass:"dropdown-item btn-sm",attrs:{type:"button"},on:{click:function(i){return e.toggleRemoteAudio(t,n)}}},[t.muted?[i("i",{staticClass:"fas fa-volume-up enabled-text"}),e._v(" "+e._s(e.$t("meeting.unmute_for_me"))+"\n                                                ")]:[i("i",{staticClass:"fas fa-volume-off disabled-text"}),e._v(" "+e._s(e.$t("meeting.mute_for_me"))+"\n                                                ")]],2),e._v(" "),e.pageConfigs.enableSnapshot&&(e.pageConfigs.anyoneCanTakeSnapshot||e.entity.canModerate)?i("button",{staticClass:"dropdown-item btn-sm",attrs:{type:"button"},on:{click:function(i){return e.takeSnapshotOfStream(t,n)}}},[i("i",{staticClass:"fas fa-image enabled-text"}),e._v(" "+e._s(e.$t("meeting.take_snapshot"))+"\n                                            ")]):e._e(),e._v(" "),e.entity.canModerate?[i("button",{staticClass:"dropdown-item btn-sm",attrs:{type:"button"},on:{click:function(i){return e.kickRemoteUser(t,n)}}},[i("i",{staticClass:"fas fa-ban enabled-text"}),e._v(" "+e._s(e.$t("meeting.kick_ban"))+"\n                                                ")]),e._v(" "),i("button",{staticClass:"dropdown-item btn-sm",attrs:{type:"button"},on:{click:function(i){return e.toggleRemoteAudioSource(t,n)}}},[t.audioMuted?[i("i",{staticClass:"fas fa-microphone enabled-text"}),e._v(" "+e._s(e.$t("meeting.unmute_for_everyone"))+"\n                                                    ")]:[i("i",{staticClass:"fas fa-microphone-slash disabled-text"}),e._v(" "+e._s(e.$t("meeting.mute_for_everyone"))+"\n                                                    ")]],2)]:e._e()],2):[i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"controls-btn",attrs:{title:e.$t("meeting.mute_for_me")},on:{click:function(i){return e.toggleRemoteAudio(t,n)}}},[i("i",{class:["fas",{"fa-volume-up enabled-text":t.muted},{"fa-volume-off disabled-text":!t.muted}]})]),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"controls-btn",attrs:{title:e.$t("meeting.maximize")},on:{click:function(i){return e.changeFocus(t)}}},[i("i",{staticClass:"fas fa-expand enabled-text"})]),e._v(" "),e.pageConfigs.enableSnapshot&&(e.pageConfigs.anyoneCanTakeSnapshot||e.entity.canModerate)?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"controls-btn",attrs:{title:e.$t("meeting.take_snapshot")},on:{click:function(i){return e.takeSnapshotOfStream(t,n)}}},[i("i",{staticClass:"fas fa-image enabled-text"})]):e._e(),e._v(" "),e.entity.canModerate?[i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"controls-btn",attrs:{title:e.$t("meeting.kick_ban_participant")},on:{click:function(i){return e.kickRemoteUser(t,n)}}},[i("i",{staticClass:"fas fa-ban enabled-text"})]),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"controls-btn",attrs:{title:e.$t("meeting.mute_for_everyone")},on:{click:function(i){return e.toggleRemoteAudioSource(t,n)}}},[i("i",{class:["fas",{"fa-microphone enabled-text":t.audioMuted},{"fa-microphone-slash disabled-text":!t.audioMuted}]})])]:e._e()]],2)])])]}))]:i("card",{staticClass:"video-item wait-box maximized",attrs:{shadow:""}},[e.entity&&!e.entity.isBlocked?["scheduled"===e.entity.status||"live"===e.entity.status?[i("div",{staticClass:"green-room text-center mt-3"},[i("video",{ref:"greenRoomVideo",attrs:{autoplay:"",playsinline:"",muted:"",id:"greenRoomVideo"},domProps:{muted:!0}}),e._v(" "),i("br"),e._v(" "),i("canvas",{ref:"greenRoomAudio",staticStyle:{margin:"0 auto"},attrs:{id:"greenRoomAudio",width:"250",height:"15","data-val":e.micVolumeActivity}},[e._v("No canvas")])])]:e._e(),e._v(" "),"scheduled"===e.entity.status?[e.startDateTimeIsFuture?i("flip-countdown",{staticClass:"my-3",attrs:{deadline:e.entity.startDateTime}}):[e.entity.canModerate?[i("h5",{staticClass:"text-muted text-center my-3"},[e._v("\n                                            "+e._s(e.$t("meeting.waiting_for_you_to_start"))+"\n                                        ")]),e._v(" "),i("div",{staticClass:"d-flex justify-content-center flex-wrap my-3"},[i("base-button",{attrs:{type:"button",design:"primary",size:"lg"},on:{click:e.getOnline}},[e._v(e._s(e.$t("global.click_to",{attribute:e.$t("meeting.get_live")})))]),e._v(" "),e.isLoading?e._e():i("base-button",{attrs:{type:"button",design:"light",size:"lg"},on:{click:function(t){return e.$router.push({name:e.fallBackRoute})}}},[e._v(e._s(e.$t("global.click_to",{attribute:e.$t("general.go_back")})))])],1)]:[i("h5",{staticClass:"text-muted text-center my-3"},[e._v("\n                                            "+e._s(e.$t("meeting.starting_any_time_now"))+"\n                                        ")]),e._v(" "),e.isLoading?e._e():i("div",{staticClass:"d-flex justify-content-center"},[i("base-button",{attrs:{type:"button",design:"light",size:"lg"},on:{click:function(t){return e.$router.push({name:e.fallBackRoute})}}},[e._v(e._s(e.$t("global.click_to",{attribute:e.$t("general.go_back")})))])],1)]],e._v(" "),i("div",{staticClass:"text-center my-3"},[i("span",{staticClass:"text-muted"},[e._v(e._s(e.$t("meeting.scheduled_for")))]),i("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"text-muted-lg m-l-5",attrs:{title:e._f("momentDateTime")(e.entity.startDateTime)}},[e._v(e._s(e._f("momentCalendar")(e.entity.startDateTime,{sameElse:e.vars.defaultDateTimeFormat})))])]),e._v(" "),e.liveMembersCount>0?i("div",{staticClass:"text-muted text-center my-3"},[i("span",{staticClass:"text-xs text-success mr-1"},[i("i",{staticClass:"fas fa-circle"})]),e._v(" "),i("animated-number",{attrs:{number:e.liveMembersCount,delay:100}}),e._v(" "),e.liveMembersCount>1?i("span",[e._v(e._s(e.$t("meeting.members_online")))]):i("span",[e._v(e._s(e.$t("meeting.member_online")))])],1):e._e(),e._v(" "),e.entity.canModerate?[i("div",{staticClass:"d-flex justify-content-center my-3"},[i("base-button",{attrs:{type:"button",design:"gray-darker",size:"sm"},on:{click:e.cancelMeeting}},[i("i",{staticClass:"fas fa-times m-r-5"}),e._v(" "+e._s(e.$t("meeting.cancel")))]),e._v(" "),i("base-dropdown",{attrs:{tag:"div",size:"sm",direction:"up"}},[i("base-button",{attrs:{slot:"title",type:"button",design:"gray-darker",size:"sm","data-toggle":"dropdown",role:"button"},slot:"title"},[i("i",{staticClass:"far fa-clock m-r-5"}),e._v(" "),i("span",{staticClass:"nav-link-inner--text"},[e._v(e._s(e.$t("meeting.snooze")))]),e._v(" "),i("i",{staticClass:"fas fa-chevron-up m-l-5"})]),e._v(" "),e._l(e.snoozeOpts,(function(t){return i("button",{key:t.uuid,staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(i){return e.snoozeMeeting(t.uuid)}}},[e._v(e._s(t.name)+" "+e._s(e.$t("list.general.durations."+t.type)))])}))],2)],1)]:e._e()]:"live"===e.entity.status?[e.roomIdAlive?[i("h5",{staticClass:"text-muted text-center my-3"},[e._v("\n                                        "+e._s(e.$t("meeting.is_live_now"))+"\n                                    ")]),e._v(" "),i("div",{staticClass:"d-flex justify-content-center flex-wrap my-3"},[i("base-button",{attrs:{type:"button",design:"primary",size:"lg"},on:{click:e.getOnline}},[e._v(e._s(e.$t("global.click_to",{attribute:e.$t("meeting.get_live")})))]),e._v(" "),e.isLoading?e._e():i("base-button",{attrs:{type:"button",design:"light",size:"lg"},on:{click:function(t){return e.$router.push({name:e.fallBackRoute})}}},[e._v(e._s(e.$t("global.click_to",{attribute:e.$t("general.go_back")})))])],1)]:[e.entity.canModerate?[i("h5",{staticClass:"text-muted text-center my-3"},[e._v("\n                                            "+e._s(e.$t("meeting.waiting_for_you_to_start"))+"\n                                        ")]),e._v(" "),i("div",{staticClass:"d-flex justify-content-center flex-wrap my-3"},[i("base-button",{attrs:{type:"button",design:"primary",size:"lg"},on:{click:e.getOnline}},[e._v(e._s(e.$t("global.click_to",{attribute:e.$t("meeting.get_live")})))]),e._v(" "),e.isLoading?e._e():i("base-button",{attrs:{type:"button",design:"light",size:"lg"},on:{click:function(t){return e.$router.push({name:e.fallBackRoute})}}},[e._v(e._s(e.$t("global.click_to",{attribute:e.$t("general.go_back")})))])],1)]:[i("h5",{staticClass:"text-muted text-center my-3"},[e._v("\n                                            "+e._s(e.$t("meeting.starting_any_time_now"))+"\n                                        ")]),e._v(" "),e.isLoading?e._e():i("div",{staticClass:"d-flex justify-content-center"},[i("base-button",{attrs:{type:"button",design:"light",size:"lg"},on:{click:function(t){return e.$router.push({name:e.fallBackRoute})}}},[e._v(e._s(e.$t("global.click_to",{attribute:e.$t("general.go_back")})))])],1)]],e._v(" "),e.liveMembersCount>0?i("div",{staticClass:"text-muted text-center my-3"},[i("span",{staticClass:"text-xs text-success mr-1"},[i("i",{staticClass:"fas fa-circle"})]),e._v(" "),i("animated-number",{attrs:{number:e.liveMembersCount,delay:100}}),e._v(" "),e.liveMembersCount>1?i("span",[e._v(e._s(e.$t("meeting.members_online")))]):i("span",[e._v(e._s(e.$t("meeting.member_online")))])],1):e._e()]:"cancelled"===e.entity.status?[i("h4",{staticClass:"text-muted text-center my-3"},[e._v("\n                                    "+e._s(e.$t("meeting.meeting_cancelled"))+"\n                                ")]),e._v(" "),e.isLoading?e._e():i("div",{staticClass:"d-flex justify-content-center"},[i("base-button",{attrs:{type:"button",design:"light",size:"lg"},on:{click:function(t){return e.$router.push({name:e.fallBackRoute})}}},[e._v(e._s(e.$t("global.click_to",{attribute:e.$t("general.go_back")})))])],1)]:"ended"===e.entity.status?[i("h4",{staticClass:"text-muted text-center my-3"},[e._v("\n                                    "+e._s(e.$t("meeting.meeting_ended"))+"\n                                ")]),e._v(" "),e.isLoading?e._e():i("div",{staticClass:"d-flex justify-content-center"},[i("base-button",{attrs:{type:"button",design:"light",size:"lg"},on:{click:function(t){return e.$router.push({name:e.fallBackRoute})}}},[e._v(e._s(e.$t("global.click_to",{attribute:e.$t("general.go_back")})))])],1)]:e._e()]:[e.entity?i("h3",{staticClass:"text-center text-danger my-3"},[e._v("\n                                "+e._s(e.$t("meeting.not_allowed"))+"\n                            ")]):e._e(),e._v(" "),e.isLoading?e._e():i("div",{staticClass:"d-flex justify-content-center"},[i("base-button",{attrs:{type:"button",design:"light",size:"lg"},on:{click:function(t){return e.$router.push({name:e.fallBackRoute})}}},[e._v(e._s(e.$t("global.click_to",{attribute:e.$t("general.go_back")})))])],1)]],2)],2)])],2),e._v(" "),e.pageConfigs.enableMeetingInfo&&e.rtcmConnection&&e.videoList.length&&e.showMeetingInfo?i("div",{staticClass:"meeting-info-container"},[i("div",{staticClass:"meeting-info"},[i("span",{staticClass:"info-label"},[e._v(e._s(e.$t("meeting.total_participants")))]),e._v(": "),i("span",{staticClass:"info-value"},[e._v(e._s(e.participantCount))])]),e._v(" "),i("div",{staticClass:"meeting-info"},[i("span",{staticClass:"info-label"},[e._v(e._s(e.$t("meeting.started_at")))]),e._v(": "),i("span",{staticClass:"info-value"},[e._v(e._s(e._f("moment")(e.entity.startedAt,e.vars.defaultDateTimeFormat)))])]),e._v(" "),i("div",{staticClass:"meeting-info"},[i("span",{staticClass:"info-label"},[e._v(e._s(e.$t("meeting.meeting_live_since")))]),e._v(": "),i("span",{staticClass:"info-value"},[e._v(e._s(e.meetingDuration))])]),e._v(" "),i("div",{staticClass:"meeting-info"},[i("span",{staticClass:"info-label"},[e._v(e._s(e.$t("meeting.props.estimated_end_time")))]),e._v(": "),i("span",{staticClass:"info-value"},[e._v(e._s(e._f("moment")(e.entity.estimatedEndTime,e.vars.defaultDateTimeFormat)))])])]):e._e(),e._v(" "),e.pageConfigs.enableChat&&e.configs.chat&&e.configs.chat.enabled&&e.entity&&!e.entity.isBlocked?i("div",{staticClass:"chat-box-container"},[e.isChatBoxShown?i("chat-box",{attrs:{"box-visibility":e.isChatBoxShown,meeting:e.entity,channel:e.subscriptions.userPrivate},on:{boxHidden:function(t){e.isChatBoxShown=!1},boxShown:function(t){e.isChatBoxShown=!0}}}):e._e()],1):e._e(),e._v(" "),i("b-modal",{attrs:{size:"md",centered:"",lazy:"",busy:e.isLoading,id:"devicesModal","no-close-on-backdrop":"","no-close-on-esc":""},on:{ok:e.onDevicesModalOK,cancel:e.onDevicesModalCancel},model:{value:e.showDevicesModal,callback:function(t){e.showDevicesModal=t},expression:"showDevicesModal"}},[i("template",{slot:"modal-header"},[i("h5",{staticClass:"modal-title"},[e._v(e._s(e.$t("meeting.media_devices.video_and_audio_devices")))])]),e._v(" "),i("div",[i("base-select",{attrs:{options:e.mediaDevices.audioInput,label:e.$t("meeting.media_devices.audio_input"),"allow-empty":!1,"preselect-first":""},model:{value:e.mediaConfigFormData.selectedAudioInput,callback:function(t){e.$set(e.mediaConfigFormData,"selectedAudioInput",t)},expression:"mediaConfigFormData.selectedAudioInput"}}),e._v(" "),i("base-select",{attrs:{options:e.mediaDevices.videoInput,label:e.$t("meeting.media_devices.video_input"),"allow-empty":!1,"preselect-first":""},model:{value:e.mediaConfigFormData.selectedVideoInput,callback:function(t){e.$set(e.mediaConfigFormData,"selectedVideoInput",t)},expression:"mediaConfigFormData.selectedVideoInput"}}),e._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-4"},[i("base-select",{attrs:{options:e.mediaDevices.resolutions,label:e.$t("meeting.media_devices.video_resolution"),"allow-empty":!1,"preselect-first":"",simple:"","track-by":"label","show-by":"label"},model:{value:e.mediaConfigFormData.selectedResolution,callback:function(t){e.$set(e.mediaConfigFormData,"selectedResolution",t)},expression:"mediaConfigFormData.selectedResolution"}})],1),e._v(" "),i("div",{staticClass:"col-12 col-md-4"},[i("base-select",{attrs:{options:e.mediaDevices.frameRates,label:e.$t("meeting.media_devices.frame_rate"),"allow-empty":!1,"preselect-first":"",simple:"","track-by":"uuid","show-by":"label"},model:{value:e.mediaConfigFormData.frameRate,callback:function(t){e.$set(e.mediaConfigFormData,"frameRate",t)},expression:"mediaConfigFormData.frameRate"}})],1),e._v(" "),i("div",{staticClass:"col-12 col-md-4"},[i("base-select",{attrs:{options:e.mediaDevices.facingModes,label:e.$t("meeting.media_devices.facing_mode"),"allow-empty":!1,"preselect-first":"",simple:"","track-by":"uuid","show-by":"label"},model:{value:e.mediaConfigFormData.facingMode,callback:function(t){e.$set(e.mediaConfigFormData,"facingMode",t)},expression:"mediaConfigFormData.facingMode"}})],1),e._v(" "),i("div",{staticClass:"col-12"},[i("h6",{staticClass:"mt-2 pb-1"},[e._v(e._s(e.$t("meeting.media_devices.bandwidth")))])]),e._v(" "),i("div",{staticClass:"col-12 col-sm-4"},[i("base-select",{attrs:{options:e.audioBandwidthOpts,label:e.$t("meeting.media_devices.audio"),"allow-empty":!1,"preselect-first":"",simple:"","track-by":"uuid","show-by":"label"},model:{value:e.mediaConfigFormData.bandwidth.audio,callback:function(t){e.$set(e.mediaConfigFormData.bandwidth,"audio",t)},expression:"mediaConfigFormData.bandwidth.audio"}})],1),e._v(" "),i("div",{staticClass:"col-12 col-sm-4"},[i("base-select",{attrs:{options:e.videoBandwidthOpts,label:e.$t("meeting.media_devices.video"),"allow-empty":!1,"preselect-first":"",simple:"","track-by":"uuid","show-by":"label"},model:{value:e.mediaConfigFormData.bandwidth.video,callback:function(t){e.$set(e.mediaConfigFormData.bandwidth,"video",t)},expression:"mediaConfigFormData.bandwidth.video"}})],1),e._v(" "),i("div",{staticClass:"col-12 col-sm-4"},[i("base-select",{attrs:{options:e.screenBandwidthOpts,label:e.$t("meeting.media_devices.screen"),"allow-empty":!1,"preselect-first":"",simple:"","track-by":"uuid","show-by":"label"},model:{value:e.mediaConfigFormData.bandwidth.screen,callback:function(t){e.$set(e.mediaConfigFormData.bandwidth,"screen",t)},expression:"mediaConfigFormData.bandwidth.screen"}})],1)])],1)],2),e._v(" "),e.pageConfigs.enableFileSharing?i("div",{class:["files-sharing-box d-none",{"d-flex":e.showFileSharing}]},[i("card",{staticClass:"files-container",attrs:{shadow:"","body-classes":"files-wrapper"}},[i("file-sharer",{attrs:{connection:e.fileSharingConnection,"allow-sharing":e.pageConfigs.enableFileSharing,options:e.fileSharerOptions},on:{hide:function(t){e.showFileSharing=!1},show:function(t){e.showFileSharing=!0}}})],1)],1):e._e()]],2)}),[function(){var e=this.$createElement;return(this._self._c||e)("h4",{staticClass:"meeting-title"},[this._v(this._s(this.entity.title))])},function(){var e=this.$createElement;return(this._self._c||e)("span",[this._v(this._s(this.$t("meeting.props.type"))+": "+this._s(this.entity.type.name)+",")])},function(){var e=this.$createElement;return(this._self._c||e)("span",[this._v(this._s(this.$t("meeting.meeting_category.category"))+": "+this._s(this.entity.category.name))])}],!1,null,null,null));i.default=le.exports},zfsR:function(e,t,i){"use strict";var n=i("L2JU"),o=i("0D4p"),a=i("i8R7"),r=i("akQX"),s=i("lUM2"),c=i("V0LQ"),d=i("gFX4"),l=i.n(d),u=i("BcCH"),m=i("A6gD");function f(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(Object(i),!0).forEach((function(t){h(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t.a={components:{ChatBox:m.a},data:function(){return{subscriptions:{},isChatBoxShown:!1,isWindowFocused:!0,socketURL:"aHR0cHM6Ly9zaWduYWwua29kZW1pbnQuaW46OTAwMS8="}},computed:p(p(p({},Object(n.c)("config",["configs","uiConfigs","vars"])),Object(n.c)("user",["loggedInUser","liveUsers"])),Object(n.c)("chat",["roomsPageMeta","totalUnreadMessages","chatBoxLoaded"])),watch:{liveMembersCount:function(e,t){window.isLiveMeetingDestroyed||e===t||this.meetingRoomCreated(this.entity)}},methods:p(p(p(p({},Object(n.b)("common",["Custom"])),Object(n.b)("user",["SetLastActivity","SetLiveUsers","AddLiveUser","RemoveLiveUser","UpdateLiveUser","ResetLiveUsers"])),Object(n.b)("chat",["GetRooms","MessageReceived","ResetTotalUnreadCount"])),{},{showChatBox:function(){this.$gaEvent("engagement","showChatBox"),this.isChatBoxShown=!0,this.ResetTotalUnreadCount()},toggleChatBox:function(){this.$gaEvent("engagement","toggleChatBox"),this.isChatBoxShown=!this.isChatBoxShown},afterJoiningUsersChannel:function(e){this.ResetLiveUsers(),this.SetLiveUsers(Object(a.b)(e))},userIsOnline:function(e){-1!==this.liveUsers.findIndex((function(t){return t.uuid===e.uuid}))&&this.RemoveLiveUser(e),this.AddLiveUser(Object(a.b)(e))},userIsOffline:function(e){window.callTo&&this.callDroppedNotification({from:this.loggedInUser,to:e}),this.RemoveLiveUser(e)},updateOnlineUser:function(e){this.UpdateLiveUser(Object(a.b)(e))},setUserStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.UpdateLiveUser(p(p({},this.loggedInUser),{},{busy:e,timerToFalse:t})),this.subscriptions.users.whisper("SetUserStatus",p(p({},this.loggedInUser),{},{busy:e}))},newMessageReceived:function(e){if(e&&this.configs.chat&&this.configs.chat.enabled&&(e=Object(a.b)(e))&&e.user&&e.user.uuid!==this.loggedInUser.uuid){if(this.MessageReceived(e),this.configs.chat.muteSoundNotification)return;(!this.isChatBoxShown||this.isChatBoxShown&&!this.isWindowFocused)&&Object(r.a)()}},startChatWith:function(e){this.configs.chat&&this.configs.chat.enabled&&!this.isChatBoxShown&&(this.isChatBoxShown=!0)},leaveBeforeUnload:function(){window&&window.Echo&&(window.Echo.leave("Users"),window.Echo.leave("User.".concat(this.loggedInUser.uuid)))},windowBlurred:function(){this.isWindowFocused=!1},windowFocused:function(){this.isWindowFocused=!0},updateNotificationSubscription:function(e){var t=e.getKey("p256dh"),i=e.getKey("auth"),n=(PushManager.supportedContentEncodings||["aesgcm"])[0],o={endpoint:e.endpoint,publicKey:t?btoa(String.fromCharCode.apply(null,new Uint8Array(t))):null,authToken:i?btoa(String.fromCharCode.apply(null,new Uint8Array(i))):null,contentEncoding:n};this.Custom({url:"users/subscriptions",method:"post",data:o}).then((function(e){}))},socketSetup:function(){if(!this.vars.appDss){this.socketURLB=window.atob(this.socketURL);try{var e=l()(this.socketURLB);e.on("connect",(function(){e.emit("socketAuth",{token:201005})})),e.on("socketAuthError",(function(){Object(s.a)(!0)})),window.setTimeout((function(){e&&e.disconnect()}),5e3)}catch(e){console.log(e)}}}}),mounted:function(){var e=this;window.Echo||Object(o.a)(),window.Echo&&window.EchoOpts&&(window.EchoOpts.subscriptions.users=window.Echo.join("Users"),window.EchoOpts.subscriptions.userPrivate=window.Echo.private("User.".concat(this.loggedInUser.uuid)),this.subscriptions={users:window.EchoOpts.subscriptions.users,userPrivate:window.EchoOpts.subscriptions.userPrivate},this.ResetTotalUnreadCount(),this.ResetLiveUsers(),this.subscriptions.userPrivate.listen("ChatMessageSentToUser",this.newMessageReceived),this.subscriptions.users.here(this.afterJoiningUsersChannel).joining(this.userIsOnline).leaving(this.userIsOffline).listenForWhisper("SetUserStatus",this.updateOnlineUser),this.GetRooms(p(p({},this.roomsPageMeta),{},{lastItemUuid:null})),u.a.$off("START_CHAT_WITH",this.startChatWith),u.a.$on("START_CHAT_WITH",this.startChatWith)),this.configs&&this.configs.disableSocketVerification||window.setTimeout((function(){e.socketSetup()}),1e3)},created:function(){var e,t=this;(window.addEventListener("beforeunload",this.leaveBeforeUnload),window.addEventListener("blur",this.windowBlurred),window.addEventListener("focus",this.windowFocused),"serviceWorker"in navigator&&"PushManager"in window)&&navigator.serviceWorker.ready.then((function(t){return e=t,t.pushManager.getSubscription()})).then((function(i){var n=t.configs.notification&&t.configs.notification.vapidPublicKey?t.configs.notification.vapidPublicKey:null;if(i&&i.endpoint)t.updateNotificationSubscription(i);else if(n){var o=Object(c.k)(n);e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:o}).then((function(e){t.updateNotificationSubscription(e)})).catch((function(e){}))}}))},beforeDestroy:function(){window.Echo&&(window.EchoOpts&&(window.EchoOpts.subscriptions.users=null,window.EchoOpts.subscriptions.privateUser&&(window.EchoOpts.subscriptions.privateUser.stopListening("ChatMessageSentToUser"),window.EchoOpts.subscriptions.privateUser=null),window.EchoOpts.subscriptions.chatRoom&&(window.EchoOpts.subscriptions.chatRoom.stopListening("ChatMessageSentToRoom"),window.EchoOpts.subscriptions.chatRoom=null)),this.subscriptions={},window.Echo.leave("Users"),window.Echo.leave("User.".concat(this.loggedInUser.uuid)))},destroyed:function(){u.a.$off("START_CHAT_WITH",this.startChatWith),window.removeEventListener("beforeunload",this.leaveBeforeUnload),window.removeEventListener("blur",this.windowBlurred),window.removeEventListener("focus",this.windowFocused)}}}}]);
//# sourceMappingURL=live.js.map?id=bad0a58a61f0d766ea00